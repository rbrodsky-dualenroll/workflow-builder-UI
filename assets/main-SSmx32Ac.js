(function(){const i=document.createElement("link").relList;if(i&&i.supports&&i.supports("modulepreload"))return;for(const a of document.querySelectorAll('link[rel="modulepreload"]'))u(a);new MutationObserver(a=>{for(const c of a)if(c.type==="childList")for(const f of c.addedNodes)f.tagName==="LINK"&&f.rel==="modulepreload"&&u(f)}).observe(document,{childList:!0,subtree:!0});function o(a){const c={};return a.integrity&&(c.integrity=a.integrity),a.referrerPolicy&&(c.referrerPolicy=a.referrerPolicy),a.crossOrigin==="use-credentials"?c.credentials="include":a.crossOrigin==="anonymous"?c.credentials="omit":c.credentials="same-origin",c}function u(a){if(a.ep)return;a.ep=!0;const c=o(a);fetch(a.href,c)}})();var Tn=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function Ia(n){return n&&n.__esModule&&Object.prototype.hasOwnProperty.call(n,"default")?n.default:n}var fa={exports:{}},ri={},pa={exports:{}},De={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Nc;function Np(){if(Nc)return De;Nc=1;var n=Symbol.for("react.element"),i=Symbol.for("react.portal"),o=Symbol.for("react.fragment"),u=Symbol.for("react.strict_mode"),a=Symbol.for("react.profiler"),c=Symbol.for("react.provider"),f=Symbol.for("react.context"),p=Symbol.for("react.forward_ref"),h=Symbol.for("react.suspense"),g=Symbol.for("react.memo"),_=Symbol.for("react.lazy"),C=Symbol.iterator;function T(E){return E===null||typeof E!="object"?null:(E=C&&E[C]||E["@@iterator"],typeof E=="function"?E:null)}var w={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},k=Object.assign,y={};function x(E,P,pe){this.props=E,this.context=P,this.refs=y,this.updater=pe||w}x.prototype.isReactComponent={},x.prototype.setState=function(E,P){if(typeof E!="object"&&typeof E!="function"&&E!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,E,P,"setState")},x.prototype.forceUpdate=function(E){this.updater.enqueueForceUpdate(this,E,"forceUpdate")};function j(){}j.prototype=x.prototype;function O(E,P,pe){this.props=E,this.context=P,this.refs=y,this.updater=pe||w}var R=O.prototype=new j;R.constructor=O,k(R,x.prototype),R.isPureReactComponent=!0;var z=Array.isArray,M=Object.prototype.hasOwnProperty,K={current:null},Z={key:!0,ref:!0,__self:!0,__source:!0};function ne(E,P,pe){var se,re={},Te=null,Pe=null;if(P!=null)for(se in P.ref!==void 0&&(Pe=P.ref),P.key!==void 0&&(Te=""+P.key),P)M.call(P,se)&&!Z.hasOwnProperty(se)&&(re[se]=P[se]);var be=arguments.length-2;if(be===1)re.children=pe;else if(1<be){for(var Ce=Array(be),Ae=0;Ae<be;Ae++)Ce[Ae]=arguments[Ae+2];re.children=Ce}if(E&&E.defaultProps)for(se in be=E.defaultProps,be)re[se]===void 0&&(re[se]=be[se]);return{$$typeof:n,type:E,key:Te,ref:Pe,props:re,_owner:K.current}}function U(E,P){return{$$typeof:n,type:E.type,key:P,ref:E.ref,props:E.props,_owner:E._owner}}function Q(E){return typeof E=="object"&&E!==null&&E.$$typeof===n}function ce(E){var P={"=":"=0",":":"=2"};return"$"+E.replace(/[=:]/g,function(pe){return P[pe]})}var N=/\/+/g;function L(E,P){return typeof E=="object"&&E!==null&&E.key!=null?ce(""+E.key):P.toString(36)}function b(E,P,pe,se,re){var Te=typeof E;(Te==="undefined"||Te==="boolean")&&(E=null);var Pe=!1;if(E===null)Pe=!0;else switch(Te){case"string":case"number":Pe=!0;break;case"object":switch(E.$$typeof){case n:case i:Pe=!0}}if(Pe)return Pe=E,re=re(Pe),E=se===""?"."+L(Pe,0):se,z(re)?(pe="",E!=null&&(pe=E.replace(N,"$&/")+"/"),b(re,P,pe,"",function(Ae){return Ae})):re!=null&&(Q(re)&&(re=U(re,pe+(!re.key||Pe&&Pe.key===re.key?"":(""+re.key).replace(N,"$&/")+"/")+E)),P.push(re)),1;if(Pe=0,se=se===""?".":se+":",z(E))for(var be=0;be<E.length;be++){Te=E[be];var Ce=se+L(Te,be);Pe+=b(Te,P,pe,Ce,re)}else if(Ce=T(E),typeof Ce=="function")for(E=Ce.call(E),be=0;!(Te=E.next()).done;)Te=Te.value,Ce=se+L(Te,be++),Pe+=b(Te,P,pe,Ce,re);else if(Te==="object")throw P=String(E),Error("Objects are not valid as a React child (found: "+(P==="[object Object]"?"object with keys {"+Object.keys(E).join(", ")+"}":P)+"). If you meant to render a collection of children, use an array instead.");return Pe}function G(E,P,pe){if(E==null)return E;var se=[],re=0;return b(E,se,"","",function(Te){return P.call(pe,Te,re++)}),se}function ye(E){if(E._status===-1){var P=E._result;P=P(),P.then(function(pe){(E._status===0||E._status===-1)&&(E._status=1,E._result=pe)},function(pe){(E._status===0||E._status===-1)&&(E._status=2,E._result=pe)}),E._status===-1&&(E._status=0,E._result=P)}if(E._status===1)return E._result.default;throw E._result}var ee={current:null},te={transition:null},H={ReactCurrentDispatcher:ee,ReactCurrentBatchConfig:te,ReactCurrentOwner:K};function J(){throw Error("act(...) is not supported in production builds of React.")}return De.Children={map:G,forEach:function(E,P,pe){G(E,function(){P.apply(this,arguments)},pe)},count:function(E){var P=0;return G(E,function(){P++}),P},toArray:function(E){return G(E,function(P){return P})||[]},only:function(E){if(!Q(E))throw Error("React.Children.only expected to receive a single React element child.");return E}},De.Component=x,De.Fragment=o,De.Profiler=a,De.PureComponent=O,De.StrictMode=u,De.Suspense=h,De.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=H,De.act=J,De.cloneElement=function(E,P,pe){if(E==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+E+".");var se=k({},E.props),re=E.key,Te=E.ref,Pe=E._owner;if(P!=null){if(P.ref!==void 0&&(Te=P.ref,Pe=K.current),P.key!==void 0&&(re=""+P.key),E.type&&E.type.defaultProps)var be=E.type.defaultProps;for(Ce in P)M.call(P,Ce)&&!Z.hasOwnProperty(Ce)&&(se[Ce]=P[Ce]===void 0&&be!==void 0?be[Ce]:P[Ce])}var Ce=arguments.length-2;if(Ce===1)se.children=pe;else if(1<Ce){be=Array(Ce);for(var Ae=0;Ae<Ce;Ae++)be[Ae]=arguments[Ae+2];se.children=be}return{$$typeof:n,type:E.type,key:re,ref:Te,props:se,_owner:Pe}},De.createContext=function(E){return E={$$typeof:f,_currentValue:E,_currentValue2:E,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},E.Provider={$$typeof:c,_context:E},E.Consumer=E},De.createElement=ne,De.createFactory=function(E){var P=ne.bind(null,E);return P.type=E,P},De.createRef=function(){return{current:null}},De.forwardRef=function(E){return{$$typeof:p,render:E}},De.isValidElement=Q,De.lazy=function(E){return{$$typeof:_,_payload:{_status:-1,_result:E},_init:ye}},De.memo=function(E,P){return{$$typeof:g,type:E,compare:P===void 0?null:P}},De.startTransition=function(E){var P=te.transition;te.transition={};try{E()}finally{te.transition=P}},De.unstable_act=J,De.useCallback=function(E,P){return ee.current.useCallback(E,P)},De.useContext=function(E){return ee.current.useContext(E)},De.useDebugValue=function(){},De.useDeferredValue=function(E){return ee.current.useDeferredValue(E)},De.useEffect=function(E,P){return ee.current.useEffect(E,P)},De.useId=function(){return ee.current.useId()},De.useImperativeHandle=function(E,P,pe){return ee.current.useImperativeHandle(E,P,pe)},De.useInsertionEffect=function(E,P){return ee.current.useInsertionEffect(E,P)},De.useLayoutEffect=function(E,P){return ee.current.useLayoutEffect(E,P)},De.useMemo=function(E,P){return ee.current.useMemo(E,P)},De.useReducer=function(E,P,pe){return ee.current.useReducer(E,P,pe)},De.useRef=function(E){return ee.current.useRef(E)},De.useState=function(E){return ee.current.useState(E)},De.useSyncExternalStore=function(E,P,pe){return ee.current.useSyncExternalStore(E,P,pe)},De.useTransition=function(){return ee.current.useTransition()},De.version="18.3.1",De}var Ec;function Ra(){return Ec||(Ec=1,pa.exports=Np()),pa.exports}/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Oc;function Ep(){if(Oc)return ri;Oc=1;var n=Ra(),i=Symbol.for("react.element"),o=Symbol.for("react.fragment"),u=Object.prototype.hasOwnProperty,a=n.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,c={key:!0,ref:!0,__self:!0,__source:!0};function f(p,h,g){var _,C={},T=null,w=null;g!==void 0&&(T=""+g),h.key!==void 0&&(T=""+h.key),h.ref!==void 0&&(w=h.ref);for(_ in h)u.call(h,_)&&!c.hasOwnProperty(_)&&(C[_]=h[_]);if(p&&p.defaultProps)for(_ in h=p.defaultProps,h)C[_]===void 0&&(C[_]=h[_]);return{$$typeof:i,type:p,key:T,ref:w,props:C,_owner:a.current}}return ri.Fragment=o,ri.jsx=f,ri.jsxs=f,ri}var Pc;function Op(){return Pc||(Pc=1,fa.exports=Ep()),fa.exports}var l=Op(),fe=Ra();const si=Ia(fe);var go={},ha={exports:{}},bt={},ma={exports:{}},ga={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Ic;function Pp(){return Ic||(Ic=1,function(n){function i(te,H){var J=te.length;te.push(H);e:for(;0<J;){var E=J-1>>>1,P=te[E];if(0<a(P,H))te[E]=H,te[J]=P,J=E;else break e}}function o(te){return te.length===0?null:te[0]}function u(te){if(te.length===0)return null;var H=te[0],J=te.pop();if(J!==H){te[0]=J;e:for(var E=0,P=te.length,pe=P>>>1;E<pe;){var se=2*(E+1)-1,re=te[se],Te=se+1,Pe=te[Te];if(0>a(re,J))Te<P&&0>a(Pe,re)?(te[E]=Pe,te[Te]=J,E=Te):(te[E]=re,te[se]=J,E=se);else if(Te<P&&0>a(Pe,J))te[E]=Pe,te[Te]=J,E=Te;else break e}}return H}function a(te,H){var J=te.sortIndex-H.sortIndex;return J!==0?J:te.id-H.id}if(typeof performance=="object"&&typeof performance.now=="function"){var c=performance;n.unstable_now=function(){return c.now()}}else{var f=Date,p=f.now();n.unstable_now=function(){return f.now()-p}}var h=[],g=[],_=1,C=null,T=3,w=!1,k=!1,y=!1,x=typeof setTimeout=="function"?setTimeout:null,j=typeof clearTimeout=="function"?clearTimeout:null,O=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function R(te){for(var H=o(g);H!==null;){if(H.callback===null)u(g);else if(H.startTime<=te)u(g),H.sortIndex=H.expirationTime,i(h,H);else break;H=o(g)}}function z(te){if(y=!1,R(te),!k)if(o(h)!==null)k=!0,ye(M);else{var H=o(g);H!==null&&ee(z,H.startTime-te)}}function M(te,H){k=!1,y&&(y=!1,j(ne),ne=-1),w=!0;var J=T;try{for(R(H),C=o(h);C!==null&&(!(C.expirationTime>H)||te&&!ce());){var E=C.callback;if(typeof E=="function"){C.callback=null,T=C.priorityLevel;var P=E(C.expirationTime<=H);H=n.unstable_now(),typeof P=="function"?C.callback=P:C===o(h)&&u(h),R(H)}else u(h);C=o(h)}if(C!==null)var pe=!0;else{var se=o(g);se!==null&&ee(z,se.startTime-H),pe=!1}return pe}finally{C=null,T=J,w=!1}}var K=!1,Z=null,ne=-1,U=5,Q=-1;function ce(){return!(n.unstable_now()-Q<U)}function N(){if(Z!==null){var te=n.unstable_now();Q=te;var H=!0;try{H=Z(!0,te)}finally{H?L():(K=!1,Z=null)}}else K=!1}var L;if(typeof O=="function")L=function(){O(N)};else if(typeof MessageChannel<"u"){var b=new MessageChannel,G=b.port2;b.port1.onmessage=N,L=function(){G.postMessage(null)}}else L=function(){x(N,0)};function ye(te){Z=te,K||(K=!0,L())}function ee(te,H){ne=x(function(){te(n.unstable_now())},H)}n.unstable_IdlePriority=5,n.unstable_ImmediatePriority=1,n.unstable_LowPriority=4,n.unstable_NormalPriority=3,n.unstable_Profiling=null,n.unstable_UserBlockingPriority=2,n.unstable_cancelCallback=function(te){te.callback=null},n.unstable_continueExecution=function(){k||w||(k=!0,ye(M))},n.unstable_forceFrameRate=function(te){0>te||125<te?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):U=0<te?Math.floor(1e3/te):5},n.unstable_getCurrentPriorityLevel=function(){return T},n.unstable_getFirstCallbackNode=function(){return o(h)},n.unstable_next=function(te){switch(T){case 1:case 2:case 3:var H=3;break;default:H=T}var J=T;T=H;try{return te()}finally{T=J}},n.unstable_pauseExecution=function(){},n.unstable_requestPaint=function(){},n.unstable_runWithPriority=function(te,H){switch(te){case 1:case 2:case 3:case 4:case 5:break;default:te=3}var J=T;T=te;try{return H()}finally{T=J}},n.unstable_scheduleCallback=function(te,H,J){var E=n.unstable_now();switch(typeof J=="object"&&J!==null?(J=J.delay,J=typeof J=="number"&&0<J?E+J:E):J=E,te){case 1:var P=-1;break;case 2:P=250;break;case 5:P=1073741823;break;case 4:P=1e4;break;default:P=5e3}return P=J+P,te={id:_++,callback:H,priorityLevel:te,startTime:J,expirationTime:P,sortIndex:-1},J>E?(te.sortIndex=J,i(g,te),o(h)===null&&te===o(g)&&(y?(j(ne),ne=-1):y=!0,ee(z,J-E))):(te.sortIndex=P,i(h,te),k||w||(k=!0,ye(M))),te},n.unstable_shouldYield=ce,n.unstable_wrapCallback=function(te){var H=T;return function(){var J=T;T=H;try{return te.apply(this,arguments)}finally{T=J}}}}(ga)),ga}var Rc;function Ip(){return Rc||(Rc=1,ma.exports=Pp()),ma.exports}/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Dc;function Rp(){if(Dc)return bt;Dc=1;var n=Ra(),i=Ip();function o(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,r=1;r<arguments.length;r++)t+="&args[]="+encodeURIComponent(arguments[r]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var u=new Set,a={};function c(e,t){f(e,t),f(e+"Capture",t)}function f(e,t){for(a[e]=t,e=0;e<t.length;e++)u.add(t[e])}var p=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),h=Object.prototype.hasOwnProperty,g=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,_={},C={};function T(e){return h.call(C,e)?!0:h.call(_,e)?!1:g.test(e)?C[e]=!0:(_[e]=!0,!1)}function w(e,t,r,s){if(r!==null&&r.type===0)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return s?!1:r!==null?!r.acceptsBooleans:(e=e.toLowerCase().slice(0,5),e!=="data-"&&e!=="aria-");default:return!1}}function k(e,t,r,s){if(t===null||typeof t>"u"||w(e,t,r,s))return!0;if(s)return!1;if(r!==null)switch(r.type){case 3:return!t;case 4:return t===!1;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}function y(e,t,r,s,d,m,S){this.acceptsBooleans=t===2||t===3||t===4,this.attributeName=s,this.attributeNamespace=d,this.mustUseProperty=r,this.propertyName=e,this.type=t,this.sanitizeURL=m,this.removeEmptyString=S}var x={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(e){x[e]=new y(e,0,!1,e,null,!1,!1)}),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(e){var t=e[0];x[t]=new y(t,1,!1,e[1],null,!1,!1)}),["contentEditable","draggable","spellCheck","value"].forEach(function(e){x[e]=new y(e,2,!1,e.toLowerCase(),null,!1,!1)}),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(e){x[e]=new y(e,2,!1,e,null,!1,!1)}),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(e){x[e]=new y(e,3,!1,e.toLowerCase(),null,!1,!1)}),["checked","multiple","muted","selected"].forEach(function(e){x[e]=new y(e,3,!0,e,null,!1,!1)}),["capture","download"].forEach(function(e){x[e]=new y(e,4,!1,e,null,!1,!1)}),["cols","rows","size","span"].forEach(function(e){x[e]=new y(e,6,!1,e,null,!1,!1)}),["rowSpan","start"].forEach(function(e){x[e]=new y(e,5,!1,e.toLowerCase(),null,!1,!1)});var j=/[\-:]([a-z])/g;function O(e){return e[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(e){var t=e.replace(j,O);x[t]=new y(t,1,!1,e,null,!1,!1)}),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(e){var t=e.replace(j,O);x[t]=new y(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)}),["xml:base","xml:lang","xml:space"].forEach(function(e){var t=e.replace(j,O);x[t]=new y(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)}),["tabIndex","crossOrigin"].forEach(function(e){x[e]=new y(e,1,!1,e.toLowerCase(),null,!1,!1)}),x.xlinkHref=new y("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach(function(e){x[e]=new y(e,1,!1,e.toLowerCase(),null,!0,!0)});function R(e,t,r,s){var d=x.hasOwnProperty(t)?x[t]:null;(d!==null?d.type!==0:s||!(2<t.length)||t[0]!=="o"&&t[0]!=="O"||t[1]!=="n"&&t[1]!=="N")&&(k(t,r,d,s)&&(r=null),s||d===null?T(t)&&(r===null?e.removeAttribute(t):e.setAttribute(t,""+r)):d.mustUseProperty?e[d.propertyName]=r===null?d.type===3?!1:"":r:(t=d.attributeName,s=d.attributeNamespace,r===null?e.removeAttribute(t):(d=d.type,r=d===3||d===4&&r===!0?"":""+r,s?e.setAttributeNS(s,t,r):e.setAttribute(t,r))))}var z=n.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,M=Symbol.for("react.element"),K=Symbol.for("react.portal"),Z=Symbol.for("react.fragment"),ne=Symbol.for("react.strict_mode"),U=Symbol.for("react.profiler"),Q=Symbol.for("react.provider"),ce=Symbol.for("react.context"),N=Symbol.for("react.forward_ref"),L=Symbol.for("react.suspense"),b=Symbol.for("react.suspense_list"),G=Symbol.for("react.memo"),ye=Symbol.for("react.lazy"),ee=Symbol.for("react.offscreen"),te=Symbol.iterator;function H(e){return e===null||typeof e!="object"?null:(e=te&&e[te]||e["@@iterator"],typeof e=="function"?e:null)}var J=Object.assign,E;function P(e){if(E===void 0)try{throw Error()}catch(r){var t=r.stack.trim().match(/\n( *(at )?)/);E=t&&t[1]||""}return`
`+E+e}var pe=!1;function se(e,t){if(!e||pe)return"";pe=!0;var r=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(t,[])}catch(Y){var s=Y}Reflect.construct(e,[],t)}else{try{t.call()}catch(Y){s=Y}e.call(t.prototype)}else{try{throw Error()}catch(Y){s=Y}e()}}catch(Y){if(Y&&s&&typeof Y.stack=="string"){for(var d=Y.stack.split(`
`),m=s.stack.split(`
`),S=d.length-1,D=m.length-1;1<=S&&0<=D&&d[S]!==m[D];)D--;for(;1<=S&&0<=D;S--,D--)if(d[S]!==m[D]){if(S!==1||D!==1)do if(S--,D--,0>D||d[S]!==m[D]){var A=`
`+d[S].replace(" at new "," at ");return e.displayName&&A.includes("<anonymous>")&&(A=A.replace("<anonymous>",e.displayName)),A}while(1<=S&&0<=D);break}}}finally{pe=!1,Error.prepareStackTrace=r}return(e=e?e.displayName||e.name:"")?P(e):""}function re(e){switch(e.tag){case 5:return P(e.type);case 16:return P("Lazy");case 13:return P("Suspense");case 19:return P("SuspenseList");case 0:case 2:case 15:return e=se(e.type,!1),e;case 11:return e=se(e.type.render,!1),e;case 1:return e=se(e.type,!0),e;default:return""}}function Te(e){if(e==null)return null;if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e;switch(e){case Z:return"Fragment";case K:return"Portal";case U:return"Profiler";case ne:return"StrictMode";case L:return"Suspense";case b:return"SuspenseList"}if(typeof e=="object")switch(e.$$typeof){case ce:return(e.displayName||"Context")+".Consumer";case Q:return(e._context.displayName||"Context")+".Provider";case N:var t=e.render;return e=e.displayName,e||(e=t.displayName||t.name||"",e=e!==""?"ForwardRef("+e+")":"ForwardRef"),e;case G:return t=e.displayName||null,t!==null?t:Te(e.type)||"Memo";case ye:t=e._payload,e=e._init;try{return Te(e(t))}catch{}}return null}function Pe(e){var t=e.type;switch(e.tag){case 24:return"Cache";case 9:return(t.displayName||"Context")+".Consumer";case 10:return(t._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=t.render,e=e.displayName||e.name||"",t.displayName||(e!==""?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return t;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return Te(t);case 8:return t===ne?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t}return null}function be(e){switch(typeof e){case"boolean":case"number":case"string":case"undefined":return e;case"object":return e;default:return""}}function Ce(e){var t=e.type;return(e=e.nodeName)&&e.toLowerCase()==="input"&&(t==="checkbox"||t==="radio")}function Ae(e){var t=Ce(e)?"checked":"value",r=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),s=""+e[t];if(!e.hasOwnProperty(t)&&typeof r<"u"&&typeof r.get=="function"&&typeof r.set=="function"){var d=r.get,m=r.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return d.call(this)},set:function(S){s=""+S,m.call(this,S)}}),Object.defineProperty(e,t,{enumerable:r.enumerable}),{getValue:function(){return s},setValue:function(S){s=""+S},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}function Me(e){e._valueTracker||(e._valueTracker=Ae(e))}function xt(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var r=t.getValue(),s="";return e&&(s=Ce(e)?e.checked?"true":"false":e.value),e=s,e!==r?(t.setValue(e),!0):!1}function st(e){if(e=e||(typeof document<"u"?document:void 0),typeof e>"u")return null;try{return e.activeElement||e.body}catch{return e.body}}function v(e,t){var r=t.checked;return J({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:r??e._wrapperState.initialChecked})}function ie(e,t){var r=t.defaultValue==null?"":t.defaultValue,s=t.checked!=null?t.checked:t.defaultChecked;r=be(t.value!=null?t.value:r),e._wrapperState={initialChecked:s,initialValue:r,controlled:t.type==="checkbox"||t.type==="radio"?t.checked!=null:t.value!=null}}function X(e,t){t=t.checked,t!=null&&R(e,"checked",t,!1)}function $(e,t){X(e,t);var r=be(t.value),s=t.type;if(r!=null)s==="number"?(r===0&&e.value===""||e.value!=r)&&(e.value=""+r):e.value!==""+r&&(e.value=""+r);else if(s==="submit"||s==="reset"){e.removeAttribute("value");return}t.hasOwnProperty("value")?B(e,t.type,r):t.hasOwnProperty("defaultValue")&&B(e,t.type,be(t.defaultValue)),t.checked==null&&t.defaultChecked!=null&&(e.defaultChecked=!!t.defaultChecked)}function I(e,t,r){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var s=t.type;if(!(s!=="submit"&&s!=="reset"||t.value!==void 0&&t.value!==null))return;t=""+e._wrapperState.initialValue,r||t===e.value||(e.value=t),e.defaultValue=t}r=e.name,r!==""&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,r!==""&&(e.name=r)}function B(e,t,r){(t!=="number"||st(e.ownerDocument)!==e)&&(r==null?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+r&&(e.defaultValue=""+r))}var oe=Array.isArray;function ae(e,t,r,s){if(e=e.options,t){t={};for(var d=0;d<r.length;d++)t["$"+r[d]]=!0;for(r=0;r<e.length;r++)d=t.hasOwnProperty("$"+e[r].value),e[r].selected!==d&&(e[r].selected=d),d&&s&&(e[r].defaultSelected=!0)}else{for(r=""+be(r),t=null,d=0;d<e.length;d++){if(e[d].value===r){e[d].selected=!0,s&&(e[d].defaultSelected=!0);return}t!==null||e[d].disabled||(t=e[d])}t!==null&&(t.selected=!0)}}function V(e,t){if(t.dangerouslySetInnerHTML!=null)throw Error(o(91));return J({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function he(e,t){var r=t.value;if(r==null){if(r=t.children,t=t.defaultValue,r!=null){if(t!=null)throw Error(o(92));if(oe(r)){if(1<r.length)throw Error(o(93));r=r[0]}t=r}t==null&&(t=""),r=t}e._wrapperState={initialValue:be(r)}}function _e(e,t){var r=be(t.value),s=be(t.defaultValue);r!=null&&(r=""+r,r!==e.value&&(e.value=r),t.defaultValue==null&&e.defaultValue!==r&&(e.defaultValue=r)),s!=null&&(e.defaultValue=""+s)}function ge(e){var t=e.textContent;t===e._wrapperState.initialValue&&t!==""&&t!==null&&(e.value=t)}function je(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function ze(e,t){return e==null||e==="http://www.w3.org/1999/xhtml"?je(t):e==="http://www.w3.org/2000/svg"&&t==="foreignObject"?"http://www.w3.org/1999/xhtml":e}var Re,ft=function(e){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(t,r,s,d){MSApp.execUnsafeLocalFunction(function(){return e(t,r,s,d)})}:e}(function(e,t){if(e.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in e)e.innerHTML=t;else{for(Re=Re||document.createElement("div"),Re.innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=Re.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}});function zt(e,t){if(t){var r=e.firstChild;if(r&&r===e.lastChild&&r.nodeType===3){r.nodeValue=t;return}}e.textContent=t}var at={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},Nn=["Webkit","ms","Moz","O"];Object.keys(at).forEach(function(e){Nn.forEach(function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),at[t]=at[e]})});function We(e,t,r){return t==null||typeof t=="boolean"||t===""?"":r||typeof t!="number"||t===0||at.hasOwnProperty(e)&&at[e]?(""+t).trim():t+"px"}function En(e,t){e=e.style;for(var r in t)if(t.hasOwnProperty(r)){var s=r.indexOf("--")===0,d=We(r,t[r],s);r==="float"&&(r="cssFloat"),s?e.setProperty(r,d):e[r]=d}}var yr=J({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function St(e,t){if(t){if(yr[e]&&(t.children!=null||t.dangerouslySetInnerHTML!=null))throw Error(o(137,e));if(t.dangerouslySetInnerHTML!=null){if(t.children!=null)throw Error(o(60));if(typeof t.dangerouslySetInnerHTML!="object"||!("__html"in t.dangerouslySetInnerHTML))throw Error(o(61))}if(t.style!=null&&typeof t.style!="object")throw Error(o(62))}}function qn(e,t){if(e.indexOf("-")===-1)return typeof t.is=="string";switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var vr=null;function _r(e){return e=e.target||e.srcElement||window,e.correspondingUseElement&&(e=e.correspondingUseElement),e.nodeType===3?e.parentNode:e}var wr=null,Xt=null,Nt=null;function On(e){if(e=Br(e)){if(typeof wr!="function")throw Error(o(280));var t=e.stateNode;t&&(t=Oi(t),wr(e.stateNode,e.type,t))}}function Va(e){Xt?Nt?Nt.push(e):Nt=[e]:Xt=e}function Ga(){if(Xt){var e=Xt,t=Nt;if(Nt=Xt=null,On(e),t)for(e=0;e<t.length;e++)On(t[e])}}function Ya(e,t){return e(t)}function Za(){}var Eo=!1;function Qa(e,t,r){if(Eo)return e(t,r);Eo=!0;try{return Ya(e,t,r)}finally{Eo=!1,(Xt!==null||Nt!==null)&&(Za(),Ga())}}function br(e,t){var r=e.stateNode;if(r===null)return null;var s=Oi(r);if(s===null)return null;r=s[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(s=!s.disabled)||(e=e.type,s=!(e==="button"||e==="input"||e==="select"||e==="textarea")),e=!s;break e;default:e=!1}if(e)return null;if(r&&typeof r!="function")throw Error(o(231,t,typeof r));return r}var Oo=!1;if(p)try{var xr={};Object.defineProperty(xr,"passive",{get:function(){Oo=!0}}),window.addEventListener("test",xr,xr),window.removeEventListener("test",xr,xr)}catch{Oo=!1}function Rd(e,t,r,s,d,m,S,D,A){var Y=Array.prototype.slice.call(arguments,3);try{t.apply(r,Y)}catch(ue){this.onError(ue)}}var Sr=!1,li=null,ui=!1,Po=null,Dd={onError:function(e){Sr=!0,li=e}};function $d(e,t,r,s,d,m,S,D,A){Sr=!1,li=null,Rd.apply(Dd,arguments)}function Ad(e,t,r,s,d,m,S,D,A){if($d.apply(this,arguments),Sr){if(Sr){var Y=li;Sr=!1,li=null}else throw Error(o(198));ui||(ui=!0,Po=Y)}}function Pn(e){var t=e,r=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do t=e,(t.flags&4098)!==0&&(r=t.return),e=t.return;while(e)}return t.tag===3?r:null}function Ka(e){if(e.tag===13){var t=e.memoizedState;if(t===null&&(e=e.alternate,e!==null&&(t=e.memoizedState)),t!==null)return t.dehydrated}return null}function Xa(e){if(Pn(e)!==e)throw Error(o(188))}function Ld(e){var t=e.alternate;if(!t){if(t=Pn(e),t===null)throw Error(o(188));return t!==e?null:e}for(var r=e,s=t;;){var d=r.return;if(d===null)break;var m=d.alternate;if(m===null){if(s=d.return,s!==null){r=s;continue}break}if(d.child===m.child){for(m=d.child;m;){if(m===r)return Xa(d),e;if(m===s)return Xa(d),t;m=m.sibling}throw Error(o(188))}if(r.return!==s.return)r=d,s=m;else{for(var S=!1,D=d.child;D;){if(D===r){S=!0,r=d,s=m;break}if(D===s){S=!0,s=d,r=m;break}D=D.sibling}if(!S){for(D=m.child;D;){if(D===r){S=!0,r=m,s=d;break}if(D===s){S=!0,s=m,r=d;break}D=D.sibling}if(!S)throw Error(o(189))}}if(r.alternate!==s)throw Error(o(190))}if(r.tag!==3)throw Error(o(188));return r.stateNode.current===r?e:t}function Ja(e){return e=Ld(e),e!==null?el(e):null}function el(e){if(e.tag===5||e.tag===6)return e;for(e=e.child;e!==null;){var t=el(e);if(t!==null)return t;e=e.sibling}return null}var tl=i.unstable_scheduleCallback,nl=i.unstable_cancelCallback,zd=i.unstable_shouldYield,Fd=i.unstable_requestPaint,Ze=i.unstable_now,Md=i.unstable_getCurrentPriorityLevel,Io=i.unstable_ImmediatePriority,rl=i.unstable_UserBlockingPriority,ci=i.unstable_NormalPriority,Ud=i.unstable_LowPriority,il=i.unstable_IdlePriority,di=null,Gt=null;function Bd(e){if(Gt&&typeof Gt.onCommitFiberRoot=="function")try{Gt.onCommitFiberRoot(di,e,void 0,(e.current.flags&128)===128)}catch{}}var Ft=Math.clz32?Math.clz32:qd,Hd=Math.log,Wd=Math.LN2;function qd(e){return e>>>=0,e===0?32:31-(Hd(e)/Wd|0)|0}var fi=64,pi=4194304;function kr(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return e&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function hi(e,t){var r=e.pendingLanes;if(r===0)return 0;var s=0,d=e.suspendedLanes,m=e.pingedLanes,S=r&268435455;if(S!==0){var D=S&~d;D!==0?s=kr(D):(m&=S,m!==0&&(s=kr(m)))}else S=r&~d,S!==0?s=kr(S):m!==0&&(s=kr(m));if(s===0)return 0;if(t!==0&&t!==s&&(t&d)===0&&(d=s&-s,m=t&-t,d>=m||d===16&&(m&4194240)!==0))return t;if((s&4)!==0&&(s|=r&16),t=e.entangledLanes,t!==0)for(e=e.entanglements,t&=s;0<t;)r=31-Ft(t),d=1<<r,s|=e[r],t&=~d;return s}function Vd(e,t){switch(e){case 1:case 2:case 4:return t+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Gd(e,t){for(var r=e.suspendedLanes,s=e.pingedLanes,d=e.expirationTimes,m=e.pendingLanes;0<m;){var S=31-Ft(m),D=1<<S,A=d[S];A===-1?((D&r)===0||(D&s)!==0)&&(d[S]=Vd(D,t)):A<=t&&(e.expiredLanes|=D),m&=~D}}function Ro(e){return e=e.pendingLanes&-1073741825,e!==0?e:e&1073741824?1073741824:0}function ol(){var e=fi;return fi<<=1,(fi&4194240)===0&&(fi=64),e}function Do(e){for(var t=[],r=0;31>r;r++)t.push(e);return t}function Cr(e,t,r){e.pendingLanes|=t,t!==536870912&&(e.suspendedLanes=0,e.pingedLanes=0),e=e.eventTimes,t=31-Ft(t),e[t]=r}function Yd(e,t){var r=e.pendingLanes&~t;e.pendingLanes=t,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=t,e.mutableReadLanes&=t,e.entangledLanes&=t,t=e.entanglements;var s=e.eventTimes;for(e=e.expirationTimes;0<r;){var d=31-Ft(r),m=1<<d;t[d]=0,s[d]=-1,e[d]=-1,r&=~m}}function $o(e,t){var r=e.entangledLanes|=t;for(e=e.entanglements;r;){var s=31-Ft(r),d=1<<s;d&t|e[s]&t&&(e[s]|=t),r&=~d}}var Fe=0;function sl(e){return e&=-e,1<e?4<e?(e&268435455)!==0?16:536870912:4:1}var al,Ao,ll,ul,cl,Lo=!1,mi=[],ln=null,un=null,cn=null,jr=new Map,Tr=new Map,dn=[],Zd="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function dl(e,t){switch(e){case"focusin":case"focusout":ln=null;break;case"dragenter":case"dragleave":un=null;break;case"mouseover":case"mouseout":cn=null;break;case"pointerover":case"pointerout":jr.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":Tr.delete(t.pointerId)}}function Nr(e,t,r,s,d,m){return e===null||e.nativeEvent!==m?(e={blockedOn:t,domEventName:r,eventSystemFlags:s,nativeEvent:m,targetContainers:[d]},t!==null&&(t=Br(t),t!==null&&Ao(t)),e):(e.eventSystemFlags|=s,t=e.targetContainers,d!==null&&t.indexOf(d)===-1&&t.push(d),e)}function Qd(e,t,r,s,d){switch(t){case"focusin":return ln=Nr(ln,e,t,r,s,d),!0;case"dragenter":return un=Nr(un,e,t,r,s,d),!0;case"mouseover":return cn=Nr(cn,e,t,r,s,d),!0;case"pointerover":var m=d.pointerId;return jr.set(m,Nr(jr.get(m)||null,e,t,r,s,d)),!0;case"gotpointercapture":return m=d.pointerId,Tr.set(m,Nr(Tr.get(m)||null,e,t,r,s,d)),!0}return!1}function fl(e){var t=In(e.target);if(t!==null){var r=Pn(t);if(r!==null){if(t=r.tag,t===13){if(t=Ka(r),t!==null){e.blockedOn=t,cl(e.priority,function(){ll(r)});return}}else if(t===3&&r.stateNode.current.memoizedState.isDehydrated){e.blockedOn=r.tag===3?r.stateNode.containerInfo:null;return}}}e.blockedOn=null}function gi(e){if(e.blockedOn!==null)return!1;for(var t=e.targetContainers;0<t.length;){var r=Fo(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(r===null){r=e.nativeEvent;var s=new r.constructor(r.type,r);vr=s,r.target.dispatchEvent(s),vr=null}else return t=Br(r),t!==null&&Ao(t),e.blockedOn=r,!1;t.shift()}return!0}function pl(e,t,r){gi(e)&&r.delete(t)}function Kd(){Lo=!1,ln!==null&&gi(ln)&&(ln=null),un!==null&&gi(un)&&(un=null),cn!==null&&gi(cn)&&(cn=null),jr.forEach(pl),Tr.forEach(pl)}function Er(e,t){e.blockedOn===t&&(e.blockedOn=null,Lo||(Lo=!0,i.unstable_scheduleCallback(i.unstable_NormalPriority,Kd)))}function Or(e){function t(d){return Er(d,e)}if(0<mi.length){Er(mi[0],e);for(var r=1;r<mi.length;r++){var s=mi[r];s.blockedOn===e&&(s.blockedOn=null)}}for(ln!==null&&Er(ln,e),un!==null&&Er(un,e),cn!==null&&Er(cn,e),jr.forEach(t),Tr.forEach(t),r=0;r<dn.length;r++)s=dn[r],s.blockedOn===e&&(s.blockedOn=null);for(;0<dn.length&&(r=dn[0],r.blockedOn===null);)fl(r),r.blockedOn===null&&dn.shift()}var Vn=z.ReactCurrentBatchConfig,yi=!0;function Xd(e,t,r,s){var d=Fe,m=Vn.transition;Vn.transition=null;try{Fe=1,zo(e,t,r,s)}finally{Fe=d,Vn.transition=m}}function Jd(e,t,r,s){var d=Fe,m=Vn.transition;Vn.transition=null;try{Fe=4,zo(e,t,r,s)}finally{Fe=d,Vn.transition=m}}function zo(e,t,r,s){if(yi){var d=Fo(e,t,r,s);if(d===null)ns(e,t,s,vi,r),dl(e,s);else if(Qd(d,e,t,r,s))s.stopPropagation();else if(dl(e,s),t&4&&-1<Zd.indexOf(e)){for(;d!==null;){var m=Br(d);if(m!==null&&al(m),m=Fo(e,t,r,s),m===null&&ns(e,t,s,vi,r),m===d)break;d=m}d!==null&&s.stopPropagation()}else ns(e,t,s,null,r)}}var vi=null;function Fo(e,t,r,s){if(vi=null,e=_r(s),e=In(e),e!==null)if(t=Pn(e),t===null)e=null;else if(r=t.tag,r===13){if(e=Ka(t),e!==null)return e;e=null}else if(r===3){if(t.stateNode.current.memoizedState.isDehydrated)return t.tag===3?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null);return vi=e,null}function hl(e){switch(e){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(Md()){case Io:return 1;case rl:return 4;case ci:case Ud:return 16;case il:return 536870912;default:return 16}default:return 16}}var fn=null,Mo=null,_i=null;function ml(){if(_i)return _i;var e,t=Mo,r=t.length,s,d="value"in fn?fn.value:fn.textContent,m=d.length;for(e=0;e<r&&t[e]===d[e];e++);var S=r-e;for(s=1;s<=S&&t[r-s]===d[m-s];s++);return _i=d.slice(e,1<s?1-s:void 0)}function wi(e){var t=e.keyCode;return"charCode"in e?(e=e.charCode,e===0&&t===13&&(e=13)):e=t,e===10&&(e=13),32<=e||e===13?e:0}function bi(){return!0}function gl(){return!1}function kt(e){function t(r,s,d,m,S){this._reactName=r,this._targetInst=d,this.type=s,this.nativeEvent=m,this.target=S,this.currentTarget=null;for(var D in e)e.hasOwnProperty(D)&&(r=e[D],this[D]=r?r(m):m[D]);return this.isDefaultPrevented=(m.defaultPrevented!=null?m.defaultPrevented:m.returnValue===!1)?bi:gl,this.isPropagationStopped=gl,this}return J(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var r=this.nativeEvent;r&&(r.preventDefault?r.preventDefault():typeof r.returnValue!="unknown"&&(r.returnValue=!1),this.isDefaultPrevented=bi)},stopPropagation:function(){var r=this.nativeEvent;r&&(r.stopPropagation?r.stopPropagation():typeof r.cancelBubble!="unknown"&&(r.cancelBubble=!0),this.isPropagationStopped=bi)},persist:function(){},isPersistent:bi}),t}var Gn={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Uo=kt(Gn),Pr=J({},Gn,{view:0,detail:0}),ef=kt(Pr),Bo,Ho,Ir,xi=J({},Pr,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:qo,button:0,buttons:0,relatedTarget:function(e){return e.relatedTarget===void 0?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==Ir&&(Ir&&e.type==="mousemove"?(Bo=e.screenX-Ir.screenX,Ho=e.screenY-Ir.screenY):Ho=Bo=0,Ir=e),Bo)},movementY:function(e){return"movementY"in e?e.movementY:Ho}}),yl=kt(xi),tf=J({},xi,{dataTransfer:0}),nf=kt(tf),rf=J({},Pr,{relatedTarget:0}),Wo=kt(rf),of=J({},Gn,{animationName:0,elapsedTime:0,pseudoElement:0}),sf=kt(of),af=J({},Gn,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),lf=kt(af),uf=J({},Gn,{data:0}),vl=kt(uf),cf={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},df={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},ff={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function pf(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):(e=ff[e])?!!t[e]:!1}function qo(){return pf}var hf=J({},Pr,{key:function(e){if(e.key){var t=cf[e.key]||e.key;if(t!=="Unidentified")return t}return e.type==="keypress"?(e=wi(e),e===13?"Enter":String.fromCharCode(e)):e.type==="keydown"||e.type==="keyup"?df[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:qo,charCode:function(e){return e.type==="keypress"?wi(e):0},keyCode:function(e){return e.type==="keydown"||e.type==="keyup"?e.keyCode:0},which:function(e){return e.type==="keypress"?wi(e):e.type==="keydown"||e.type==="keyup"?e.keyCode:0}}),mf=kt(hf),gf=J({},xi,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),_l=kt(gf),yf=J({},Pr,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:qo}),vf=kt(yf),_f=J({},Gn,{propertyName:0,elapsedTime:0,pseudoElement:0}),wf=kt(_f),bf=J({},xi,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),xf=kt(bf),Sf=[9,13,27,32],Vo=p&&"CompositionEvent"in window,Rr=null;p&&"documentMode"in document&&(Rr=document.documentMode);var kf=p&&"TextEvent"in window&&!Rr,wl=p&&(!Vo||Rr&&8<Rr&&11>=Rr),bl=" ",xl=!1;function Sl(e,t){switch(e){case"keyup":return Sf.indexOf(t.keyCode)!==-1;case"keydown":return t.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function kl(e){return e=e.detail,typeof e=="object"&&"data"in e?e.data:null}var Yn=!1;function Cf(e,t){switch(e){case"compositionend":return kl(t);case"keypress":return t.which!==32?null:(xl=!0,bl);case"textInput":return e=t.data,e===bl&&xl?null:e;default:return null}}function jf(e,t){if(Yn)return e==="compositionend"||!Vo&&Sl(e,t)?(e=ml(),_i=Mo=fn=null,Yn=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return wl&&t.locale!=="ko"?null:t.data;default:return null}}var Tf={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Cl(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t==="input"?!!Tf[e.type]:t==="textarea"}function jl(e,t,r,s){Va(s),t=Ti(t,"onChange"),0<t.length&&(r=new Uo("onChange","change",null,r,s),e.push({event:r,listeners:t}))}var Dr=null,$r=null;function Nf(e){Wl(e,0)}function Si(e){var t=Jn(e);if(xt(t))return e}function Ef(e,t){if(e==="change")return t}var Tl=!1;if(p){var Go;if(p){var Yo="oninput"in document;if(!Yo){var Nl=document.createElement("div");Nl.setAttribute("oninput","return;"),Yo=typeof Nl.oninput=="function"}Go=Yo}else Go=!1;Tl=Go&&(!document.documentMode||9<document.documentMode)}function El(){Dr&&(Dr.detachEvent("onpropertychange",Ol),$r=Dr=null)}function Ol(e){if(e.propertyName==="value"&&Si($r)){var t=[];jl(t,$r,e,_r(e)),Qa(Nf,t)}}function Of(e,t,r){e==="focusin"?(El(),Dr=t,$r=r,Dr.attachEvent("onpropertychange",Ol)):e==="focusout"&&El()}function Pf(e){if(e==="selectionchange"||e==="keyup"||e==="keydown")return Si($r)}function If(e,t){if(e==="click")return Si(t)}function Rf(e,t){if(e==="input"||e==="change")return Si(t)}function Df(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var Mt=typeof Object.is=="function"?Object.is:Df;function Ar(e,t){if(Mt(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;var r=Object.keys(e),s=Object.keys(t);if(r.length!==s.length)return!1;for(s=0;s<r.length;s++){var d=r[s];if(!h.call(t,d)||!Mt(e[d],t[d]))return!1}return!0}function Pl(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function Il(e,t){var r=Pl(e);e=0;for(var s;r;){if(r.nodeType===3){if(s=e+r.textContent.length,e<=t&&s>=t)return{node:r,offset:t-e};e=s}e:{for(;r;){if(r.nextSibling){r=r.nextSibling;break e}r=r.parentNode}r=void 0}r=Pl(r)}}function Rl(e,t){return e&&t?e===t?!0:e&&e.nodeType===3?!1:t&&t.nodeType===3?Rl(e,t.parentNode):"contains"in e?e.contains(t):e.compareDocumentPosition?!!(e.compareDocumentPosition(t)&16):!1:!1}function Dl(){for(var e=window,t=st();t instanceof e.HTMLIFrameElement;){try{var r=typeof t.contentWindow.location.href=="string"}catch{r=!1}if(r)e=t.contentWindow;else break;t=st(e.document)}return t}function Zo(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&(t==="input"&&(e.type==="text"||e.type==="search"||e.type==="tel"||e.type==="url"||e.type==="password")||t==="textarea"||e.contentEditable==="true")}function $f(e){var t=Dl(),r=e.focusedElem,s=e.selectionRange;if(t!==r&&r&&r.ownerDocument&&Rl(r.ownerDocument.documentElement,r)){if(s!==null&&Zo(r)){if(t=s.start,e=s.end,e===void 0&&(e=t),"selectionStart"in r)r.selectionStart=t,r.selectionEnd=Math.min(e,r.value.length);else if(e=(t=r.ownerDocument||document)&&t.defaultView||window,e.getSelection){e=e.getSelection();var d=r.textContent.length,m=Math.min(s.start,d);s=s.end===void 0?m:Math.min(s.end,d),!e.extend&&m>s&&(d=s,s=m,m=d),d=Il(r,m);var S=Il(r,s);d&&S&&(e.rangeCount!==1||e.anchorNode!==d.node||e.anchorOffset!==d.offset||e.focusNode!==S.node||e.focusOffset!==S.offset)&&(t=t.createRange(),t.setStart(d.node,d.offset),e.removeAllRanges(),m>s?(e.addRange(t),e.extend(S.node,S.offset)):(t.setEnd(S.node,S.offset),e.addRange(t)))}}for(t=[],e=r;e=e.parentNode;)e.nodeType===1&&t.push({element:e,left:e.scrollLeft,top:e.scrollTop});for(typeof r.focus=="function"&&r.focus(),r=0;r<t.length;r++)e=t[r],e.element.scrollLeft=e.left,e.element.scrollTop=e.top}}var Af=p&&"documentMode"in document&&11>=document.documentMode,Zn=null,Qo=null,Lr=null,Ko=!1;function $l(e,t,r){var s=r.window===r?r.document:r.nodeType===9?r:r.ownerDocument;Ko||Zn==null||Zn!==st(s)||(s=Zn,"selectionStart"in s&&Zo(s)?s={start:s.selectionStart,end:s.selectionEnd}:(s=(s.ownerDocument&&s.ownerDocument.defaultView||window).getSelection(),s={anchorNode:s.anchorNode,anchorOffset:s.anchorOffset,focusNode:s.focusNode,focusOffset:s.focusOffset}),Lr&&Ar(Lr,s)||(Lr=s,s=Ti(Qo,"onSelect"),0<s.length&&(t=new Uo("onSelect","select",null,t,r),e.push({event:t,listeners:s}),t.target=Zn)))}function ki(e,t){var r={};return r[e.toLowerCase()]=t.toLowerCase(),r["Webkit"+e]="webkit"+t,r["Moz"+e]="moz"+t,r}var Qn={animationend:ki("Animation","AnimationEnd"),animationiteration:ki("Animation","AnimationIteration"),animationstart:ki("Animation","AnimationStart"),transitionend:ki("Transition","TransitionEnd")},Xo={},Al={};p&&(Al=document.createElement("div").style,"AnimationEvent"in window||(delete Qn.animationend.animation,delete Qn.animationiteration.animation,delete Qn.animationstart.animation),"TransitionEvent"in window||delete Qn.transitionend.transition);function Ci(e){if(Xo[e])return Xo[e];if(!Qn[e])return e;var t=Qn[e],r;for(r in t)if(t.hasOwnProperty(r)&&r in Al)return Xo[e]=t[r];return e}var Ll=Ci("animationend"),zl=Ci("animationiteration"),Fl=Ci("animationstart"),Ml=Ci("transitionend"),Ul=new Map,Bl="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function pn(e,t){Ul.set(e,t),c(t,[e])}for(var Jo=0;Jo<Bl.length;Jo++){var es=Bl[Jo],Lf=es.toLowerCase(),zf=es[0].toUpperCase()+es.slice(1);pn(Lf,"on"+zf)}pn(Ll,"onAnimationEnd"),pn(zl,"onAnimationIteration"),pn(Fl,"onAnimationStart"),pn("dblclick","onDoubleClick"),pn("focusin","onFocus"),pn("focusout","onBlur"),pn(Ml,"onTransitionEnd"),f("onMouseEnter",["mouseout","mouseover"]),f("onMouseLeave",["mouseout","mouseover"]),f("onPointerEnter",["pointerout","pointerover"]),f("onPointerLeave",["pointerout","pointerover"]),c("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),c("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),c("onBeforeInput",["compositionend","keypress","textInput","paste"]),c("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),c("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),c("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var zr="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Ff=new Set("cancel close invalid load scroll toggle".split(" ").concat(zr));function Hl(e,t,r){var s=e.type||"unknown-event";e.currentTarget=r,Ad(s,t,void 0,e),e.currentTarget=null}function Wl(e,t){t=(t&4)!==0;for(var r=0;r<e.length;r++){var s=e[r],d=s.event;s=s.listeners;e:{var m=void 0;if(t)for(var S=s.length-1;0<=S;S--){var D=s[S],A=D.instance,Y=D.currentTarget;if(D=D.listener,A!==m&&d.isPropagationStopped())break e;Hl(d,D,Y),m=A}else for(S=0;S<s.length;S++){if(D=s[S],A=D.instance,Y=D.currentTarget,D=D.listener,A!==m&&d.isPropagationStopped())break e;Hl(d,D,Y),m=A}}}if(ui)throw e=Po,ui=!1,Po=null,e}function Be(e,t){var r=t[ls];r===void 0&&(r=t[ls]=new Set);var s=e+"__bubble";r.has(s)||(ql(t,e,2,!1),r.add(s))}function ts(e,t,r){var s=0;t&&(s|=4),ql(r,e,s,t)}var ji="_reactListening"+Math.random().toString(36).slice(2);function Fr(e){if(!e[ji]){e[ji]=!0,u.forEach(function(r){r!=="selectionchange"&&(Ff.has(r)||ts(r,!1,e),ts(r,!0,e))});var t=e.nodeType===9?e:e.ownerDocument;t===null||t[ji]||(t[ji]=!0,ts("selectionchange",!1,t))}}function ql(e,t,r,s){switch(hl(t)){case 1:var d=Xd;break;case 4:d=Jd;break;default:d=zo}r=d.bind(null,t,r,e),d=void 0,!Oo||t!=="touchstart"&&t!=="touchmove"&&t!=="wheel"||(d=!0),s?d!==void 0?e.addEventListener(t,r,{capture:!0,passive:d}):e.addEventListener(t,r,!0):d!==void 0?e.addEventListener(t,r,{passive:d}):e.addEventListener(t,r,!1)}function ns(e,t,r,s,d){var m=s;if((t&1)===0&&(t&2)===0&&s!==null)e:for(;;){if(s===null)return;var S=s.tag;if(S===3||S===4){var D=s.stateNode.containerInfo;if(D===d||D.nodeType===8&&D.parentNode===d)break;if(S===4)for(S=s.return;S!==null;){var A=S.tag;if((A===3||A===4)&&(A=S.stateNode.containerInfo,A===d||A.nodeType===8&&A.parentNode===d))return;S=S.return}for(;D!==null;){if(S=In(D),S===null)return;if(A=S.tag,A===5||A===6){s=m=S;continue e}D=D.parentNode}}s=s.return}Qa(function(){var Y=m,ue=_r(r),de=[];e:{var le=Ul.get(e);if(le!==void 0){var ve=Uo,xe=e;switch(e){case"keypress":if(wi(r)===0)break e;case"keydown":case"keyup":ve=mf;break;case"focusin":xe="focus",ve=Wo;break;case"focusout":xe="blur",ve=Wo;break;case"beforeblur":case"afterblur":ve=Wo;break;case"click":if(r.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":ve=yl;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":ve=nf;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":ve=vf;break;case Ll:case zl:case Fl:ve=sf;break;case Ml:ve=wf;break;case"scroll":ve=ef;break;case"wheel":ve=xf;break;case"copy":case"cut":case"paste":ve=lf;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":ve=_l}var Se=(t&4)!==0,Qe=!Se&&e==="scroll",W=Se?le!==null?le+"Capture":null:le;Se=[];for(var F=Y,q;F!==null;){q=F;var me=q.stateNode;if(q.tag===5&&me!==null&&(q=me,W!==null&&(me=br(F,W),me!=null&&Se.push(Mr(F,me,q)))),Qe)break;F=F.return}0<Se.length&&(le=new ve(le,xe,null,r,ue),de.push({event:le,listeners:Se}))}}if((t&7)===0){e:{if(le=e==="mouseover"||e==="pointerover",ve=e==="mouseout"||e==="pointerout",le&&r!==vr&&(xe=r.relatedTarget||r.fromElement)&&(In(xe)||xe[Jt]))break e;if((ve||le)&&(le=ue.window===ue?ue:(le=ue.ownerDocument)?le.defaultView||le.parentWindow:window,ve?(xe=r.relatedTarget||r.toElement,ve=Y,xe=xe?In(xe):null,xe!==null&&(Qe=Pn(xe),xe!==Qe||xe.tag!==5&&xe.tag!==6)&&(xe=null)):(ve=null,xe=Y),ve!==xe)){if(Se=yl,me="onMouseLeave",W="onMouseEnter",F="mouse",(e==="pointerout"||e==="pointerover")&&(Se=_l,me="onPointerLeave",W="onPointerEnter",F="pointer"),Qe=ve==null?le:Jn(ve),q=xe==null?le:Jn(xe),le=new Se(me,F+"leave",ve,r,ue),le.target=Qe,le.relatedTarget=q,me=null,In(ue)===Y&&(Se=new Se(W,F+"enter",xe,r,ue),Se.target=q,Se.relatedTarget=Qe,me=Se),Qe=me,ve&&xe)t:{for(Se=ve,W=xe,F=0,q=Se;q;q=Kn(q))F++;for(q=0,me=W;me;me=Kn(me))q++;for(;0<F-q;)Se=Kn(Se),F--;for(;0<q-F;)W=Kn(W),q--;for(;F--;){if(Se===W||W!==null&&Se===W.alternate)break t;Se=Kn(Se),W=Kn(W)}Se=null}else Se=null;ve!==null&&Vl(de,le,ve,Se,!1),xe!==null&&Qe!==null&&Vl(de,Qe,xe,Se,!0)}}e:{if(le=Y?Jn(Y):window,ve=le.nodeName&&le.nodeName.toLowerCase(),ve==="select"||ve==="input"&&le.type==="file")var ke=Ef;else if(Cl(le))if(Tl)ke=Rf;else{ke=Pf;var Ne=Of}else(ve=le.nodeName)&&ve.toLowerCase()==="input"&&(le.type==="checkbox"||le.type==="radio")&&(ke=If);if(ke&&(ke=ke(e,Y))){jl(de,ke,r,ue);break e}Ne&&Ne(e,le,Y),e==="focusout"&&(Ne=le._wrapperState)&&Ne.controlled&&le.type==="number"&&B(le,"number",le.value)}switch(Ne=Y?Jn(Y):window,e){case"focusin":(Cl(Ne)||Ne.contentEditable==="true")&&(Zn=Ne,Qo=Y,Lr=null);break;case"focusout":Lr=Qo=Zn=null;break;case"mousedown":Ko=!0;break;case"contextmenu":case"mouseup":case"dragend":Ko=!1,$l(de,r,ue);break;case"selectionchange":if(Af)break;case"keydown":case"keyup":$l(de,r,ue)}var Ee;if(Vo)e:{switch(e){case"compositionstart":var Oe="onCompositionStart";break e;case"compositionend":Oe="onCompositionEnd";break e;case"compositionupdate":Oe="onCompositionUpdate";break e}Oe=void 0}else Yn?Sl(e,r)&&(Oe="onCompositionEnd"):e==="keydown"&&r.keyCode===229&&(Oe="onCompositionStart");Oe&&(wl&&r.locale!=="ko"&&(Yn||Oe!=="onCompositionStart"?Oe==="onCompositionEnd"&&Yn&&(Ee=ml()):(fn=ue,Mo="value"in fn?fn.value:fn.textContent,Yn=!0)),Ne=Ti(Y,Oe),0<Ne.length&&(Oe=new vl(Oe,e,null,r,ue),de.push({event:Oe,listeners:Ne}),Ee?Oe.data=Ee:(Ee=kl(r),Ee!==null&&(Oe.data=Ee)))),(Ee=kf?Cf(e,r):jf(e,r))&&(Y=Ti(Y,"onBeforeInput"),0<Y.length&&(ue=new vl("onBeforeInput","beforeinput",null,r,ue),de.push({event:ue,listeners:Y}),ue.data=Ee))}Wl(de,t)})}function Mr(e,t,r){return{instance:e,listener:t,currentTarget:r}}function Ti(e,t){for(var r=t+"Capture",s=[];e!==null;){var d=e,m=d.stateNode;d.tag===5&&m!==null&&(d=m,m=br(e,r),m!=null&&s.unshift(Mr(e,m,d)),m=br(e,t),m!=null&&s.push(Mr(e,m,d))),e=e.return}return s}function Kn(e){if(e===null)return null;do e=e.return;while(e&&e.tag!==5);return e||null}function Vl(e,t,r,s,d){for(var m=t._reactName,S=[];r!==null&&r!==s;){var D=r,A=D.alternate,Y=D.stateNode;if(A!==null&&A===s)break;D.tag===5&&Y!==null&&(D=Y,d?(A=br(r,m),A!=null&&S.unshift(Mr(r,A,D))):d||(A=br(r,m),A!=null&&S.push(Mr(r,A,D)))),r=r.return}S.length!==0&&e.push({event:t,listeners:S})}var Mf=/\r\n?/g,Uf=/\u0000|\uFFFD/g;function Gl(e){return(typeof e=="string"?e:""+e).replace(Mf,`
`).replace(Uf,"")}function Ni(e,t,r){if(t=Gl(t),Gl(e)!==t&&r)throw Error(o(425))}function Ei(){}var rs=null,is=null;function os(e,t){return e==="textarea"||e==="noscript"||typeof t.children=="string"||typeof t.children=="number"||typeof t.dangerouslySetInnerHTML=="object"&&t.dangerouslySetInnerHTML!==null&&t.dangerouslySetInnerHTML.__html!=null}var ss=typeof setTimeout=="function"?setTimeout:void 0,Bf=typeof clearTimeout=="function"?clearTimeout:void 0,Yl=typeof Promise=="function"?Promise:void 0,Hf=typeof queueMicrotask=="function"?queueMicrotask:typeof Yl<"u"?function(e){return Yl.resolve(null).then(e).catch(Wf)}:ss;function Wf(e){setTimeout(function(){throw e})}function as(e,t){var r=t,s=0;do{var d=r.nextSibling;if(e.removeChild(r),d&&d.nodeType===8)if(r=d.data,r==="/$"){if(s===0){e.removeChild(d),Or(t);return}s--}else r!=="$"&&r!=="$?"&&r!=="$!"||s++;r=d}while(r);Or(t)}function hn(e){for(;e!=null;e=e.nextSibling){var t=e.nodeType;if(t===1||t===3)break;if(t===8){if(t=e.data,t==="$"||t==="$!"||t==="$?")break;if(t==="/$")return null}}return e}function Zl(e){e=e.previousSibling;for(var t=0;e;){if(e.nodeType===8){var r=e.data;if(r==="$"||r==="$!"||r==="$?"){if(t===0)return e;t--}else r==="/$"&&t++}e=e.previousSibling}return null}var Xn=Math.random().toString(36).slice(2),Yt="__reactFiber$"+Xn,Ur="__reactProps$"+Xn,Jt="__reactContainer$"+Xn,ls="__reactEvents$"+Xn,qf="__reactListeners$"+Xn,Vf="__reactHandles$"+Xn;function In(e){var t=e[Yt];if(t)return t;for(var r=e.parentNode;r;){if(t=r[Jt]||r[Yt]){if(r=t.alternate,t.child!==null||r!==null&&r.child!==null)for(e=Zl(e);e!==null;){if(r=e[Yt])return r;e=Zl(e)}return t}e=r,r=e.parentNode}return null}function Br(e){return e=e[Yt]||e[Jt],!e||e.tag!==5&&e.tag!==6&&e.tag!==13&&e.tag!==3?null:e}function Jn(e){if(e.tag===5||e.tag===6)return e.stateNode;throw Error(o(33))}function Oi(e){return e[Ur]||null}var us=[],er=-1;function mn(e){return{current:e}}function He(e){0>er||(e.current=us[er],us[er]=null,er--)}function Ue(e,t){er++,us[er]=e.current,e.current=t}var gn={},lt=mn(gn),gt=mn(!1),Rn=gn;function tr(e,t){var r=e.type.contextTypes;if(!r)return gn;var s=e.stateNode;if(s&&s.__reactInternalMemoizedUnmaskedChildContext===t)return s.__reactInternalMemoizedMaskedChildContext;var d={},m;for(m in r)d[m]=t[m];return s&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=d),d}function yt(e){return e=e.childContextTypes,e!=null}function Pi(){He(gt),He(lt)}function Ql(e,t,r){if(lt.current!==gn)throw Error(o(168));Ue(lt,t),Ue(gt,r)}function Kl(e,t,r){var s=e.stateNode;if(t=t.childContextTypes,typeof s.getChildContext!="function")return r;s=s.getChildContext();for(var d in s)if(!(d in t))throw Error(o(108,Pe(e)||"Unknown",d));return J({},r,s)}function Ii(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||gn,Rn=lt.current,Ue(lt,e),Ue(gt,gt.current),!0}function Xl(e,t,r){var s=e.stateNode;if(!s)throw Error(o(169));r?(e=Kl(e,t,Rn),s.__reactInternalMemoizedMergedChildContext=e,He(gt),He(lt),Ue(lt,e)):He(gt),Ue(gt,r)}var en=null,Ri=!1,cs=!1;function Jl(e){en===null?en=[e]:en.push(e)}function Gf(e){Ri=!0,Jl(e)}function yn(){if(!cs&&en!==null){cs=!0;var e=0,t=Fe;try{var r=en;for(Fe=1;e<r.length;e++){var s=r[e];do s=s(!0);while(s!==null)}en=null,Ri=!1}catch(d){throw en!==null&&(en=en.slice(e+1)),tl(Io,yn),d}finally{Fe=t,cs=!1}}return null}var nr=[],rr=0,Di=null,$i=0,Et=[],Ot=0,Dn=null,tn=1,nn="";function $n(e,t){nr[rr++]=$i,nr[rr++]=Di,Di=e,$i=t}function eu(e,t,r){Et[Ot++]=tn,Et[Ot++]=nn,Et[Ot++]=Dn,Dn=e;var s=tn;e=nn;var d=32-Ft(s)-1;s&=~(1<<d),r+=1;var m=32-Ft(t)+d;if(30<m){var S=d-d%5;m=(s&(1<<S)-1).toString(32),s>>=S,d-=S,tn=1<<32-Ft(t)+d|r<<d|s,nn=m+e}else tn=1<<m|r<<d|s,nn=e}function ds(e){e.return!==null&&($n(e,1),eu(e,1,0))}function fs(e){for(;e===Di;)Di=nr[--rr],nr[rr]=null,$i=nr[--rr],nr[rr]=null;for(;e===Dn;)Dn=Et[--Ot],Et[Ot]=null,nn=Et[--Ot],Et[Ot]=null,tn=Et[--Ot],Et[Ot]=null}var Ct=null,jt=null,qe=!1,Ut=null;function tu(e,t){var r=Dt(5,null,null,0);r.elementType="DELETED",r.stateNode=t,r.return=e,t=e.deletions,t===null?(e.deletions=[r],e.flags|=16):t.push(r)}function nu(e,t){switch(e.tag){case 5:var r=e.type;return t=t.nodeType!==1||r.toLowerCase()!==t.nodeName.toLowerCase()?null:t,t!==null?(e.stateNode=t,Ct=e,jt=hn(t.firstChild),!0):!1;case 6:return t=e.pendingProps===""||t.nodeType!==3?null:t,t!==null?(e.stateNode=t,Ct=e,jt=null,!0):!1;case 13:return t=t.nodeType!==8?null:t,t!==null?(r=Dn!==null?{id:tn,overflow:nn}:null,e.memoizedState={dehydrated:t,treeContext:r,retryLane:1073741824},r=Dt(18,null,null,0),r.stateNode=t,r.return=e,e.child=r,Ct=e,jt=null,!0):!1;default:return!1}}function ps(e){return(e.mode&1)!==0&&(e.flags&128)===0}function hs(e){if(qe){var t=jt;if(t){var r=t;if(!nu(e,t)){if(ps(e))throw Error(o(418));t=hn(r.nextSibling);var s=Ct;t&&nu(e,t)?tu(s,r):(e.flags=e.flags&-4097|2,qe=!1,Ct=e)}}else{if(ps(e))throw Error(o(418));e.flags=e.flags&-4097|2,qe=!1,Ct=e}}}function ru(e){for(e=e.return;e!==null&&e.tag!==5&&e.tag!==3&&e.tag!==13;)e=e.return;Ct=e}function Ai(e){if(e!==Ct)return!1;if(!qe)return ru(e),qe=!0,!1;var t;if((t=e.tag!==3)&&!(t=e.tag!==5)&&(t=e.type,t=t!=="head"&&t!=="body"&&!os(e.type,e.memoizedProps)),t&&(t=jt)){if(ps(e))throw iu(),Error(o(418));for(;t;)tu(e,t),t=hn(t.nextSibling)}if(ru(e),e.tag===13){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(o(317));e:{for(e=e.nextSibling,t=0;e;){if(e.nodeType===8){var r=e.data;if(r==="/$"){if(t===0){jt=hn(e.nextSibling);break e}t--}else r!=="$"&&r!=="$!"&&r!=="$?"||t++}e=e.nextSibling}jt=null}}else jt=Ct?hn(e.stateNode.nextSibling):null;return!0}function iu(){for(var e=jt;e;)e=hn(e.nextSibling)}function ir(){jt=Ct=null,qe=!1}function ms(e){Ut===null?Ut=[e]:Ut.push(e)}var Yf=z.ReactCurrentBatchConfig;function Hr(e,t,r){if(e=r.ref,e!==null&&typeof e!="function"&&typeof e!="object"){if(r._owner){if(r=r._owner,r){if(r.tag!==1)throw Error(o(309));var s=r.stateNode}if(!s)throw Error(o(147,e));var d=s,m=""+e;return t!==null&&t.ref!==null&&typeof t.ref=="function"&&t.ref._stringRef===m?t.ref:(t=function(S){var D=d.refs;S===null?delete D[m]:D[m]=S},t._stringRef=m,t)}if(typeof e!="string")throw Error(o(284));if(!r._owner)throw Error(o(290,e))}return e}function Li(e,t){throw e=Object.prototype.toString.call(t),Error(o(31,e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function ou(e){var t=e._init;return t(e._payload)}function su(e){function t(W,F){if(e){var q=W.deletions;q===null?(W.deletions=[F],W.flags|=16):q.push(F)}}function r(W,F){if(!e)return null;for(;F!==null;)t(W,F),F=F.sibling;return null}function s(W,F){for(W=new Map;F!==null;)F.key!==null?W.set(F.key,F):W.set(F.index,F),F=F.sibling;return W}function d(W,F){return W=Cn(W,F),W.index=0,W.sibling=null,W}function m(W,F,q){return W.index=q,e?(q=W.alternate,q!==null?(q=q.index,q<F?(W.flags|=2,F):q):(W.flags|=2,F)):(W.flags|=1048576,F)}function S(W){return e&&W.alternate===null&&(W.flags|=2),W}function D(W,F,q,me){return F===null||F.tag!==6?(F=sa(q,W.mode,me),F.return=W,F):(F=d(F,q),F.return=W,F)}function A(W,F,q,me){var ke=q.type;return ke===Z?ue(W,F,q.props.children,me,q.key):F!==null&&(F.elementType===ke||typeof ke=="object"&&ke!==null&&ke.$$typeof===ye&&ou(ke)===F.type)?(me=d(F,q.props),me.ref=Hr(W,F,q),me.return=W,me):(me=ao(q.type,q.key,q.props,null,W.mode,me),me.ref=Hr(W,F,q),me.return=W,me)}function Y(W,F,q,me){return F===null||F.tag!==4||F.stateNode.containerInfo!==q.containerInfo||F.stateNode.implementation!==q.implementation?(F=aa(q,W.mode,me),F.return=W,F):(F=d(F,q.children||[]),F.return=W,F)}function ue(W,F,q,me,ke){return F===null||F.tag!==7?(F=Hn(q,W.mode,me,ke),F.return=W,F):(F=d(F,q),F.return=W,F)}function de(W,F,q){if(typeof F=="string"&&F!==""||typeof F=="number")return F=sa(""+F,W.mode,q),F.return=W,F;if(typeof F=="object"&&F!==null){switch(F.$$typeof){case M:return q=ao(F.type,F.key,F.props,null,W.mode,q),q.ref=Hr(W,null,F),q.return=W,q;case K:return F=aa(F,W.mode,q),F.return=W,F;case ye:var me=F._init;return de(W,me(F._payload),q)}if(oe(F)||H(F))return F=Hn(F,W.mode,q,null),F.return=W,F;Li(W,F)}return null}function le(W,F,q,me){var ke=F!==null?F.key:null;if(typeof q=="string"&&q!==""||typeof q=="number")return ke!==null?null:D(W,F,""+q,me);if(typeof q=="object"&&q!==null){switch(q.$$typeof){case M:return q.key===ke?A(W,F,q,me):null;case K:return q.key===ke?Y(W,F,q,me):null;case ye:return ke=q._init,le(W,F,ke(q._payload),me)}if(oe(q)||H(q))return ke!==null?null:ue(W,F,q,me,null);Li(W,q)}return null}function ve(W,F,q,me,ke){if(typeof me=="string"&&me!==""||typeof me=="number")return W=W.get(q)||null,D(F,W,""+me,ke);if(typeof me=="object"&&me!==null){switch(me.$$typeof){case M:return W=W.get(me.key===null?q:me.key)||null,A(F,W,me,ke);case K:return W=W.get(me.key===null?q:me.key)||null,Y(F,W,me,ke);case ye:var Ne=me._init;return ve(W,F,q,Ne(me._payload),ke)}if(oe(me)||H(me))return W=W.get(q)||null,ue(F,W,me,ke,null);Li(F,me)}return null}function xe(W,F,q,me){for(var ke=null,Ne=null,Ee=F,Oe=F=0,nt=null;Ee!==null&&Oe<q.length;Oe++){Ee.index>Oe?(nt=Ee,Ee=null):nt=Ee.sibling;var Le=le(W,Ee,q[Oe],me);if(Le===null){Ee===null&&(Ee=nt);break}e&&Ee&&Le.alternate===null&&t(W,Ee),F=m(Le,F,Oe),Ne===null?ke=Le:Ne.sibling=Le,Ne=Le,Ee=nt}if(Oe===q.length)return r(W,Ee),qe&&$n(W,Oe),ke;if(Ee===null){for(;Oe<q.length;Oe++)Ee=de(W,q[Oe],me),Ee!==null&&(F=m(Ee,F,Oe),Ne===null?ke=Ee:Ne.sibling=Ee,Ne=Ee);return qe&&$n(W,Oe),ke}for(Ee=s(W,Ee);Oe<q.length;Oe++)nt=ve(Ee,W,Oe,q[Oe],me),nt!==null&&(e&&nt.alternate!==null&&Ee.delete(nt.key===null?Oe:nt.key),F=m(nt,F,Oe),Ne===null?ke=nt:Ne.sibling=nt,Ne=nt);return e&&Ee.forEach(function(jn){return t(W,jn)}),qe&&$n(W,Oe),ke}function Se(W,F,q,me){var ke=H(q);if(typeof ke!="function")throw Error(o(150));if(q=ke.call(q),q==null)throw Error(o(151));for(var Ne=ke=null,Ee=F,Oe=F=0,nt=null,Le=q.next();Ee!==null&&!Le.done;Oe++,Le=q.next()){Ee.index>Oe?(nt=Ee,Ee=null):nt=Ee.sibling;var jn=le(W,Ee,Le.value,me);if(jn===null){Ee===null&&(Ee=nt);break}e&&Ee&&jn.alternate===null&&t(W,Ee),F=m(jn,F,Oe),Ne===null?ke=jn:Ne.sibling=jn,Ne=jn,Ee=nt}if(Le.done)return r(W,Ee),qe&&$n(W,Oe),ke;if(Ee===null){for(;!Le.done;Oe++,Le=q.next())Le=de(W,Le.value,me),Le!==null&&(F=m(Le,F,Oe),Ne===null?ke=Le:Ne.sibling=Le,Ne=Le);return qe&&$n(W,Oe),ke}for(Ee=s(W,Ee);!Le.done;Oe++,Le=q.next())Le=ve(Ee,W,Oe,Le.value,me),Le!==null&&(e&&Le.alternate!==null&&Ee.delete(Le.key===null?Oe:Le.key),F=m(Le,F,Oe),Ne===null?ke=Le:Ne.sibling=Le,Ne=Le);return e&&Ee.forEach(function(Tp){return t(W,Tp)}),qe&&$n(W,Oe),ke}function Qe(W,F,q,me){if(typeof q=="object"&&q!==null&&q.type===Z&&q.key===null&&(q=q.props.children),typeof q=="object"&&q!==null){switch(q.$$typeof){case M:e:{for(var ke=q.key,Ne=F;Ne!==null;){if(Ne.key===ke){if(ke=q.type,ke===Z){if(Ne.tag===7){r(W,Ne.sibling),F=d(Ne,q.props.children),F.return=W,W=F;break e}}else if(Ne.elementType===ke||typeof ke=="object"&&ke!==null&&ke.$$typeof===ye&&ou(ke)===Ne.type){r(W,Ne.sibling),F=d(Ne,q.props),F.ref=Hr(W,Ne,q),F.return=W,W=F;break e}r(W,Ne);break}else t(W,Ne);Ne=Ne.sibling}q.type===Z?(F=Hn(q.props.children,W.mode,me,q.key),F.return=W,W=F):(me=ao(q.type,q.key,q.props,null,W.mode,me),me.ref=Hr(W,F,q),me.return=W,W=me)}return S(W);case K:e:{for(Ne=q.key;F!==null;){if(F.key===Ne)if(F.tag===4&&F.stateNode.containerInfo===q.containerInfo&&F.stateNode.implementation===q.implementation){r(W,F.sibling),F=d(F,q.children||[]),F.return=W,W=F;break e}else{r(W,F);break}else t(W,F);F=F.sibling}F=aa(q,W.mode,me),F.return=W,W=F}return S(W);case ye:return Ne=q._init,Qe(W,F,Ne(q._payload),me)}if(oe(q))return xe(W,F,q,me);if(H(q))return Se(W,F,q,me);Li(W,q)}return typeof q=="string"&&q!==""||typeof q=="number"?(q=""+q,F!==null&&F.tag===6?(r(W,F.sibling),F=d(F,q),F.return=W,W=F):(r(W,F),F=sa(q,W.mode,me),F.return=W,W=F),S(W)):r(W,F)}return Qe}var or=su(!0),au=su(!1),zi=mn(null),Fi=null,sr=null,gs=null;function ys(){gs=sr=Fi=null}function vs(e){var t=zi.current;He(zi),e._currentValue=t}function _s(e,t,r){for(;e!==null;){var s=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,s!==null&&(s.childLanes|=t)):s!==null&&(s.childLanes&t)!==t&&(s.childLanes|=t),e===r)break;e=e.return}}function ar(e,t){Fi=e,gs=sr=null,e=e.dependencies,e!==null&&e.firstContext!==null&&((e.lanes&t)!==0&&(vt=!0),e.firstContext=null)}function Pt(e){var t=e._currentValue;if(gs!==e)if(e={context:e,memoizedValue:t,next:null},sr===null){if(Fi===null)throw Error(o(308));sr=e,Fi.dependencies={lanes:0,firstContext:e}}else sr=sr.next=e;return t}var An=null;function ws(e){An===null?An=[e]:An.push(e)}function lu(e,t,r,s){var d=t.interleaved;return d===null?(r.next=r,ws(t)):(r.next=d.next,d.next=r),t.interleaved=r,rn(e,s)}function rn(e,t){e.lanes|=t;var r=e.alternate;for(r!==null&&(r.lanes|=t),r=e,e=e.return;e!==null;)e.childLanes|=t,r=e.alternate,r!==null&&(r.childLanes|=t),r=e,e=e.return;return r.tag===3?r.stateNode:null}var vn=!1;function bs(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function uu(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function on(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function _n(e,t,r){var s=e.updateQueue;if(s===null)return null;if(s=s.shared,($e&2)!==0){var d=s.pending;return d===null?t.next=t:(t.next=d.next,d.next=t),s.pending=t,rn(e,r)}return d=s.interleaved,d===null?(t.next=t,ws(s)):(t.next=d.next,d.next=t),s.interleaved=t,rn(e,r)}function Mi(e,t,r){if(t=t.updateQueue,t!==null&&(t=t.shared,(r&4194240)!==0)){var s=t.lanes;s&=e.pendingLanes,r|=s,t.lanes=r,$o(e,r)}}function cu(e,t){var r=e.updateQueue,s=e.alternate;if(s!==null&&(s=s.updateQueue,r===s)){var d=null,m=null;if(r=r.firstBaseUpdate,r!==null){do{var S={eventTime:r.eventTime,lane:r.lane,tag:r.tag,payload:r.payload,callback:r.callback,next:null};m===null?d=m=S:m=m.next=S,r=r.next}while(r!==null);m===null?d=m=t:m=m.next=t}else d=m=t;r={baseState:s.baseState,firstBaseUpdate:d,lastBaseUpdate:m,shared:s.shared,effects:s.effects},e.updateQueue=r;return}e=r.lastBaseUpdate,e===null?r.firstBaseUpdate=t:e.next=t,r.lastBaseUpdate=t}function Ui(e,t,r,s){var d=e.updateQueue;vn=!1;var m=d.firstBaseUpdate,S=d.lastBaseUpdate,D=d.shared.pending;if(D!==null){d.shared.pending=null;var A=D,Y=A.next;A.next=null,S===null?m=Y:S.next=Y,S=A;var ue=e.alternate;ue!==null&&(ue=ue.updateQueue,D=ue.lastBaseUpdate,D!==S&&(D===null?ue.firstBaseUpdate=Y:D.next=Y,ue.lastBaseUpdate=A))}if(m!==null){var de=d.baseState;S=0,ue=Y=A=null,D=m;do{var le=D.lane,ve=D.eventTime;if((s&le)===le){ue!==null&&(ue=ue.next={eventTime:ve,lane:0,tag:D.tag,payload:D.payload,callback:D.callback,next:null});e:{var xe=e,Se=D;switch(le=t,ve=r,Se.tag){case 1:if(xe=Se.payload,typeof xe=="function"){de=xe.call(ve,de,le);break e}de=xe;break e;case 3:xe.flags=xe.flags&-65537|128;case 0:if(xe=Se.payload,le=typeof xe=="function"?xe.call(ve,de,le):xe,le==null)break e;de=J({},de,le);break e;case 2:vn=!0}}D.callback!==null&&D.lane!==0&&(e.flags|=64,le=d.effects,le===null?d.effects=[D]:le.push(D))}else ve={eventTime:ve,lane:le,tag:D.tag,payload:D.payload,callback:D.callback,next:null},ue===null?(Y=ue=ve,A=de):ue=ue.next=ve,S|=le;if(D=D.next,D===null){if(D=d.shared.pending,D===null)break;le=D,D=le.next,le.next=null,d.lastBaseUpdate=le,d.shared.pending=null}}while(!0);if(ue===null&&(A=de),d.baseState=A,d.firstBaseUpdate=Y,d.lastBaseUpdate=ue,t=d.shared.interleaved,t!==null){d=t;do S|=d.lane,d=d.next;while(d!==t)}else m===null&&(d.shared.lanes=0);Fn|=S,e.lanes=S,e.memoizedState=de}}function du(e,t,r){if(e=t.effects,t.effects=null,e!==null)for(t=0;t<e.length;t++){var s=e[t],d=s.callback;if(d!==null){if(s.callback=null,s=r,typeof d!="function")throw Error(o(191,d));d.call(s)}}}var Wr={},Zt=mn(Wr),qr=mn(Wr),Vr=mn(Wr);function Ln(e){if(e===Wr)throw Error(o(174));return e}function xs(e,t){switch(Ue(Vr,t),Ue(qr,e),Ue(Zt,Wr),e=t.nodeType,e){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:ze(null,"");break;default:e=e===8?t.parentNode:t,t=e.namespaceURI||null,e=e.tagName,t=ze(t,e)}He(Zt),Ue(Zt,t)}function lr(){He(Zt),He(qr),He(Vr)}function fu(e){Ln(Vr.current);var t=Ln(Zt.current),r=ze(t,e.type);t!==r&&(Ue(qr,e),Ue(Zt,r))}function Ss(e){qr.current===e&&(He(Zt),He(qr))}var Ve=mn(0);function Bi(e){for(var t=e;t!==null;){if(t.tag===13){var r=t.memoizedState;if(r!==null&&(r=r.dehydrated,r===null||r.data==="$?"||r.data==="$!"))return t}else if(t.tag===19&&t.memoizedProps.revealOrder!==void 0){if((t.flags&128)!==0)return t}else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var ks=[];function Cs(){for(var e=0;e<ks.length;e++)ks[e]._workInProgressVersionPrimary=null;ks.length=0}var Hi=z.ReactCurrentDispatcher,js=z.ReactCurrentBatchConfig,zn=0,Ge=null,Xe=null,et=null,Wi=!1,Gr=!1,Yr=0,Zf=0;function ut(){throw Error(o(321))}function Ts(e,t){if(t===null)return!1;for(var r=0;r<t.length&&r<e.length;r++)if(!Mt(e[r],t[r]))return!1;return!0}function Ns(e,t,r,s,d,m){if(zn=m,Ge=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,Hi.current=e===null||e.memoizedState===null?Jf:ep,e=r(s,d),Gr){m=0;do{if(Gr=!1,Yr=0,25<=m)throw Error(o(301));m+=1,et=Xe=null,t.updateQueue=null,Hi.current=tp,e=r(s,d)}while(Gr)}if(Hi.current=Gi,t=Xe!==null&&Xe.next!==null,zn=0,et=Xe=Ge=null,Wi=!1,t)throw Error(o(300));return e}function Es(){var e=Yr!==0;return Yr=0,e}function Qt(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return et===null?Ge.memoizedState=et=e:et=et.next=e,et}function It(){if(Xe===null){var e=Ge.alternate;e=e!==null?e.memoizedState:null}else e=Xe.next;var t=et===null?Ge.memoizedState:et.next;if(t!==null)et=t,Xe=e;else{if(e===null)throw Error(o(310));Xe=e,e={memoizedState:Xe.memoizedState,baseState:Xe.baseState,baseQueue:Xe.baseQueue,queue:Xe.queue,next:null},et===null?Ge.memoizedState=et=e:et=et.next=e}return et}function Zr(e,t){return typeof t=="function"?t(e):t}function Os(e){var t=It(),r=t.queue;if(r===null)throw Error(o(311));r.lastRenderedReducer=e;var s=Xe,d=s.baseQueue,m=r.pending;if(m!==null){if(d!==null){var S=d.next;d.next=m.next,m.next=S}s.baseQueue=d=m,r.pending=null}if(d!==null){m=d.next,s=s.baseState;var D=S=null,A=null,Y=m;do{var ue=Y.lane;if((zn&ue)===ue)A!==null&&(A=A.next={lane:0,action:Y.action,hasEagerState:Y.hasEagerState,eagerState:Y.eagerState,next:null}),s=Y.hasEagerState?Y.eagerState:e(s,Y.action);else{var de={lane:ue,action:Y.action,hasEagerState:Y.hasEagerState,eagerState:Y.eagerState,next:null};A===null?(D=A=de,S=s):A=A.next=de,Ge.lanes|=ue,Fn|=ue}Y=Y.next}while(Y!==null&&Y!==m);A===null?S=s:A.next=D,Mt(s,t.memoizedState)||(vt=!0),t.memoizedState=s,t.baseState=S,t.baseQueue=A,r.lastRenderedState=s}if(e=r.interleaved,e!==null){d=e;do m=d.lane,Ge.lanes|=m,Fn|=m,d=d.next;while(d!==e)}else d===null&&(r.lanes=0);return[t.memoizedState,r.dispatch]}function Ps(e){var t=It(),r=t.queue;if(r===null)throw Error(o(311));r.lastRenderedReducer=e;var s=r.dispatch,d=r.pending,m=t.memoizedState;if(d!==null){r.pending=null;var S=d=d.next;do m=e(m,S.action),S=S.next;while(S!==d);Mt(m,t.memoizedState)||(vt=!0),t.memoizedState=m,t.baseQueue===null&&(t.baseState=m),r.lastRenderedState=m}return[m,s]}function pu(){}function hu(e,t){var r=Ge,s=It(),d=t(),m=!Mt(s.memoizedState,d);if(m&&(s.memoizedState=d,vt=!0),s=s.queue,Is(yu.bind(null,r,s,e),[e]),s.getSnapshot!==t||m||et!==null&&et.memoizedState.tag&1){if(r.flags|=2048,Qr(9,gu.bind(null,r,s,d,t),void 0,null),tt===null)throw Error(o(349));(zn&30)!==0||mu(r,t,d)}return d}function mu(e,t,r){e.flags|=16384,e={getSnapshot:t,value:r},t=Ge.updateQueue,t===null?(t={lastEffect:null,stores:null},Ge.updateQueue=t,t.stores=[e]):(r=t.stores,r===null?t.stores=[e]:r.push(e))}function gu(e,t,r,s){t.value=r,t.getSnapshot=s,vu(t)&&_u(e)}function yu(e,t,r){return r(function(){vu(t)&&_u(e)})}function vu(e){var t=e.getSnapshot;e=e.value;try{var r=t();return!Mt(e,r)}catch{return!0}}function _u(e){var t=rn(e,1);t!==null&&qt(t,e,1,-1)}function wu(e){var t=Qt();return typeof e=="function"&&(e=e()),t.memoizedState=t.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Zr,lastRenderedState:e},t.queue=e,e=e.dispatch=Xf.bind(null,Ge,e),[t.memoizedState,e]}function Qr(e,t,r,s){return e={tag:e,create:t,destroy:r,deps:s,next:null},t=Ge.updateQueue,t===null?(t={lastEffect:null,stores:null},Ge.updateQueue=t,t.lastEffect=e.next=e):(r=t.lastEffect,r===null?t.lastEffect=e.next=e:(s=r.next,r.next=e,e.next=s,t.lastEffect=e)),e}function bu(){return It().memoizedState}function qi(e,t,r,s){var d=Qt();Ge.flags|=e,d.memoizedState=Qr(1|t,r,void 0,s===void 0?null:s)}function Vi(e,t,r,s){var d=It();s=s===void 0?null:s;var m=void 0;if(Xe!==null){var S=Xe.memoizedState;if(m=S.destroy,s!==null&&Ts(s,S.deps)){d.memoizedState=Qr(t,r,m,s);return}}Ge.flags|=e,d.memoizedState=Qr(1|t,r,m,s)}function xu(e,t){return qi(8390656,8,e,t)}function Is(e,t){return Vi(2048,8,e,t)}function Su(e,t){return Vi(4,2,e,t)}function ku(e,t){return Vi(4,4,e,t)}function Cu(e,t){if(typeof t=="function")return e=e(),t(e),function(){t(null)};if(t!=null)return e=e(),t.current=e,function(){t.current=null}}function ju(e,t,r){return r=r!=null?r.concat([e]):null,Vi(4,4,Cu.bind(null,t,e),r)}function Rs(){}function Tu(e,t){var r=It();t=t===void 0?null:t;var s=r.memoizedState;return s!==null&&t!==null&&Ts(t,s[1])?s[0]:(r.memoizedState=[e,t],e)}function Nu(e,t){var r=It();t=t===void 0?null:t;var s=r.memoizedState;return s!==null&&t!==null&&Ts(t,s[1])?s[0]:(e=e(),r.memoizedState=[e,t],e)}function Eu(e,t,r){return(zn&21)===0?(e.baseState&&(e.baseState=!1,vt=!0),e.memoizedState=r):(Mt(r,t)||(r=ol(),Ge.lanes|=r,Fn|=r,e.baseState=!0),t)}function Qf(e,t){var r=Fe;Fe=r!==0&&4>r?r:4,e(!0);var s=js.transition;js.transition={};try{e(!1),t()}finally{Fe=r,js.transition=s}}function Ou(){return It().memoizedState}function Kf(e,t,r){var s=Sn(e);if(r={lane:s,action:r,hasEagerState:!1,eagerState:null,next:null},Pu(e))Iu(t,r);else if(r=lu(e,t,r,s),r!==null){var d=ht();qt(r,e,s,d),Ru(r,t,s)}}function Xf(e,t,r){var s=Sn(e),d={lane:s,action:r,hasEagerState:!1,eagerState:null,next:null};if(Pu(e))Iu(t,d);else{var m=e.alternate;if(e.lanes===0&&(m===null||m.lanes===0)&&(m=t.lastRenderedReducer,m!==null))try{var S=t.lastRenderedState,D=m(S,r);if(d.hasEagerState=!0,d.eagerState=D,Mt(D,S)){var A=t.interleaved;A===null?(d.next=d,ws(t)):(d.next=A.next,A.next=d),t.interleaved=d;return}}catch{}finally{}r=lu(e,t,d,s),r!==null&&(d=ht(),qt(r,e,s,d),Ru(r,t,s))}}function Pu(e){var t=e.alternate;return e===Ge||t!==null&&t===Ge}function Iu(e,t){Gr=Wi=!0;var r=e.pending;r===null?t.next=t:(t.next=r.next,r.next=t),e.pending=t}function Ru(e,t,r){if((r&4194240)!==0){var s=t.lanes;s&=e.pendingLanes,r|=s,t.lanes=r,$o(e,r)}}var Gi={readContext:Pt,useCallback:ut,useContext:ut,useEffect:ut,useImperativeHandle:ut,useInsertionEffect:ut,useLayoutEffect:ut,useMemo:ut,useReducer:ut,useRef:ut,useState:ut,useDebugValue:ut,useDeferredValue:ut,useTransition:ut,useMutableSource:ut,useSyncExternalStore:ut,useId:ut,unstable_isNewReconciler:!1},Jf={readContext:Pt,useCallback:function(e,t){return Qt().memoizedState=[e,t===void 0?null:t],e},useContext:Pt,useEffect:xu,useImperativeHandle:function(e,t,r){return r=r!=null?r.concat([e]):null,qi(4194308,4,Cu.bind(null,t,e),r)},useLayoutEffect:function(e,t){return qi(4194308,4,e,t)},useInsertionEffect:function(e,t){return qi(4,2,e,t)},useMemo:function(e,t){var r=Qt();return t=t===void 0?null:t,e=e(),r.memoizedState=[e,t],e},useReducer:function(e,t,r){var s=Qt();return t=r!==void 0?r(t):t,s.memoizedState=s.baseState=t,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:t},s.queue=e,e=e.dispatch=Kf.bind(null,Ge,e),[s.memoizedState,e]},useRef:function(e){var t=Qt();return e={current:e},t.memoizedState=e},useState:wu,useDebugValue:Rs,useDeferredValue:function(e){return Qt().memoizedState=e},useTransition:function(){var e=wu(!1),t=e[0];return e=Qf.bind(null,e[1]),Qt().memoizedState=e,[t,e]},useMutableSource:function(){},useSyncExternalStore:function(e,t,r){var s=Ge,d=Qt();if(qe){if(r===void 0)throw Error(o(407));r=r()}else{if(r=t(),tt===null)throw Error(o(349));(zn&30)!==0||mu(s,t,r)}d.memoizedState=r;var m={value:r,getSnapshot:t};return d.queue=m,xu(yu.bind(null,s,m,e),[e]),s.flags|=2048,Qr(9,gu.bind(null,s,m,r,t),void 0,null),r},useId:function(){var e=Qt(),t=tt.identifierPrefix;if(qe){var r=nn,s=tn;r=(s&~(1<<32-Ft(s)-1)).toString(32)+r,t=":"+t+"R"+r,r=Yr++,0<r&&(t+="H"+r.toString(32)),t+=":"}else r=Zf++,t=":"+t+"r"+r.toString(32)+":";return e.memoizedState=t},unstable_isNewReconciler:!1},ep={readContext:Pt,useCallback:Tu,useContext:Pt,useEffect:Is,useImperativeHandle:ju,useInsertionEffect:Su,useLayoutEffect:ku,useMemo:Nu,useReducer:Os,useRef:bu,useState:function(){return Os(Zr)},useDebugValue:Rs,useDeferredValue:function(e){var t=It();return Eu(t,Xe.memoizedState,e)},useTransition:function(){var e=Os(Zr)[0],t=It().memoizedState;return[e,t]},useMutableSource:pu,useSyncExternalStore:hu,useId:Ou,unstable_isNewReconciler:!1},tp={readContext:Pt,useCallback:Tu,useContext:Pt,useEffect:Is,useImperativeHandle:ju,useInsertionEffect:Su,useLayoutEffect:ku,useMemo:Nu,useReducer:Ps,useRef:bu,useState:function(){return Ps(Zr)},useDebugValue:Rs,useDeferredValue:function(e){var t=It();return Xe===null?t.memoizedState=e:Eu(t,Xe.memoizedState,e)},useTransition:function(){var e=Ps(Zr)[0],t=It().memoizedState;return[e,t]},useMutableSource:pu,useSyncExternalStore:hu,useId:Ou,unstable_isNewReconciler:!1};function Bt(e,t){if(e&&e.defaultProps){t=J({},t),e=e.defaultProps;for(var r in e)t[r]===void 0&&(t[r]=e[r]);return t}return t}function Ds(e,t,r,s){t=e.memoizedState,r=r(s,t),r=r==null?t:J({},t,r),e.memoizedState=r,e.lanes===0&&(e.updateQueue.baseState=r)}var Yi={isMounted:function(e){return(e=e._reactInternals)?Pn(e)===e:!1},enqueueSetState:function(e,t,r){e=e._reactInternals;var s=ht(),d=Sn(e),m=on(s,d);m.payload=t,r!=null&&(m.callback=r),t=_n(e,m,d),t!==null&&(qt(t,e,d,s),Mi(t,e,d))},enqueueReplaceState:function(e,t,r){e=e._reactInternals;var s=ht(),d=Sn(e),m=on(s,d);m.tag=1,m.payload=t,r!=null&&(m.callback=r),t=_n(e,m,d),t!==null&&(qt(t,e,d,s),Mi(t,e,d))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var r=ht(),s=Sn(e),d=on(r,s);d.tag=2,t!=null&&(d.callback=t),t=_n(e,d,s),t!==null&&(qt(t,e,s,r),Mi(t,e,s))}};function Du(e,t,r,s,d,m,S){return e=e.stateNode,typeof e.shouldComponentUpdate=="function"?e.shouldComponentUpdate(s,m,S):t.prototype&&t.prototype.isPureReactComponent?!Ar(r,s)||!Ar(d,m):!0}function $u(e,t,r){var s=!1,d=gn,m=t.contextType;return typeof m=="object"&&m!==null?m=Pt(m):(d=yt(t)?Rn:lt.current,s=t.contextTypes,m=(s=s!=null)?tr(e,d):gn),t=new t(r,m),e.memoizedState=t.state!==null&&t.state!==void 0?t.state:null,t.updater=Yi,e.stateNode=t,t._reactInternals=e,s&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=d,e.__reactInternalMemoizedMaskedChildContext=m),t}function Au(e,t,r,s){e=t.state,typeof t.componentWillReceiveProps=="function"&&t.componentWillReceiveProps(r,s),typeof t.UNSAFE_componentWillReceiveProps=="function"&&t.UNSAFE_componentWillReceiveProps(r,s),t.state!==e&&Yi.enqueueReplaceState(t,t.state,null)}function $s(e,t,r,s){var d=e.stateNode;d.props=r,d.state=e.memoizedState,d.refs={},bs(e);var m=t.contextType;typeof m=="object"&&m!==null?d.context=Pt(m):(m=yt(t)?Rn:lt.current,d.context=tr(e,m)),d.state=e.memoizedState,m=t.getDerivedStateFromProps,typeof m=="function"&&(Ds(e,t,m,r),d.state=e.memoizedState),typeof t.getDerivedStateFromProps=="function"||typeof d.getSnapshotBeforeUpdate=="function"||typeof d.UNSAFE_componentWillMount!="function"&&typeof d.componentWillMount!="function"||(t=d.state,typeof d.componentWillMount=="function"&&d.componentWillMount(),typeof d.UNSAFE_componentWillMount=="function"&&d.UNSAFE_componentWillMount(),t!==d.state&&Yi.enqueueReplaceState(d,d.state,null),Ui(e,r,d,s),d.state=e.memoizedState),typeof d.componentDidMount=="function"&&(e.flags|=4194308)}function ur(e,t){try{var r="",s=t;do r+=re(s),s=s.return;while(s);var d=r}catch(m){d=`
Error generating stack: `+m.message+`
`+m.stack}return{value:e,source:t,stack:d,digest:null}}function As(e,t,r){return{value:e,source:null,stack:r??null,digest:t??null}}function Ls(e,t){try{console.error(t.value)}catch(r){setTimeout(function(){throw r})}}var np=typeof WeakMap=="function"?WeakMap:Map;function Lu(e,t,r){r=on(-1,r),r.tag=3,r.payload={element:null};var s=t.value;return r.callback=function(){to||(to=!0,Xs=s),Ls(e,t)},r}function zu(e,t,r){r=on(-1,r),r.tag=3;var s=e.type.getDerivedStateFromError;if(typeof s=="function"){var d=t.value;r.payload=function(){return s(d)},r.callback=function(){Ls(e,t)}}var m=e.stateNode;return m!==null&&typeof m.componentDidCatch=="function"&&(r.callback=function(){Ls(e,t),typeof s!="function"&&(bn===null?bn=new Set([this]):bn.add(this));var S=t.stack;this.componentDidCatch(t.value,{componentStack:S!==null?S:""})}),r}function Fu(e,t,r){var s=e.pingCache;if(s===null){s=e.pingCache=new np;var d=new Set;s.set(t,d)}else d=s.get(t),d===void 0&&(d=new Set,s.set(t,d));d.has(r)||(d.add(r),e=gp.bind(null,e,t,r),t.then(e,e))}function Mu(e){do{var t;if((t=e.tag===13)&&(t=e.memoizedState,t=t!==null?t.dehydrated!==null:!0),t)return e;e=e.return}while(e!==null);return null}function Uu(e,t,r,s,d){return(e.mode&1)===0?(e===t?e.flags|=65536:(e.flags|=128,r.flags|=131072,r.flags&=-52805,r.tag===1&&(r.alternate===null?r.tag=17:(t=on(-1,1),t.tag=2,_n(r,t,1))),r.lanes|=1),e):(e.flags|=65536,e.lanes=d,e)}var rp=z.ReactCurrentOwner,vt=!1;function pt(e,t,r,s){t.child=e===null?au(t,null,r,s):or(t,e.child,r,s)}function Bu(e,t,r,s,d){r=r.render;var m=t.ref;return ar(t,d),s=Ns(e,t,r,s,m,d),r=Es(),e!==null&&!vt?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~d,sn(e,t,d)):(qe&&r&&ds(t),t.flags|=1,pt(e,t,s,d),t.child)}function Hu(e,t,r,s,d){if(e===null){var m=r.type;return typeof m=="function"&&!oa(m)&&m.defaultProps===void 0&&r.compare===null&&r.defaultProps===void 0?(t.tag=15,t.type=m,Wu(e,t,m,s,d)):(e=ao(r.type,null,s,t,t.mode,d),e.ref=t.ref,e.return=t,t.child=e)}if(m=e.child,(e.lanes&d)===0){var S=m.memoizedProps;if(r=r.compare,r=r!==null?r:Ar,r(S,s)&&e.ref===t.ref)return sn(e,t,d)}return t.flags|=1,e=Cn(m,s),e.ref=t.ref,e.return=t,t.child=e}function Wu(e,t,r,s,d){if(e!==null){var m=e.memoizedProps;if(Ar(m,s)&&e.ref===t.ref)if(vt=!1,t.pendingProps=s=m,(e.lanes&d)!==0)(e.flags&131072)!==0&&(vt=!0);else return t.lanes=e.lanes,sn(e,t,d)}return zs(e,t,r,s,d)}function qu(e,t,r){var s=t.pendingProps,d=s.children,m=e!==null?e.memoizedState:null;if(s.mode==="hidden")if((t.mode&1)===0)t.memoizedState={baseLanes:0,cachePool:null,transitions:null},Ue(dr,Tt),Tt|=r;else{if((r&1073741824)===0)return e=m!==null?m.baseLanes|r:r,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e,cachePool:null,transitions:null},t.updateQueue=null,Ue(dr,Tt),Tt|=e,null;t.memoizedState={baseLanes:0,cachePool:null,transitions:null},s=m!==null?m.baseLanes:r,Ue(dr,Tt),Tt|=s}else m!==null?(s=m.baseLanes|r,t.memoizedState=null):s=r,Ue(dr,Tt),Tt|=s;return pt(e,t,d,r),t.child}function Vu(e,t){var r=t.ref;(e===null&&r!==null||e!==null&&e.ref!==r)&&(t.flags|=512,t.flags|=2097152)}function zs(e,t,r,s,d){var m=yt(r)?Rn:lt.current;return m=tr(t,m),ar(t,d),r=Ns(e,t,r,s,m,d),s=Es(),e!==null&&!vt?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~d,sn(e,t,d)):(qe&&s&&ds(t),t.flags|=1,pt(e,t,r,d),t.child)}function Gu(e,t,r,s,d){if(yt(r)){var m=!0;Ii(t)}else m=!1;if(ar(t,d),t.stateNode===null)Qi(e,t),$u(t,r,s),$s(t,r,s,d),s=!0;else if(e===null){var S=t.stateNode,D=t.memoizedProps;S.props=D;var A=S.context,Y=r.contextType;typeof Y=="object"&&Y!==null?Y=Pt(Y):(Y=yt(r)?Rn:lt.current,Y=tr(t,Y));var ue=r.getDerivedStateFromProps,de=typeof ue=="function"||typeof S.getSnapshotBeforeUpdate=="function";de||typeof S.UNSAFE_componentWillReceiveProps!="function"&&typeof S.componentWillReceiveProps!="function"||(D!==s||A!==Y)&&Au(t,S,s,Y),vn=!1;var le=t.memoizedState;S.state=le,Ui(t,s,S,d),A=t.memoizedState,D!==s||le!==A||gt.current||vn?(typeof ue=="function"&&(Ds(t,r,ue,s),A=t.memoizedState),(D=vn||Du(t,r,D,s,le,A,Y))?(de||typeof S.UNSAFE_componentWillMount!="function"&&typeof S.componentWillMount!="function"||(typeof S.componentWillMount=="function"&&S.componentWillMount(),typeof S.UNSAFE_componentWillMount=="function"&&S.UNSAFE_componentWillMount()),typeof S.componentDidMount=="function"&&(t.flags|=4194308)):(typeof S.componentDidMount=="function"&&(t.flags|=4194308),t.memoizedProps=s,t.memoizedState=A),S.props=s,S.state=A,S.context=Y,s=D):(typeof S.componentDidMount=="function"&&(t.flags|=4194308),s=!1)}else{S=t.stateNode,uu(e,t),D=t.memoizedProps,Y=t.type===t.elementType?D:Bt(t.type,D),S.props=Y,de=t.pendingProps,le=S.context,A=r.contextType,typeof A=="object"&&A!==null?A=Pt(A):(A=yt(r)?Rn:lt.current,A=tr(t,A));var ve=r.getDerivedStateFromProps;(ue=typeof ve=="function"||typeof S.getSnapshotBeforeUpdate=="function")||typeof S.UNSAFE_componentWillReceiveProps!="function"&&typeof S.componentWillReceiveProps!="function"||(D!==de||le!==A)&&Au(t,S,s,A),vn=!1,le=t.memoizedState,S.state=le,Ui(t,s,S,d);var xe=t.memoizedState;D!==de||le!==xe||gt.current||vn?(typeof ve=="function"&&(Ds(t,r,ve,s),xe=t.memoizedState),(Y=vn||Du(t,r,Y,s,le,xe,A)||!1)?(ue||typeof S.UNSAFE_componentWillUpdate!="function"&&typeof S.componentWillUpdate!="function"||(typeof S.componentWillUpdate=="function"&&S.componentWillUpdate(s,xe,A),typeof S.UNSAFE_componentWillUpdate=="function"&&S.UNSAFE_componentWillUpdate(s,xe,A)),typeof S.componentDidUpdate=="function"&&(t.flags|=4),typeof S.getSnapshotBeforeUpdate=="function"&&(t.flags|=1024)):(typeof S.componentDidUpdate!="function"||D===e.memoizedProps&&le===e.memoizedState||(t.flags|=4),typeof S.getSnapshotBeforeUpdate!="function"||D===e.memoizedProps&&le===e.memoizedState||(t.flags|=1024),t.memoizedProps=s,t.memoizedState=xe),S.props=s,S.state=xe,S.context=A,s=Y):(typeof S.componentDidUpdate!="function"||D===e.memoizedProps&&le===e.memoizedState||(t.flags|=4),typeof S.getSnapshotBeforeUpdate!="function"||D===e.memoizedProps&&le===e.memoizedState||(t.flags|=1024),s=!1)}return Fs(e,t,r,s,m,d)}function Fs(e,t,r,s,d,m){Vu(e,t);var S=(t.flags&128)!==0;if(!s&&!S)return d&&Xl(t,r,!1),sn(e,t,m);s=t.stateNode,rp.current=t;var D=S&&typeof r.getDerivedStateFromError!="function"?null:s.render();return t.flags|=1,e!==null&&S?(t.child=or(t,e.child,null,m),t.child=or(t,null,D,m)):pt(e,t,D,m),t.memoizedState=s.state,d&&Xl(t,r,!0),t.child}function Yu(e){var t=e.stateNode;t.pendingContext?Ql(e,t.pendingContext,t.pendingContext!==t.context):t.context&&Ql(e,t.context,!1),xs(e,t.containerInfo)}function Zu(e,t,r,s,d){return ir(),ms(d),t.flags|=256,pt(e,t,r,s),t.child}var Ms={dehydrated:null,treeContext:null,retryLane:0};function Us(e){return{baseLanes:e,cachePool:null,transitions:null}}function Qu(e,t,r){var s=t.pendingProps,d=Ve.current,m=!1,S=(t.flags&128)!==0,D;if((D=S)||(D=e!==null&&e.memoizedState===null?!1:(d&2)!==0),D?(m=!0,t.flags&=-129):(e===null||e.memoizedState!==null)&&(d|=1),Ue(Ve,d&1),e===null)return hs(t),e=t.memoizedState,e!==null&&(e=e.dehydrated,e!==null)?((t.mode&1)===0?t.lanes=1:e.data==="$!"?t.lanes=8:t.lanes=1073741824,null):(S=s.children,e=s.fallback,m?(s=t.mode,m=t.child,S={mode:"hidden",children:S},(s&1)===0&&m!==null?(m.childLanes=0,m.pendingProps=S):m=lo(S,s,0,null),e=Hn(e,s,r,null),m.return=t,e.return=t,m.sibling=e,t.child=m,t.child.memoizedState=Us(r),t.memoizedState=Ms,e):Bs(t,S));if(d=e.memoizedState,d!==null&&(D=d.dehydrated,D!==null))return ip(e,t,S,s,D,d,r);if(m){m=s.fallback,S=t.mode,d=e.child,D=d.sibling;var A={mode:"hidden",children:s.children};return(S&1)===0&&t.child!==d?(s=t.child,s.childLanes=0,s.pendingProps=A,t.deletions=null):(s=Cn(d,A),s.subtreeFlags=d.subtreeFlags&14680064),D!==null?m=Cn(D,m):(m=Hn(m,S,r,null),m.flags|=2),m.return=t,s.return=t,s.sibling=m,t.child=s,s=m,m=t.child,S=e.child.memoizedState,S=S===null?Us(r):{baseLanes:S.baseLanes|r,cachePool:null,transitions:S.transitions},m.memoizedState=S,m.childLanes=e.childLanes&~r,t.memoizedState=Ms,s}return m=e.child,e=m.sibling,s=Cn(m,{mode:"visible",children:s.children}),(t.mode&1)===0&&(s.lanes=r),s.return=t,s.sibling=null,e!==null&&(r=t.deletions,r===null?(t.deletions=[e],t.flags|=16):r.push(e)),t.child=s,t.memoizedState=null,s}function Bs(e,t){return t=lo({mode:"visible",children:t},e.mode,0,null),t.return=e,e.child=t}function Zi(e,t,r,s){return s!==null&&ms(s),or(t,e.child,null,r),e=Bs(t,t.pendingProps.children),e.flags|=2,t.memoizedState=null,e}function ip(e,t,r,s,d,m,S){if(r)return t.flags&256?(t.flags&=-257,s=As(Error(o(422))),Zi(e,t,S,s)):t.memoizedState!==null?(t.child=e.child,t.flags|=128,null):(m=s.fallback,d=t.mode,s=lo({mode:"visible",children:s.children},d,0,null),m=Hn(m,d,S,null),m.flags|=2,s.return=t,m.return=t,s.sibling=m,t.child=s,(t.mode&1)!==0&&or(t,e.child,null,S),t.child.memoizedState=Us(S),t.memoizedState=Ms,m);if((t.mode&1)===0)return Zi(e,t,S,null);if(d.data==="$!"){if(s=d.nextSibling&&d.nextSibling.dataset,s)var D=s.dgst;return s=D,m=Error(o(419)),s=As(m,s,void 0),Zi(e,t,S,s)}if(D=(S&e.childLanes)!==0,vt||D){if(s=tt,s!==null){switch(S&-S){case 4:d=2;break;case 16:d=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:d=32;break;case 536870912:d=268435456;break;default:d=0}d=(d&(s.suspendedLanes|S))!==0?0:d,d!==0&&d!==m.retryLane&&(m.retryLane=d,rn(e,d),qt(s,e,d,-1))}return ia(),s=As(Error(o(421))),Zi(e,t,S,s)}return d.data==="$?"?(t.flags|=128,t.child=e.child,t=yp.bind(null,e),d._reactRetry=t,null):(e=m.treeContext,jt=hn(d.nextSibling),Ct=t,qe=!0,Ut=null,e!==null&&(Et[Ot++]=tn,Et[Ot++]=nn,Et[Ot++]=Dn,tn=e.id,nn=e.overflow,Dn=t),t=Bs(t,s.children),t.flags|=4096,t)}function Ku(e,t,r){e.lanes|=t;var s=e.alternate;s!==null&&(s.lanes|=t),_s(e.return,t,r)}function Hs(e,t,r,s,d){var m=e.memoizedState;m===null?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:s,tail:r,tailMode:d}:(m.isBackwards=t,m.rendering=null,m.renderingStartTime=0,m.last=s,m.tail=r,m.tailMode=d)}function Xu(e,t,r){var s=t.pendingProps,d=s.revealOrder,m=s.tail;if(pt(e,t,s.children,r),s=Ve.current,(s&2)!==0)s=s&1|2,t.flags|=128;else{if(e!==null&&(e.flags&128)!==0)e:for(e=t.child;e!==null;){if(e.tag===13)e.memoizedState!==null&&Ku(e,r,t);else if(e.tag===19)Ku(e,r,t);else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;e.sibling===null;){if(e.return===null||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}s&=1}if(Ue(Ve,s),(t.mode&1)===0)t.memoizedState=null;else switch(d){case"forwards":for(r=t.child,d=null;r!==null;)e=r.alternate,e!==null&&Bi(e)===null&&(d=r),r=r.sibling;r=d,r===null?(d=t.child,t.child=null):(d=r.sibling,r.sibling=null),Hs(t,!1,d,r,m);break;case"backwards":for(r=null,d=t.child,t.child=null;d!==null;){if(e=d.alternate,e!==null&&Bi(e)===null){t.child=d;break}e=d.sibling,d.sibling=r,r=d,d=e}Hs(t,!0,r,null,m);break;case"together":Hs(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function Qi(e,t){(t.mode&1)===0&&e!==null&&(e.alternate=null,t.alternate=null,t.flags|=2)}function sn(e,t,r){if(e!==null&&(t.dependencies=e.dependencies),Fn|=t.lanes,(r&t.childLanes)===0)return null;if(e!==null&&t.child!==e.child)throw Error(o(153));if(t.child!==null){for(e=t.child,r=Cn(e,e.pendingProps),t.child=r,r.return=t;e.sibling!==null;)e=e.sibling,r=r.sibling=Cn(e,e.pendingProps),r.return=t;r.sibling=null}return t.child}function op(e,t,r){switch(t.tag){case 3:Yu(t),ir();break;case 5:fu(t);break;case 1:yt(t.type)&&Ii(t);break;case 4:xs(t,t.stateNode.containerInfo);break;case 10:var s=t.type._context,d=t.memoizedProps.value;Ue(zi,s._currentValue),s._currentValue=d;break;case 13:if(s=t.memoizedState,s!==null)return s.dehydrated!==null?(Ue(Ve,Ve.current&1),t.flags|=128,null):(r&t.child.childLanes)!==0?Qu(e,t,r):(Ue(Ve,Ve.current&1),e=sn(e,t,r),e!==null?e.sibling:null);Ue(Ve,Ve.current&1);break;case 19:if(s=(r&t.childLanes)!==0,(e.flags&128)!==0){if(s)return Xu(e,t,r);t.flags|=128}if(d=t.memoizedState,d!==null&&(d.rendering=null,d.tail=null,d.lastEffect=null),Ue(Ve,Ve.current),s)break;return null;case 22:case 23:return t.lanes=0,qu(e,t,r)}return sn(e,t,r)}var Ju,Ws,ec,tc;Ju=function(e,t){for(var r=t.child;r!==null;){if(r.tag===5||r.tag===6)e.appendChild(r.stateNode);else if(r.tag!==4&&r.child!==null){r.child.return=r,r=r.child;continue}if(r===t)break;for(;r.sibling===null;){if(r.return===null||r.return===t)return;r=r.return}r.sibling.return=r.return,r=r.sibling}},Ws=function(){},ec=function(e,t,r,s){var d=e.memoizedProps;if(d!==s){e=t.stateNode,Ln(Zt.current);var m=null;switch(r){case"input":d=v(e,d),s=v(e,s),m=[];break;case"select":d=J({},d,{value:void 0}),s=J({},s,{value:void 0}),m=[];break;case"textarea":d=V(e,d),s=V(e,s),m=[];break;default:typeof d.onClick!="function"&&typeof s.onClick=="function"&&(e.onclick=Ei)}St(r,s);var S;r=null;for(Y in d)if(!s.hasOwnProperty(Y)&&d.hasOwnProperty(Y)&&d[Y]!=null)if(Y==="style"){var D=d[Y];for(S in D)D.hasOwnProperty(S)&&(r||(r={}),r[S]="")}else Y!=="dangerouslySetInnerHTML"&&Y!=="children"&&Y!=="suppressContentEditableWarning"&&Y!=="suppressHydrationWarning"&&Y!=="autoFocus"&&(a.hasOwnProperty(Y)?m||(m=[]):(m=m||[]).push(Y,null));for(Y in s){var A=s[Y];if(D=d!=null?d[Y]:void 0,s.hasOwnProperty(Y)&&A!==D&&(A!=null||D!=null))if(Y==="style")if(D){for(S in D)!D.hasOwnProperty(S)||A&&A.hasOwnProperty(S)||(r||(r={}),r[S]="");for(S in A)A.hasOwnProperty(S)&&D[S]!==A[S]&&(r||(r={}),r[S]=A[S])}else r||(m||(m=[]),m.push(Y,r)),r=A;else Y==="dangerouslySetInnerHTML"?(A=A?A.__html:void 0,D=D?D.__html:void 0,A!=null&&D!==A&&(m=m||[]).push(Y,A)):Y==="children"?typeof A!="string"&&typeof A!="number"||(m=m||[]).push(Y,""+A):Y!=="suppressContentEditableWarning"&&Y!=="suppressHydrationWarning"&&(a.hasOwnProperty(Y)?(A!=null&&Y==="onScroll"&&Be("scroll",e),m||D===A||(m=[])):(m=m||[]).push(Y,A))}r&&(m=m||[]).push("style",r);var Y=m;(t.updateQueue=Y)&&(t.flags|=4)}},tc=function(e,t,r,s){r!==s&&(t.flags|=4)};function Kr(e,t){if(!qe)switch(e.tailMode){case"hidden":t=e.tail;for(var r=null;t!==null;)t.alternate!==null&&(r=t),t=t.sibling;r===null?e.tail=null:r.sibling=null;break;case"collapsed":r=e.tail;for(var s=null;r!==null;)r.alternate!==null&&(s=r),r=r.sibling;s===null?t||e.tail===null?e.tail=null:e.tail.sibling=null:s.sibling=null}}function ct(e){var t=e.alternate!==null&&e.alternate.child===e.child,r=0,s=0;if(t)for(var d=e.child;d!==null;)r|=d.lanes|d.childLanes,s|=d.subtreeFlags&14680064,s|=d.flags&14680064,d.return=e,d=d.sibling;else for(d=e.child;d!==null;)r|=d.lanes|d.childLanes,s|=d.subtreeFlags,s|=d.flags,d.return=e,d=d.sibling;return e.subtreeFlags|=s,e.childLanes=r,t}function sp(e,t,r){var s=t.pendingProps;switch(fs(t),t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return ct(t),null;case 1:return yt(t.type)&&Pi(),ct(t),null;case 3:return s=t.stateNode,lr(),He(gt),He(lt),Cs(),s.pendingContext&&(s.context=s.pendingContext,s.pendingContext=null),(e===null||e.child===null)&&(Ai(t)?t.flags|=4:e===null||e.memoizedState.isDehydrated&&(t.flags&256)===0||(t.flags|=1024,Ut!==null&&(ta(Ut),Ut=null))),Ws(e,t),ct(t),null;case 5:Ss(t);var d=Ln(Vr.current);if(r=t.type,e!==null&&t.stateNode!=null)ec(e,t,r,s,d),e.ref!==t.ref&&(t.flags|=512,t.flags|=2097152);else{if(!s){if(t.stateNode===null)throw Error(o(166));return ct(t),null}if(e=Ln(Zt.current),Ai(t)){s=t.stateNode,r=t.type;var m=t.memoizedProps;switch(s[Yt]=t,s[Ur]=m,e=(t.mode&1)!==0,r){case"dialog":Be("cancel",s),Be("close",s);break;case"iframe":case"object":case"embed":Be("load",s);break;case"video":case"audio":for(d=0;d<zr.length;d++)Be(zr[d],s);break;case"source":Be("error",s);break;case"img":case"image":case"link":Be("error",s),Be("load",s);break;case"details":Be("toggle",s);break;case"input":ie(s,m),Be("invalid",s);break;case"select":s._wrapperState={wasMultiple:!!m.multiple},Be("invalid",s);break;case"textarea":he(s,m),Be("invalid",s)}St(r,m),d=null;for(var S in m)if(m.hasOwnProperty(S)){var D=m[S];S==="children"?typeof D=="string"?s.textContent!==D&&(m.suppressHydrationWarning!==!0&&Ni(s.textContent,D,e),d=["children",D]):typeof D=="number"&&s.textContent!==""+D&&(m.suppressHydrationWarning!==!0&&Ni(s.textContent,D,e),d=["children",""+D]):a.hasOwnProperty(S)&&D!=null&&S==="onScroll"&&Be("scroll",s)}switch(r){case"input":Me(s),I(s,m,!0);break;case"textarea":Me(s),ge(s);break;case"select":case"option":break;default:typeof m.onClick=="function"&&(s.onclick=Ei)}s=d,t.updateQueue=s,s!==null&&(t.flags|=4)}else{S=d.nodeType===9?d:d.ownerDocument,e==="http://www.w3.org/1999/xhtml"&&(e=je(r)),e==="http://www.w3.org/1999/xhtml"?r==="script"?(e=S.createElement("div"),e.innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):typeof s.is=="string"?e=S.createElement(r,{is:s.is}):(e=S.createElement(r),r==="select"&&(S=e,s.multiple?S.multiple=!0:s.size&&(S.size=s.size))):e=S.createElementNS(e,r),e[Yt]=t,e[Ur]=s,Ju(e,t,!1,!1),t.stateNode=e;e:{switch(S=qn(r,s),r){case"dialog":Be("cancel",e),Be("close",e),d=s;break;case"iframe":case"object":case"embed":Be("load",e),d=s;break;case"video":case"audio":for(d=0;d<zr.length;d++)Be(zr[d],e);d=s;break;case"source":Be("error",e),d=s;break;case"img":case"image":case"link":Be("error",e),Be("load",e),d=s;break;case"details":Be("toggle",e),d=s;break;case"input":ie(e,s),d=v(e,s),Be("invalid",e);break;case"option":d=s;break;case"select":e._wrapperState={wasMultiple:!!s.multiple},d=J({},s,{value:void 0}),Be("invalid",e);break;case"textarea":he(e,s),d=V(e,s),Be("invalid",e);break;default:d=s}St(r,d),D=d;for(m in D)if(D.hasOwnProperty(m)){var A=D[m];m==="style"?En(e,A):m==="dangerouslySetInnerHTML"?(A=A?A.__html:void 0,A!=null&&ft(e,A)):m==="children"?typeof A=="string"?(r!=="textarea"||A!=="")&&zt(e,A):typeof A=="number"&&zt(e,""+A):m!=="suppressContentEditableWarning"&&m!=="suppressHydrationWarning"&&m!=="autoFocus"&&(a.hasOwnProperty(m)?A!=null&&m==="onScroll"&&Be("scroll",e):A!=null&&R(e,m,A,S))}switch(r){case"input":Me(e),I(e,s,!1);break;case"textarea":Me(e),ge(e);break;case"option":s.value!=null&&e.setAttribute("value",""+be(s.value));break;case"select":e.multiple=!!s.multiple,m=s.value,m!=null?ae(e,!!s.multiple,m,!1):s.defaultValue!=null&&ae(e,!!s.multiple,s.defaultValue,!0);break;default:typeof d.onClick=="function"&&(e.onclick=Ei)}switch(r){case"button":case"input":case"select":case"textarea":s=!!s.autoFocus;break e;case"img":s=!0;break e;default:s=!1}}s&&(t.flags|=4)}t.ref!==null&&(t.flags|=512,t.flags|=2097152)}return ct(t),null;case 6:if(e&&t.stateNode!=null)tc(e,t,e.memoizedProps,s);else{if(typeof s!="string"&&t.stateNode===null)throw Error(o(166));if(r=Ln(Vr.current),Ln(Zt.current),Ai(t)){if(s=t.stateNode,r=t.memoizedProps,s[Yt]=t,(m=s.nodeValue!==r)&&(e=Ct,e!==null))switch(e.tag){case 3:Ni(s.nodeValue,r,(e.mode&1)!==0);break;case 5:e.memoizedProps.suppressHydrationWarning!==!0&&Ni(s.nodeValue,r,(e.mode&1)!==0)}m&&(t.flags|=4)}else s=(r.nodeType===9?r:r.ownerDocument).createTextNode(s),s[Yt]=t,t.stateNode=s}return ct(t),null;case 13:if(He(Ve),s=t.memoizedState,e===null||e.memoizedState!==null&&e.memoizedState.dehydrated!==null){if(qe&&jt!==null&&(t.mode&1)!==0&&(t.flags&128)===0)iu(),ir(),t.flags|=98560,m=!1;else if(m=Ai(t),s!==null&&s.dehydrated!==null){if(e===null){if(!m)throw Error(o(318));if(m=t.memoizedState,m=m!==null?m.dehydrated:null,!m)throw Error(o(317));m[Yt]=t}else ir(),(t.flags&128)===0&&(t.memoizedState=null),t.flags|=4;ct(t),m=!1}else Ut!==null&&(ta(Ut),Ut=null),m=!0;if(!m)return t.flags&65536?t:null}return(t.flags&128)!==0?(t.lanes=r,t):(s=s!==null,s!==(e!==null&&e.memoizedState!==null)&&s&&(t.child.flags|=8192,(t.mode&1)!==0&&(e===null||(Ve.current&1)!==0?Je===0&&(Je=3):ia())),t.updateQueue!==null&&(t.flags|=4),ct(t),null);case 4:return lr(),Ws(e,t),e===null&&Fr(t.stateNode.containerInfo),ct(t),null;case 10:return vs(t.type._context),ct(t),null;case 17:return yt(t.type)&&Pi(),ct(t),null;case 19:if(He(Ve),m=t.memoizedState,m===null)return ct(t),null;if(s=(t.flags&128)!==0,S=m.rendering,S===null)if(s)Kr(m,!1);else{if(Je!==0||e!==null&&(e.flags&128)!==0)for(e=t.child;e!==null;){if(S=Bi(e),S!==null){for(t.flags|=128,Kr(m,!1),s=S.updateQueue,s!==null&&(t.updateQueue=s,t.flags|=4),t.subtreeFlags=0,s=r,r=t.child;r!==null;)m=r,e=s,m.flags&=14680066,S=m.alternate,S===null?(m.childLanes=0,m.lanes=e,m.child=null,m.subtreeFlags=0,m.memoizedProps=null,m.memoizedState=null,m.updateQueue=null,m.dependencies=null,m.stateNode=null):(m.childLanes=S.childLanes,m.lanes=S.lanes,m.child=S.child,m.subtreeFlags=0,m.deletions=null,m.memoizedProps=S.memoizedProps,m.memoizedState=S.memoizedState,m.updateQueue=S.updateQueue,m.type=S.type,e=S.dependencies,m.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext}),r=r.sibling;return Ue(Ve,Ve.current&1|2),t.child}e=e.sibling}m.tail!==null&&Ze()>fr&&(t.flags|=128,s=!0,Kr(m,!1),t.lanes=4194304)}else{if(!s)if(e=Bi(S),e!==null){if(t.flags|=128,s=!0,r=e.updateQueue,r!==null&&(t.updateQueue=r,t.flags|=4),Kr(m,!0),m.tail===null&&m.tailMode==="hidden"&&!S.alternate&&!qe)return ct(t),null}else 2*Ze()-m.renderingStartTime>fr&&r!==1073741824&&(t.flags|=128,s=!0,Kr(m,!1),t.lanes=4194304);m.isBackwards?(S.sibling=t.child,t.child=S):(r=m.last,r!==null?r.sibling=S:t.child=S,m.last=S)}return m.tail!==null?(t=m.tail,m.rendering=t,m.tail=t.sibling,m.renderingStartTime=Ze(),t.sibling=null,r=Ve.current,Ue(Ve,s?r&1|2:r&1),t):(ct(t),null);case 22:case 23:return ra(),s=t.memoizedState!==null,e!==null&&e.memoizedState!==null!==s&&(t.flags|=8192),s&&(t.mode&1)!==0?(Tt&1073741824)!==0&&(ct(t),t.subtreeFlags&6&&(t.flags|=8192)):ct(t),null;case 24:return null;case 25:return null}throw Error(o(156,t.tag))}function ap(e,t){switch(fs(t),t.tag){case 1:return yt(t.type)&&Pi(),e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 3:return lr(),He(gt),He(lt),Cs(),e=t.flags,(e&65536)!==0&&(e&128)===0?(t.flags=e&-65537|128,t):null;case 5:return Ss(t),null;case 13:if(He(Ve),e=t.memoizedState,e!==null&&e.dehydrated!==null){if(t.alternate===null)throw Error(o(340));ir()}return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 19:return He(Ve),null;case 4:return lr(),null;case 10:return vs(t.type._context),null;case 22:case 23:return ra(),null;case 24:return null;default:return null}}var Ki=!1,dt=!1,lp=typeof WeakSet=="function"?WeakSet:Set,we=null;function cr(e,t){var r=e.ref;if(r!==null)if(typeof r=="function")try{r(null)}catch(s){Ye(e,t,s)}else r.current=null}function qs(e,t,r){try{r()}catch(s){Ye(e,t,s)}}var nc=!1;function up(e,t){if(rs=yi,e=Dl(),Zo(e)){if("selectionStart"in e)var r={start:e.selectionStart,end:e.selectionEnd};else e:{r=(r=e.ownerDocument)&&r.defaultView||window;var s=r.getSelection&&r.getSelection();if(s&&s.rangeCount!==0){r=s.anchorNode;var d=s.anchorOffset,m=s.focusNode;s=s.focusOffset;try{r.nodeType,m.nodeType}catch{r=null;break e}var S=0,D=-1,A=-1,Y=0,ue=0,de=e,le=null;t:for(;;){for(var ve;de!==r||d!==0&&de.nodeType!==3||(D=S+d),de!==m||s!==0&&de.nodeType!==3||(A=S+s),de.nodeType===3&&(S+=de.nodeValue.length),(ve=de.firstChild)!==null;)le=de,de=ve;for(;;){if(de===e)break t;if(le===r&&++Y===d&&(D=S),le===m&&++ue===s&&(A=S),(ve=de.nextSibling)!==null)break;de=le,le=de.parentNode}de=ve}r=D===-1||A===-1?null:{start:D,end:A}}else r=null}r=r||{start:0,end:0}}else r=null;for(is={focusedElem:e,selectionRange:r},yi=!1,we=t;we!==null;)if(t=we,e=t.child,(t.subtreeFlags&1028)!==0&&e!==null)e.return=t,we=e;else for(;we!==null;){t=we;try{var xe=t.alternate;if((t.flags&1024)!==0)switch(t.tag){case 0:case 11:case 15:break;case 1:if(xe!==null){var Se=xe.memoizedProps,Qe=xe.memoizedState,W=t.stateNode,F=W.getSnapshotBeforeUpdate(t.elementType===t.type?Se:Bt(t.type,Se),Qe);W.__reactInternalSnapshotBeforeUpdate=F}break;case 3:var q=t.stateNode.containerInfo;q.nodeType===1?q.textContent="":q.nodeType===9&&q.documentElement&&q.removeChild(q.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(o(163))}}catch(me){Ye(t,t.return,me)}if(e=t.sibling,e!==null){e.return=t.return,we=e;break}we=t.return}return xe=nc,nc=!1,xe}function Xr(e,t,r){var s=t.updateQueue;if(s=s!==null?s.lastEffect:null,s!==null){var d=s=s.next;do{if((d.tag&e)===e){var m=d.destroy;d.destroy=void 0,m!==void 0&&qs(t,r,m)}d=d.next}while(d!==s)}}function Xi(e,t){if(t=t.updateQueue,t=t!==null?t.lastEffect:null,t!==null){var r=t=t.next;do{if((r.tag&e)===e){var s=r.create;r.destroy=s()}r=r.next}while(r!==t)}}function Vs(e){var t=e.ref;if(t!==null){var r=e.stateNode;switch(e.tag){case 5:e=r;break;default:e=r}typeof t=="function"?t(e):t.current=e}}function rc(e){var t=e.alternate;t!==null&&(e.alternate=null,rc(t)),e.child=null,e.deletions=null,e.sibling=null,e.tag===5&&(t=e.stateNode,t!==null&&(delete t[Yt],delete t[Ur],delete t[ls],delete t[qf],delete t[Vf])),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function ic(e){return e.tag===5||e.tag===3||e.tag===4}function oc(e){e:for(;;){for(;e.sibling===null;){if(e.return===null||ic(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;e.tag!==5&&e.tag!==6&&e.tag!==18;){if(e.flags&2||e.child===null||e.tag===4)continue e;e.child.return=e,e=e.child}if(!(e.flags&2))return e.stateNode}}function Gs(e,t,r){var s=e.tag;if(s===5||s===6)e=e.stateNode,t?r.nodeType===8?r.parentNode.insertBefore(e,t):r.insertBefore(e,t):(r.nodeType===8?(t=r.parentNode,t.insertBefore(e,r)):(t=r,t.appendChild(e)),r=r._reactRootContainer,r!=null||t.onclick!==null||(t.onclick=Ei));else if(s!==4&&(e=e.child,e!==null))for(Gs(e,t,r),e=e.sibling;e!==null;)Gs(e,t,r),e=e.sibling}function Ys(e,t,r){var s=e.tag;if(s===5||s===6)e=e.stateNode,t?r.insertBefore(e,t):r.appendChild(e);else if(s!==4&&(e=e.child,e!==null))for(Ys(e,t,r),e=e.sibling;e!==null;)Ys(e,t,r),e=e.sibling}var rt=null,Ht=!1;function wn(e,t,r){for(r=r.child;r!==null;)sc(e,t,r),r=r.sibling}function sc(e,t,r){if(Gt&&typeof Gt.onCommitFiberUnmount=="function")try{Gt.onCommitFiberUnmount(di,r)}catch{}switch(r.tag){case 5:dt||cr(r,t);case 6:var s=rt,d=Ht;rt=null,wn(e,t,r),rt=s,Ht=d,rt!==null&&(Ht?(e=rt,r=r.stateNode,e.nodeType===8?e.parentNode.removeChild(r):e.removeChild(r)):rt.removeChild(r.stateNode));break;case 18:rt!==null&&(Ht?(e=rt,r=r.stateNode,e.nodeType===8?as(e.parentNode,r):e.nodeType===1&&as(e,r),Or(e)):as(rt,r.stateNode));break;case 4:s=rt,d=Ht,rt=r.stateNode.containerInfo,Ht=!0,wn(e,t,r),rt=s,Ht=d;break;case 0:case 11:case 14:case 15:if(!dt&&(s=r.updateQueue,s!==null&&(s=s.lastEffect,s!==null))){d=s=s.next;do{var m=d,S=m.destroy;m=m.tag,S!==void 0&&((m&2)!==0||(m&4)!==0)&&qs(r,t,S),d=d.next}while(d!==s)}wn(e,t,r);break;case 1:if(!dt&&(cr(r,t),s=r.stateNode,typeof s.componentWillUnmount=="function"))try{s.props=r.memoizedProps,s.state=r.memoizedState,s.componentWillUnmount()}catch(D){Ye(r,t,D)}wn(e,t,r);break;case 21:wn(e,t,r);break;case 22:r.mode&1?(dt=(s=dt)||r.memoizedState!==null,wn(e,t,r),dt=s):wn(e,t,r);break;default:wn(e,t,r)}}function ac(e){var t=e.updateQueue;if(t!==null){e.updateQueue=null;var r=e.stateNode;r===null&&(r=e.stateNode=new lp),t.forEach(function(s){var d=vp.bind(null,e,s);r.has(s)||(r.add(s),s.then(d,d))})}}function Wt(e,t){var r=t.deletions;if(r!==null)for(var s=0;s<r.length;s++){var d=r[s];try{var m=e,S=t,D=S;e:for(;D!==null;){switch(D.tag){case 5:rt=D.stateNode,Ht=!1;break e;case 3:rt=D.stateNode.containerInfo,Ht=!0;break e;case 4:rt=D.stateNode.containerInfo,Ht=!0;break e}D=D.return}if(rt===null)throw Error(o(160));sc(m,S,d),rt=null,Ht=!1;var A=d.alternate;A!==null&&(A.return=null),d.return=null}catch(Y){Ye(d,t,Y)}}if(t.subtreeFlags&12854)for(t=t.child;t!==null;)lc(t,e),t=t.sibling}function lc(e,t){var r=e.alternate,s=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:if(Wt(t,e),Kt(e),s&4){try{Xr(3,e,e.return),Xi(3,e)}catch(Se){Ye(e,e.return,Se)}try{Xr(5,e,e.return)}catch(Se){Ye(e,e.return,Se)}}break;case 1:Wt(t,e),Kt(e),s&512&&r!==null&&cr(r,r.return);break;case 5:if(Wt(t,e),Kt(e),s&512&&r!==null&&cr(r,r.return),e.flags&32){var d=e.stateNode;try{zt(d,"")}catch(Se){Ye(e,e.return,Se)}}if(s&4&&(d=e.stateNode,d!=null)){var m=e.memoizedProps,S=r!==null?r.memoizedProps:m,D=e.type,A=e.updateQueue;if(e.updateQueue=null,A!==null)try{D==="input"&&m.type==="radio"&&m.name!=null&&X(d,m),qn(D,S);var Y=qn(D,m);for(S=0;S<A.length;S+=2){var ue=A[S],de=A[S+1];ue==="style"?En(d,de):ue==="dangerouslySetInnerHTML"?ft(d,de):ue==="children"?zt(d,de):R(d,ue,de,Y)}switch(D){case"input":$(d,m);break;case"textarea":_e(d,m);break;case"select":var le=d._wrapperState.wasMultiple;d._wrapperState.wasMultiple=!!m.multiple;var ve=m.value;ve!=null?ae(d,!!m.multiple,ve,!1):le!==!!m.multiple&&(m.defaultValue!=null?ae(d,!!m.multiple,m.defaultValue,!0):ae(d,!!m.multiple,m.multiple?[]:"",!1))}d[Ur]=m}catch(Se){Ye(e,e.return,Se)}}break;case 6:if(Wt(t,e),Kt(e),s&4){if(e.stateNode===null)throw Error(o(162));d=e.stateNode,m=e.memoizedProps;try{d.nodeValue=m}catch(Se){Ye(e,e.return,Se)}}break;case 3:if(Wt(t,e),Kt(e),s&4&&r!==null&&r.memoizedState.isDehydrated)try{Or(t.containerInfo)}catch(Se){Ye(e,e.return,Se)}break;case 4:Wt(t,e),Kt(e);break;case 13:Wt(t,e),Kt(e),d=e.child,d.flags&8192&&(m=d.memoizedState!==null,d.stateNode.isHidden=m,!m||d.alternate!==null&&d.alternate.memoizedState!==null||(Ks=Ze())),s&4&&ac(e);break;case 22:if(ue=r!==null&&r.memoizedState!==null,e.mode&1?(dt=(Y=dt)||ue,Wt(t,e),dt=Y):Wt(t,e),Kt(e),s&8192){if(Y=e.memoizedState!==null,(e.stateNode.isHidden=Y)&&!ue&&(e.mode&1)!==0)for(we=e,ue=e.child;ue!==null;){for(de=we=ue;we!==null;){switch(le=we,ve=le.child,le.tag){case 0:case 11:case 14:case 15:Xr(4,le,le.return);break;case 1:cr(le,le.return);var xe=le.stateNode;if(typeof xe.componentWillUnmount=="function"){s=le,r=le.return;try{t=s,xe.props=t.memoizedProps,xe.state=t.memoizedState,xe.componentWillUnmount()}catch(Se){Ye(s,r,Se)}}break;case 5:cr(le,le.return);break;case 22:if(le.memoizedState!==null){dc(de);continue}}ve!==null?(ve.return=le,we=ve):dc(de)}ue=ue.sibling}e:for(ue=null,de=e;;){if(de.tag===5){if(ue===null){ue=de;try{d=de.stateNode,Y?(m=d.style,typeof m.setProperty=="function"?m.setProperty("display","none","important"):m.display="none"):(D=de.stateNode,A=de.memoizedProps.style,S=A!=null&&A.hasOwnProperty("display")?A.display:null,D.style.display=We("display",S))}catch(Se){Ye(e,e.return,Se)}}}else if(de.tag===6){if(ue===null)try{de.stateNode.nodeValue=Y?"":de.memoizedProps}catch(Se){Ye(e,e.return,Se)}}else if((de.tag!==22&&de.tag!==23||de.memoizedState===null||de===e)&&de.child!==null){de.child.return=de,de=de.child;continue}if(de===e)break e;for(;de.sibling===null;){if(de.return===null||de.return===e)break e;ue===de&&(ue=null),de=de.return}ue===de&&(ue=null),de.sibling.return=de.return,de=de.sibling}}break;case 19:Wt(t,e),Kt(e),s&4&&ac(e);break;case 21:break;default:Wt(t,e),Kt(e)}}function Kt(e){var t=e.flags;if(t&2){try{e:{for(var r=e.return;r!==null;){if(ic(r)){var s=r;break e}r=r.return}throw Error(o(160))}switch(s.tag){case 5:var d=s.stateNode;s.flags&32&&(zt(d,""),s.flags&=-33);var m=oc(e);Ys(e,m,d);break;case 3:case 4:var S=s.stateNode.containerInfo,D=oc(e);Gs(e,D,S);break;default:throw Error(o(161))}}catch(A){Ye(e,e.return,A)}e.flags&=-3}t&4096&&(e.flags&=-4097)}function cp(e,t,r){we=e,uc(e)}function uc(e,t,r){for(var s=(e.mode&1)!==0;we!==null;){var d=we,m=d.child;if(d.tag===22&&s){var S=d.memoizedState!==null||Ki;if(!S){var D=d.alternate,A=D!==null&&D.memoizedState!==null||dt;D=Ki;var Y=dt;if(Ki=S,(dt=A)&&!Y)for(we=d;we!==null;)S=we,A=S.child,S.tag===22&&S.memoizedState!==null?fc(d):A!==null?(A.return=S,we=A):fc(d);for(;m!==null;)we=m,uc(m),m=m.sibling;we=d,Ki=D,dt=Y}cc(e)}else(d.subtreeFlags&8772)!==0&&m!==null?(m.return=d,we=m):cc(e)}}function cc(e){for(;we!==null;){var t=we;if((t.flags&8772)!==0){var r=t.alternate;try{if((t.flags&8772)!==0)switch(t.tag){case 0:case 11:case 15:dt||Xi(5,t);break;case 1:var s=t.stateNode;if(t.flags&4&&!dt)if(r===null)s.componentDidMount();else{var d=t.elementType===t.type?r.memoizedProps:Bt(t.type,r.memoizedProps);s.componentDidUpdate(d,r.memoizedState,s.__reactInternalSnapshotBeforeUpdate)}var m=t.updateQueue;m!==null&&du(t,m,s);break;case 3:var S=t.updateQueue;if(S!==null){if(r=null,t.child!==null)switch(t.child.tag){case 5:r=t.child.stateNode;break;case 1:r=t.child.stateNode}du(t,S,r)}break;case 5:var D=t.stateNode;if(r===null&&t.flags&4){r=D;var A=t.memoizedProps;switch(t.type){case"button":case"input":case"select":case"textarea":A.autoFocus&&r.focus();break;case"img":A.src&&(r.src=A.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(t.memoizedState===null){var Y=t.alternate;if(Y!==null){var ue=Y.memoizedState;if(ue!==null){var de=ue.dehydrated;de!==null&&Or(de)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(o(163))}dt||t.flags&512&&Vs(t)}catch(le){Ye(t,t.return,le)}}if(t===e){we=null;break}if(r=t.sibling,r!==null){r.return=t.return,we=r;break}we=t.return}}function dc(e){for(;we!==null;){var t=we;if(t===e){we=null;break}var r=t.sibling;if(r!==null){r.return=t.return,we=r;break}we=t.return}}function fc(e){for(;we!==null;){var t=we;try{switch(t.tag){case 0:case 11:case 15:var r=t.return;try{Xi(4,t)}catch(A){Ye(t,r,A)}break;case 1:var s=t.stateNode;if(typeof s.componentDidMount=="function"){var d=t.return;try{s.componentDidMount()}catch(A){Ye(t,d,A)}}var m=t.return;try{Vs(t)}catch(A){Ye(t,m,A)}break;case 5:var S=t.return;try{Vs(t)}catch(A){Ye(t,S,A)}}}catch(A){Ye(t,t.return,A)}if(t===e){we=null;break}var D=t.sibling;if(D!==null){D.return=t.return,we=D;break}we=t.return}}var dp=Math.ceil,Ji=z.ReactCurrentDispatcher,Zs=z.ReactCurrentOwner,Rt=z.ReactCurrentBatchConfig,$e=0,tt=null,Ke=null,it=0,Tt=0,dr=mn(0),Je=0,Jr=null,Fn=0,eo=0,Qs=0,ei=null,_t=null,Ks=0,fr=1/0,an=null,to=!1,Xs=null,bn=null,no=!1,xn=null,ro=0,ti=0,Js=null,io=-1,oo=0;function ht(){return($e&6)!==0?Ze():io!==-1?io:io=Ze()}function Sn(e){return(e.mode&1)===0?1:($e&2)!==0&&it!==0?it&-it:Yf.transition!==null?(oo===0&&(oo=ol()),oo):(e=Fe,e!==0||(e=window.event,e=e===void 0?16:hl(e.type)),e)}function qt(e,t,r,s){if(50<ti)throw ti=0,Js=null,Error(o(185));Cr(e,r,s),(($e&2)===0||e!==tt)&&(e===tt&&(($e&2)===0&&(eo|=r),Je===4&&kn(e,it)),wt(e,s),r===1&&$e===0&&(t.mode&1)===0&&(fr=Ze()+500,Ri&&yn()))}function wt(e,t){var r=e.callbackNode;Gd(e,t);var s=hi(e,e===tt?it:0);if(s===0)r!==null&&nl(r),e.callbackNode=null,e.callbackPriority=0;else if(t=s&-s,e.callbackPriority!==t){if(r!=null&&nl(r),t===1)e.tag===0?Gf(hc.bind(null,e)):Jl(hc.bind(null,e)),Hf(function(){($e&6)===0&&yn()}),r=null;else{switch(sl(s)){case 1:r=Io;break;case 4:r=rl;break;case 16:r=ci;break;case 536870912:r=il;break;default:r=ci}r=xc(r,pc.bind(null,e))}e.callbackPriority=t,e.callbackNode=r}}function pc(e,t){if(io=-1,oo=0,($e&6)!==0)throw Error(o(327));var r=e.callbackNode;if(pr()&&e.callbackNode!==r)return null;var s=hi(e,e===tt?it:0);if(s===0)return null;if((s&30)!==0||(s&e.expiredLanes)!==0||t)t=so(e,s);else{t=s;var d=$e;$e|=2;var m=gc();(tt!==e||it!==t)&&(an=null,fr=Ze()+500,Un(e,t));do try{hp();break}catch(D){mc(e,D)}while(!0);ys(),Ji.current=m,$e=d,Ke!==null?t=0:(tt=null,it=0,t=Je)}if(t!==0){if(t===2&&(d=Ro(e),d!==0&&(s=d,t=ea(e,d))),t===1)throw r=Jr,Un(e,0),kn(e,s),wt(e,Ze()),r;if(t===6)kn(e,s);else{if(d=e.current.alternate,(s&30)===0&&!fp(d)&&(t=so(e,s),t===2&&(m=Ro(e),m!==0&&(s=m,t=ea(e,m))),t===1))throw r=Jr,Un(e,0),kn(e,s),wt(e,Ze()),r;switch(e.finishedWork=d,e.finishedLanes=s,t){case 0:case 1:throw Error(o(345));case 2:Bn(e,_t,an);break;case 3:if(kn(e,s),(s&130023424)===s&&(t=Ks+500-Ze(),10<t)){if(hi(e,0)!==0)break;if(d=e.suspendedLanes,(d&s)!==s){ht(),e.pingedLanes|=e.suspendedLanes&d;break}e.timeoutHandle=ss(Bn.bind(null,e,_t,an),t);break}Bn(e,_t,an);break;case 4:if(kn(e,s),(s&4194240)===s)break;for(t=e.eventTimes,d=-1;0<s;){var S=31-Ft(s);m=1<<S,S=t[S],S>d&&(d=S),s&=~m}if(s=d,s=Ze()-s,s=(120>s?120:480>s?480:1080>s?1080:1920>s?1920:3e3>s?3e3:4320>s?4320:1960*dp(s/1960))-s,10<s){e.timeoutHandle=ss(Bn.bind(null,e,_t,an),s);break}Bn(e,_t,an);break;case 5:Bn(e,_t,an);break;default:throw Error(o(329))}}}return wt(e,Ze()),e.callbackNode===r?pc.bind(null,e):null}function ea(e,t){var r=ei;return e.current.memoizedState.isDehydrated&&(Un(e,t).flags|=256),e=so(e,t),e!==2&&(t=_t,_t=r,t!==null&&ta(t)),e}function ta(e){_t===null?_t=e:_t.push.apply(_t,e)}function fp(e){for(var t=e;;){if(t.flags&16384){var r=t.updateQueue;if(r!==null&&(r=r.stores,r!==null))for(var s=0;s<r.length;s++){var d=r[s],m=d.getSnapshot;d=d.value;try{if(!Mt(m(),d))return!1}catch{return!1}}}if(r=t.child,t.subtreeFlags&16384&&r!==null)r.return=t,t=r;else{if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}function kn(e,t){for(t&=~Qs,t&=~eo,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var r=31-Ft(t),s=1<<r;e[r]=-1,t&=~s}}function hc(e){if(($e&6)!==0)throw Error(o(327));pr();var t=hi(e,0);if((t&1)===0)return wt(e,Ze()),null;var r=so(e,t);if(e.tag!==0&&r===2){var s=Ro(e);s!==0&&(t=s,r=ea(e,s))}if(r===1)throw r=Jr,Un(e,0),kn(e,t),wt(e,Ze()),r;if(r===6)throw Error(o(345));return e.finishedWork=e.current.alternate,e.finishedLanes=t,Bn(e,_t,an),wt(e,Ze()),null}function na(e,t){var r=$e;$e|=1;try{return e(t)}finally{$e=r,$e===0&&(fr=Ze()+500,Ri&&yn())}}function Mn(e){xn!==null&&xn.tag===0&&($e&6)===0&&pr();var t=$e;$e|=1;var r=Rt.transition,s=Fe;try{if(Rt.transition=null,Fe=1,e)return e()}finally{Fe=s,Rt.transition=r,$e=t,($e&6)===0&&yn()}}function ra(){Tt=dr.current,He(dr)}function Un(e,t){e.finishedWork=null,e.finishedLanes=0;var r=e.timeoutHandle;if(r!==-1&&(e.timeoutHandle=-1,Bf(r)),Ke!==null)for(r=Ke.return;r!==null;){var s=r;switch(fs(s),s.tag){case 1:s=s.type.childContextTypes,s!=null&&Pi();break;case 3:lr(),He(gt),He(lt),Cs();break;case 5:Ss(s);break;case 4:lr();break;case 13:He(Ve);break;case 19:He(Ve);break;case 10:vs(s.type._context);break;case 22:case 23:ra()}r=r.return}if(tt=e,Ke=e=Cn(e.current,null),it=Tt=t,Je=0,Jr=null,Qs=eo=Fn=0,_t=ei=null,An!==null){for(t=0;t<An.length;t++)if(r=An[t],s=r.interleaved,s!==null){r.interleaved=null;var d=s.next,m=r.pending;if(m!==null){var S=m.next;m.next=d,s.next=S}r.pending=s}An=null}return e}function mc(e,t){do{var r=Ke;try{if(ys(),Hi.current=Gi,Wi){for(var s=Ge.memoizedState;s!==null;){var d=s.queue;d!==null&&(d.pending=null),s=s.next}Wi=!1}if(zn=0,et=Xe=Ge=null,Gr=!1,Yr=0,Zs.current=null,r===null||r.return===null){Je=1,Jr=t,Ke=null;break}e:{var m=e,S=r.return,D=r,A=t;if(t=it,D.flags|=32768,A!==null&&typeof A=="object"&&typeof A.then=="function"){var Y=A,ue=D,de=ue.tag;if((ue.mode&1)===0&&(de===0||de===11||de===15)){var le=ue.alternate;le?(ue.updateQueue=le.updateQueue,ue.memoizedState=le.memoizedState,ue.lanes=le.lanes):(ue.updateQueue=null,ue.memoizedState=null)}var ve=Mu(S);if(ve!==null){ve.flags&=-257,Uu(ve,S,D,m,t),ve.mode&1&&Fu(m,Y,t),t=ve,A=Y;var xe=t.updateQueue;if(xe===null){var Se=new Set;Se.add(A),t.updateQueue=Se}else xe.add(A);break e}else{if((t&1)===0){Fu(m,Y,t),ia();break e}A=Error(o(426))}}else if(qe&&D.mode&1){var Qe=Mu(S);if(Qe!==null){(Qe.flags&65536)===0&&(Qe.flags|=256),Uu(Qe,S,D,m,t),ms(ur(A,D));break e}}m=A=ur(A,D),Je!==4&&(Je=2),ei===null?ei=[m]:ei.push(m),m=S;do{switch(m.tag){case 3:m.flags|=65536,t&=-t,m.lanes|=t;var W=Lu(m,A,t);cu(m,W);break e;case 1:D=A;var F=m.type,q=m.stateNode;if((m.flags&128)===0&&(typeof F.getDerivedStateFromError=="function"||q!==null&&typeof q.componentDidCatch=="function"&&(bn===null||!bn.has(q)))){m.flags|=65536,t&=-t,m.lanes|=t;var me=zu(m,D,t);cu(m,me);break e}}m=m.return}while(m!==null)}vc(r)}catch(ke){t=ke,Ke===r&&r!==null&&(Ke=r=r.return);continue}break}while(!0)}function gc(){var e=Ji.current;return Ji.current=Gi,e===null?Gi:e}function ia(){(Je===0||Je===3||Je===2)&&(Je=4),tt===null||(Fn&268435455)===0&&(eo&268435455)===0||kn(tt,it)}function so(e,t){var r=$e;$e|=2;var s=gc();(tt!==e||it!==t)&&(an=null,Un(e,t));do try{pp();break}catch(d){mc(e,d)}while(!0);if(ys(),$e=r,Ji.current=s,Ke!==null)throw Error(o(261));return tt=null,it=0,Je}function pp(){for(;Ke!==null;)yc(Ke)}function hp(){for(;Ke!==null&&!zd();)yc(Ke)}function yc(e){var t=bc(e.alternate,e,Tt);e.memoizedProps=e.pendingProps,t===null?vc(e):Ke=t,Zs.current=null}function vc(e){var t=e;do{var r=t.alternate;if(e=t.return,(t.flags&32768)===0){if(r=sp(r,t,Tt),r!==null){Ke=r;return}}else{if(r=ap(r,t),r!==null){r.flags&=32767,Ke=r;return}if(e!==null)e.flags|=32768,e.subtreeFlags=0,e.deletions=null;else{Je=6,Ke=null;return}}if(t=t.sibling,t!==null){Ke=t;return}Ke=t=e}while(t!==null);Je===0&&(Je=5)}function Bn(e,t,r){var s=Fe,d=Rt.transition;try{Rt.transition=null,Fe=1,mp(e,t,r,s)}finally{Rt.transition=d,Fe=s}return null}function mp(e,t,r,s){do pr();while(xn!==null);if(($e&6)!==0)throw Error(o(327));r=e.finishedWork;var d=e.finishedLanes;if(r===null)return null;if(e.finishedWork=null,e.finishedLanes=0,r===e.current)throw Error(o(177));e.callbackNode=null,e.callbackPriority=0;var m=r.lanes|r.childLanes;if(Yd(e,m),e===tt&&(Ke=tt=null,it=0),(r.subtreeFlags&2064)===0&&(r.flags&2064)===0||no||(no=!0,xc(ci,function(){return pr(),null})),m=(r.flags&15990)!==0,(r.subtreeFlags&15990)!==0||m){m=Rt.transition,Rt.transition=null;var S=Fe;Fe=1;var D=$e;$e|=4,Zs.current=null,up(e,r),lc(r,e),$f(is),yi=!!rs,is=rs=null,e.current=r,cp(r),Fd(),$e=D,Fe=S,Rt.transition=m}else e.current=r;if(no&&(no=!1,xn=e,ro=d),m=e.pendingLanes,m===0&&(bn=null),Bd(r.stateNode),wt(e,Ze()),t!==null)for(s=e.onRecoverableError,r=0;r<t.length;r++)d=t[r],s(d.value,{componentStack:d.stack,digest:d.digest});if(to)throw to=!1,e=Xs,Xs=null,e;return(ro&1)!==0&&e.tag!==0&&pr(),m=e.pendingLanes,(m&1)!==0?e===Js?ti++:(ti=0,Js=e):ti=0,yn(),null}function pr(){if(xn!==null){var e=sl(ro),t=Rt.transition,r=Fe;try{if(Rt.transition=null,Fe=16>e?16:e,xn===null)var s=!1;else{if(e=xn,xn=null,ro=0,($e&6)!==0)throw Error(o(331));var d=$e;for($e|=4,we=e.current;we!==null;){var m=we,S=m.child;if((we.flags&16)!==0){var D=m.deletions;if(D!==null){for(var A=0;A<D.length;A++){var Y=D[A];for(we=Y;we!==null;){var ue=we;switch(ue.tag){case 0:case 11:case 15:Xr(8,ue,m)}var de=ue.child;if(de!==null)de.return=ue,we=de;else for(;we!==null;){ue=we;var le=ue.sibling,ve=ue.return;if(rc(ue),ue===Y){we=null;break}if(le!==null){le.return=ve,we=le;break}we=ve}}}var xe=m.alternate;if(xe!==null){var Se=xe.child;if(Se!==null){xe.child=null;do{var Qe=Se.sibling;Se.sibling=null,Se=Qe}while(Se!==null)}}we=m}}if((m.subtreeFlags&2064)!==0&&S!==null)S.return=m,we=S;else e:for(;we!==null;){if(m=we,(m.flags&2048)!==0)switch(m.tag){case 0:case 11:case 15:Xr(9,m,m.return)}var W=m.sibling;if(W!==null){W.return=m.return,we=W;break e}we=m.return}}var F=e.current;for(we=F;we!==null;){S=we;var q=S.child;if((S.subtreeFlags&2064)!==0&&q!==null)q.return=S,we=q;else e:for(S=F;we!==null;){if(D=we,(D.flags&2048)!==0)try{switch(D.tag){case 0:case 11:case 15:Xi(9,D)}}catch(ke){Ye(D,D.return,ke)}if(D===S){we=null;break e}var me=D.sibling;if(me!==null){me.return=D.return,we=me;break e}we=D.return}}if($e=d,yn(),Gt&&typeof Gt.onPostCommitFiberRoot=="function")try{Gt.onPostCommitFiberRoot(di,e)}catch{}s=!0}return s}finally{Fe=r,Rt.transition=t}}return!1}function _c(e,t,r){t=ur(r,t),t=Lu(e,t,1),e=_n(e,t,1),t=ht(),e!==null&&(Cr(e,1,t),wt(e,t))}function Ye(e,t,r){if(e.tag===3)_c(e,e,r);else for(;t!==null;){if(t.tag===3){_c(t,e,r);break}else if(t.tag===1){var s=t.stateNode;if(typeof t.type.getDerivedStateFromError=="function"||typeof s.componentDidCatch=="function"&&(bn===null||!bn.has(s))){e=ur(r,e),e=zu(t,e,1),t=_n(t,e,1),e=ht(),t!==null&&(Cr(t,1,e),wt(t,e));break}}t=t.return}}function gp(e,t,r){var s=e.pingCache;s!==null&&s.delete(t),t=ht(),e.pingedLanes|=e.suspendedLanes&r,tt===e&&(it&r)===r&&(Je===4||Je===3&&(it&130023424)===it&&500>Ze()-Ks?Un(e,0):Qs|=r),wt(e,t)}function wc(e,t){t===0&&((e.mode&1)===0?t=1:(t=pi,pi<<=1,(pi&130023424)===0&&(pi=4194304)));var r=ht();e=rn(e,t),e!==null&&(Cr(e,t,r),wt(e,r))}function yp(e){var t=e.memoizedState,r=0;t!==null&&(r=t.retryLane),wc(e,r)}function vp(e,t){var r=0;switch(e.tag){case 13:var s=e.stateNode,d=e.memoizedState;d!==null&&(r=d.retryLane);break;case 19:s=e.stateNode;break;default:throw Error(o(314))}s!==null&&s.delete(t),wc(e,r)}var bc;bc=function(e,t,r){if(e!==null)if(e.memoizedProps!==t.pendingProps||gt.current)vt=!0;else{if((e.lanes&r)===0&&(t.flags&128)===0)return vt=!1,op(e,t,r);vt=(e.flags&131072)!==0}else vt=!1,qe&&(t.flags&1048576)!==0&&eu(t,$i,t.index);switch(t.lanes=0,t.tag){case 2:var s=t.type;Qi(e,t),e=t.pendingProps;var d=tr(t,lt.current);ar(t,r),d=Ns(null,t,s,e,d,r);var m=Es();return t.flags|=1,typeof d=="object"&&d!==null&&typeof d.render=="function"&&d.$$typeof===void 0?(t.tag=1,t.memoizedState=null,t.updateQueue=null,yt(s)?(m=!0,Ii(t)):m=!1,t.memoizedState=d.state!==null&&d.state!==void 0?d.state:null,bs(t),d.updater=Yi,t.stateNode=d,d._reactInternals=t,$s(t,s,e,r),t=Fs(null,t,s,!0,m,r)):(t.tag=0,qe&&m&&ds(t),pt(null,t,d,r),t=t.child),t;case 16:s=t.elementType;e:{switch(Qi(e,t),e=t.pendingProps,d=s._init,s=d(s._payload),t.type=s,d=t.tag=wp(s),e=Bt(s,e),d){case 0:t=zs(null,t,s,e,r);break e;case 1:t=Gu(null,t,s,e,r);break e;case 11:t=Bu(null,t,s,e,r);break e;case 14:t=Hu(null,t,s,Bt(s.type,e),r);break e}throw Error(o(306,s,""))}return t;case 0:return s=t.type,d=t.pendingProps,d=t.elementType===s?d:Bt(s,d),zs(e,t,s,d,r);case 1:return s=t.type,d=t.pendingProps,d=t.elementType===s?d:Bt(s,d),Gu(e,t,s,d,r);case 3:e:{if(Yu(t),e===null)throw Error(o(387));s=t.pendingProps,m=t.memoizedState,d=m.element,uu(e,t),Ui(t,s,null,r);var S=t.memoizedState;if(s=S.element,m.isDehydrated)if(m={element:s,isDehydrated:!1,cache:S.cache,pendingSuspenseBoundaries:S.pendingSuspenseBoundaries,transitions:S.transitions},t.updateQueue.baseState=m,t.memoizedState=m,t.flags&256){d=ur(Error(o(423)),t),t=Zu(e,t,s,r,d);break e}else if(s!==d){d=ur(Error(o(424)),t),t=Zu(e,t,s,r,d);break e}else for(jt=hn(t.stateNode.containerInfo.firstChild),Ct=t,qe=!0,Ut=null,r=au(t,null,s,r),t.child=r;r;)r.flags=r.flags&-3|4096,r=r.sibling;else{if(ir(),s===d){t=sn(e,t,r);break e}pt(e,t,s,r)}t=t.child}return t;case 5:return fu(t),e===null&&hs(t),s=t.type,d=t.pendingProps,m=e!==null?e.memoizedProps:null,S=d.children,os(s,d)?S=null:m!==null&&os(s,m)&&(t.flags|=32),Vu(e,t),pt(e,t,S,r),t.child;case 6:return e===null&&hs(t),null;case 13:return Qu(e,t,r);case 4:return xs(t,t.stateNode.containerInfo),s=t.pendingProps,e===null?t.child=or(t,null,s,r):pt(e,t,s,r),t.child;case 11:return s=t.type,d=t.pendingProps,d=t.elementType===s?d:Bt(s,d),Bu(e,t,s,d,r);case 7:return pt(e,t,t.pendingProps,r),t.child;case 8:return pt(e,t,t.pendingProps.children,r),t.child;case 12:return pt(e,t,t.pendingProps.children,r),t.child;case 10:e:{if(s=t.type._context,d=t.pendingProps,m=t.memoizedProps,S=d.value,Ue(zi,s._currentValue),s._currentValue=S,m!==null)if(Mt(m.value,S)){if(m.children===d.children&&!gt.current){t=sn(e,t,r);break e}}else for(m=t.child,m!==null&&(m.return=t);m!==null;){var D=m.dependencies;if(D!==null){S=m.child;for(var A=D.firstContext;A!==null;){if(A.context===s){if(m.tag===1){A=on(-1,r&-r),A.tag=2;var Y=m.updateQueue;if(Y!==null){Y=Y.shared;var ue=Y.pending;ue===null?A.next=A:(A.next=ue.next,ue.next=A),Y.pending=A}}m.lanes|=r,A=m.alternate,A!==null&&(A.lanes|=r),_s(m.return,r,t),D.lanes|=r;break}A=A.next}}else if(m.tag===10)S=m.type===t.type?null:m.child;else if(m.tag===18){if(S=m.return,S===null)throw Error(o(341));S.lanes|=r,D=S.alternate,D!==null&&(D.lanes|=r),_s(S,r,t),S=m.sibling}else S=m.child;if(S!==null)S.return=m;else for(S=m;S!==null;){if(S===t){S=null;break}if(m=S.sibling,m!==null){m.return=S.return,S=m;break}S=S.return}m=S}pt(e,t,d.children,r),t=t.child}return t;case 9:return d=t.type,s=t.pendingProps.children,ar(t,r),d=Pt(d),s=s(d),t.flags|=1,pt(e,t,s,r),t.child;case 14:return s=t.type,d=Bt(s,t.pendingProps),d=Bt(s.type,d),Hu(e,t,s,d,r);case 15:return Wu(e,t,t.type,t.pendingProps,r);case 17:return s=t.type,d=t.pendingProps,d=t.elementType===s?d:Bt(s,d),Qi(e,t),t.tag=1,yt(s)?(e=!0,Ii(t)):e=!1,ar(t,r),$u(t,s,d),$s(t,s,d,r),Fs(null,t,s,!0,e,r);case 19:return Xu(e,t,r);case 22:return qu(e,t,r)}throw Error(o(156,t.tag))};function xc(e,t){return tl(e,t)}function _p(e,t,r,s){this.tag=e,this.key=r,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=s,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Dt(e,t,r,s){return new _p(e,t,r,s)}function oa(e){return e=e.prototype,!(!e||!e.isReactComponent)}function wp(e){if(typeof e=="function")return oa(e)?1:0;if(e!=null){if(e=e.$$typeof,e===N)return 11;if(e===G)return 14}return 2}function Cn(e,t){var r=e.alternate;return r===null?(r=Dt(e.tag,t,e.key,e.mode),r.elementType=e.elementType,r.type=e.type,r.stateNode=e.stateNode,r.alternate=e,e.alternate=r):(r.pendingProps=t,r.type=e.type,r.flags=0,r.subtreeFlags=0,r.deletions=null),r.flags=e.flags&14680064,r.childLanes=e.childLanes,r.lanes=e.lanes,r.child=e.child,r.memoizedProps=e.memoizedProps,r.memoizedState=e.memoizedState,r.updateQueue=e.updateQueue,t=e.dependencies,r.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext},r.sibling=e.sibling,r.index=e.index,r.ref=e.ref,r}function ao(e,t,r,s,d,m){var S=2;if(s=e,typeof e=="function")oa(e)&&(S=1);else if(typeof e=="string")S=5;else e:switch(e){case Z:return Hn(r.children,d,m,t);case ne:S=8,d|=8;break;case U:return e=Dt(12,r,t,d|2),e.elementType=U,e.lanes=m,e;case L:return e=Dt(13,r,t,d),e.elementType=L,e.lanes=m,e;case b:return e=Dt(19,r,t,d),e.elementType=b,e.lanes=m,e;case ee:return lo(r,d,m,t);default:if(typeof e=="object"&&e!==null)switch(e.$$typeof){case Q:S=10;break e;case ce:S=9;break e;case N:S=11;break e;case G:S=14;break e;case ye:S=16,s=null;break e}throw Error(o(130,e==null?e:typeof e,""))}return t=Dt(S,r,t,d),t.elementType=e,t.type=s,t.lanes=m,t}function Hn(e,t,r,s){return e=Dt(7,e,s,t),e.lanes=r,e}function lo(e,t,r,s){return e=Dt(22,e,s,t),e.elementType=ee,e.lanes=r,e.stateNode={isHidden:!1},e}function sa(e,t,r){return e=Dt(6,e,null,t),e.lanes=r,e}function aa(e,t,r){return t=Dt(4,e.children!==null?e.children:[],e.key,t),t.lanes=r,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function bp(e,t,r,s,d){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=Do(0),this.expirationTimes=Do(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Do(0),this.identifierPrefix=s,this.onRecoverableError=d,this.mutableSourceEagerHydrationData=null}function la(e,t,r,s,d,m,S,D,A){return e=new bp(e,t,r,D,A),t===1?(t=1,m===!0&&(t|=8)):t=0,m=Dt(3,null,null,t),e.current=m,m.stateNode=e,m.memoizedState={element:s,isDehydrated:r,cache:null,transitions:null,pendingSuspenseBoundaries:null},bs(m),e}function xp(e,t,r){var s=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:K,key:s==null?null:""+s,children:e,containerInfo:t,implementation:r}}function Sc(e){if(!e)return gn;e=e._reactInternals;e:{if(Pn(e)!==e||e.tag!==1)throw Error(o(170));var t=e;do{switch(t.tag){case 3:t=t.stateNode.context;break e;case 1:if(yt(t.type)){t=t.stateNode.__reactInternalMemoizedMergedChildContext;break e}}t=t.return}while(t!==null);throw Error(o(171))}if(e.tag===1){var r=e.type;if(yt(r))return Kl(e,r,t)}return t}function kc(e,t,r,s,d,m,S,D,A){return e=la(r,s,!0,e,d,m,S,D,A),e.context=Sc(null),r=e.current,s=ht(),d=Sn(r),m=on(s,d),m.callback=t??null,_n(r,m,d),e.current.lanes=d,Cr(e,d,s),wt(e,s),e}function uo(e,t,r,s){var d=t.current,m=ht(),S=Sn(d);return r=Sc(r),t.context===null?t.context=r:t.pendingContext=r,t=on(m,S),t.payload={element:e},s=s===void 0?null:s,s!==null&&(t.callback=s),e=_n(d,t,S),e!==null&&(qt(e,d,S,m),Mi(e,d,S)),S}function co(e){if(e=e.current,!e.child)return null;switch(e.child.tag){case 5:return e.child.stateNode;default:return e.child.stateNode}}function Cc(e,t){if(e=e.memoizedState,e!==null&&e.dehydrated!==null){var r=e.retryLane;e.retryLane=r!==0&&r<t?r:t}}function ua(e,t){Cc(e,t),(e=e.alternate)&&Cc(e,t)}function Sp(){return null}var jc=typeof reportError=="function"?reportError:function(e){console.error(e)};function ca(e){this._internalRoot=e}fo.prototype.render=ca.prototype.render=function(e){var t=this._internalRoot;if(t===null)throw Error(o(409));uo(e,t,null,null)},fo.prototype.unmount=ca.prototype.unmount=function(){var e=this._internalRoot;if(e!==null){this._internalRoot=null;var t=e.containerInfo;Mn(function(){uo(null,e,null,null)}),t[Jt]=null}};function fo(e){this._internalRoot=e}fo.prototype.unstable_scheduleHydration=function(e){if(e){var t=ul();e={blockedOn:null,target:e,priority:t};for(var r=0;r<dn.length&&t!==0&&t<dn[r].priority;r++);dn.splice(r,0,e),r===0&&fl(e)}};function da(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11)}function po(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11&&(e.nodeType!==8||e.nodeValue!==" react-mount-point-unstable "))}function Tc(){}function kp(e,t,r,s,d){if(d){if(typeof s=="function"){var m=s;s=function(){var Y=co(S);m.call(Y)}}var S=kc(t,s,e,0,null,!1,!1,"",Tc);return e._reactRootContainer=S,e[Jt]=S.current,Fr(e.nodeType===8?e.parentNode:e),Mn(),S}for(;d=e.lastChild;)e.removeChild(d);if(typeof s=="function"){var D=s;s=function(){var Y=co(A);D.call(Y)}}var A=la(e,0,!1,null,null,!1,!1,"",Tc);return e._reactRootContainer=A,e[Jt]=A.current,Fr(e.nodeType===8?e.parentNode:e),Mn(function(){uo(t,A,r,s)}),A}function ho(e,t,r,s,d){var m=r._reactRootContainer;if(m){var S=m;if(typeof d=="function"){var D=d;d=function(){var A=co(S);D.call(A)}}uo(t,S,e,d)}else S=kp(r,t,e,d,s);return co(S)}al=function(e){switch(e.tag){case 3:var t=e.stateNode;if(t.current.memoizedState.isDehydrated){var r=kr(t.pendingLanes);r!==0&&($o(t,r|1),wt(t,Ze()),($e&6)===0&&(fr=Ze()+500,yn()))}break;case 13:Mn(function(){var s=rn(e,1);if(s!==null){var d=ht();qt(s,e,1,d)}}),ua(e,1)}},Ao=function(e){if(e.tag===13){var t=rn(e,134217728);if(t!==null){var r=ht();qt(t,e,134217728,r)}ua(e,134217728)}},ll=function(e){if(e.tag===13){var t=Sn(e),r=rn(e,t);if(r!==null){var s=ht();qt(r,e,t,s)}ua(e,t)}},ul=function(){return Fe},cl=function(e,t){var r=Fe;try{return Fe=e,t()}finally{Fe=r}},wr=function(e,t,r){switch(t){case"input":if($(e,r),t=r.name,r.type==="radio"&&t!=null){for(r=e;r.parentNode;)r=r.parentNode;for(r=r.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<r.length;t++){var s=r[t];if(s!==e&&s.form===e.form){var d=Oi(s);if(!d)throw Error(o(90));xt(s),$(s,d)}}}break;case"textarea":_e(e,r);break;case"select":t=r.value,t!=null&&ae(e,!!r.multiple,t,!1)}},Ya=na,Za=Mn;var Cp={usingClientEntryPoint:!1,Events:[Br,Jn,Oi,Va,Ga,na]},ni={findFiberByHostInstance:In,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},jp={bundleType:ni.bundleType,version:ni.version,rendererPackageName:ni.rendererPackageName,rendererConfig:ni.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:z.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return e=Ja(e),e===null?null:e.stateNode},findFiberByHostInstance:ni.findFiberByHostInstance||Sp,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var mo=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!mo.isDisabled&&mo.supportsFiber)try{di=mo.inject(jp),Gt=mo}catch{}}return bt.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=Cp,bt.createPortal=function(e,t){var r=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!da(t))throw Error(o(200));return xp(e,t,null,r)},bt.createRoot=function(e,t){if(!da(e))throw Error(o(299));var r=!1,s="",d=jc;return t!=null&&(t.unstable_strictMode===!0&&(r=!0),t.identifierPrefix!==void 0&&(s=t.identifierPrefix),t.onRecoverableError!==void 0&&(d=t.onRecoverableError)),t=la(e,1,!1,null,null,r,!1,s,d),e[Jt]=t.current,Fr(e.nodeType===8?e.parentNode:e),new ca(t)},bt.findDOMNode=function(e){if(e==null)return null;if(e.nodeType===1)return e;var t=e._reactInternals;if(t===void 0)throw typeof e.render=="function"?Error(o(188)):(e=Object.keys(e).join(","),Error(o(268,e)));return e=Ja(t),e=e===null?null:e.stateNode,e},bt.flushSync=function(e){return Mn(e)},bt.hydrate=function(e,t,r){if(!po(t))throw Error(o(200));return ho(null,e,t,!0,r)},bt.hydrateRoot=function(e,t,r){if(!da(e))throw Error(o(405));var s=r!=null&&r.hydratedSources||null,d=!1,m="",S=jc;if(r!=null&&(r.unstable_strictMode===!0&&(d=!0),r.identifierPrefix!==void 0&&(m=r.identifierPrefix),r.onRecoverableError!==void 0&&(S=r.onRecoverableError)),t=kc(t,null,e,1,r??null,d,!1,m,S),e[Jt]=t.current,Fr(e),s)for(e=0;e<s.length;e++)r=s[e],d=r._getVersion,d=d(r._source),t.mutableSourceEagerHydrationData==null?t.mutableSourceEagerHydrationData=[r,d]:t.mutableSourceEagerHydrationData.push(r,d);return new fo(t)},bt.render=function(e,t,r){if(!po(t))throw Error(o(200));return ho(null,e,t,!1,r)},bt.unmountComponentAtNode=function(e){if(!po(e))throw Error(o(40));return e._reactRootContainer?(Mn(function(){ho(null,null,e,!1,function(){e._reactRootContainer=null,e[Jt]=null})}),!0):!1},bt.unstable_batchedUpdates=na,bt.unstable_renderSubtreeIntoContainer=function(e,t,r,s){if(!po(r))throw Error(o(200));if(e==null||e._reactInternals===void 0)throw Error(o(38));return ho(e,t,r,!1,s)},bt.version="18.3.1-next-f1338f8080-20240426",bt}var $c;function Dp(){if($c)return ha.exports;$c=1;function n(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(n)}catch(i){console.error(i)}}return n(),ha.exports=Rp(),ha.exports}var Ac;function $p(){if(Ac)return go;Ac=1;var n=Dp();return go.createRoot=n.createRoot,go.hydrateRoot=n.hydrateRoot,go}var Ap=$p();const sd=fe.createContext({dragDropManager:void 0});function $t(n){return"Minified Redux error #"+n+"; visit https://redux.js.org/Errors?code="+n+" for the full message or use the non-minified dev environment for full errors. "}var Lc=function(){return typeof Symbol=="function"&&Symbol.observable||"@@observable"}(),zc=function(){return Math.random().toString(36).substring(7).split("").join(".")},Fc={INIT:"@@redux/INIT"+zc(),REPLACE:"@@redux/REPLACE"+zc()};function Lp(n){if(typeof n!="object"||n===null)return!1;for(var i=n;Object.getPrototypeOf(i)!==null;)i=Object.getPrototypeOf(i);return Object.getPrototypeOf(n)===i}function ad(n,i,o){var u;if(typeof i=="function"&&typeof o=="function"||typeof o=="function"&&typeof arguments[3]=="function")throw new Error($t(0));if(typeof i=="function"&&typeof o>"u"&&(o=i,i=void 0),typeof o<"u"){if(typeof o!="function")throw new Error($t(1));return o(ad)(n,i)}if(typeof n!="function")throw new Error($t(2));var a=n,c=i,f=[],p=f,h=!1;function g(){p===f&&(p=f.slice())}function _(){if(h)throw new Error($t(3));return c}function C(y){if(typeof y!="function")throw new Error($t(4));if(h)throw new Error($t(5));var x=!0;return g(),p.push(y),function(){if(x){if(h)throw new Error($t(6));x=!1,g();var O=p.indexOf(y);p.splice(O,1),f=null}}}function T(y){if(!Lp(y))throw new Error($t(7));if(typeof y.type>"u")throw new Error($t(8));if(h)throw new Error($t(9));try{h=!0,c=a(c,y)}finally{h=!1}for(var x=f=p,j=0;j<x.length;j++){var O=x[j];O()}return y}function w(y){if(typeof y!="function")throw new Error($t(10));a=y,T({type:Fc.REPLACE})}function k(){var y,x=C;return y={subscribe:function(O){if(typeof O!="object"||O===null)throw new Error($t(11));function R(){O.next&&O.next(_())}R();var z=x(R);return{unsubscribe:z}}},y[Lc]=function(){return this},y}return T({type:Fc.INIT}),u={dispatch:T,subscribe:C,getState:_,replaceReducer:w},u[Lc]=k,u}function Ie(n,i,...o){if(zp()&&i===void 0)throw new Error("invariant requires an error message argument");if(!n){let u;if(i===void 0)u=new Error("Minified exception occurred; use the non-minified dev environment for the full error message and additional helpful warnings.");else{let a=0;u=new Error(i.replace(/%s/g,function(){return o[a++]})),u.name="Invariant Violation"}throw u.framesToPop=1,u}}function zp(){return typeof process<"u"&&!0}function Fp(n,i,o){return i.split(".").reduce((u,a)=>u&&u[a]?u[a]:o||null,n)}function Mp(n,i){return n.filter(o=>o!==i)}function ld(n){return typeof n=="object"}function Up(n,i){const o=new Map,u=c=>{o.set(c,o.has(c)?o.get(c)+1:1)};n.forEach(u),i.forEach(u);const a=[];return o.forEach((c,f)=>{c===1&&a.push(f)}),a}function Bp(n,i){return n.filter(o=>i.indexOf(o)>-1)}const Da="dnd-core/INIT_COORDS",xo="dnd-core/BEGIN_DRAG",$a="dnd-core/PUBLISH_DRAG_SOURCE",So="dnd-core/HOVER",ko="dnd-core/DROP",Co="dnd-core/END_DRAG";function Mc(n,i){return{type:Da,payload:{sourceClientOffset:i||null,clientOffset:n||null}}}const Hp={type:Da,payload:{clientOffset:null,sourceClientOffset:null}};function Wp(n){return function(o=[],u={publishSource:!0}){const{publishSource:a=!0,clientOffset:c,getSourceClientOffset:f}=u,p=n.getMonitor(),h=n.getRegistry();n.dispatch(Mc(c)),qp(o,p,h);const g=Yp(o,p);if(g==null){n.dispatch(Hp);return}let _=null;if(c){if(!f)throw new Error("getSourceClientOffset must be defined");Vp(f),_=f(g)}n.dispatch(Mc(c,_));const T=h.getSource(g).beginDrag(p,g);if(T==null)return;Gp(T),h.pinSource(g);const w=h.getSourceType(g);return{type:xo,payload:{itemType:w,item:T,sourceId:g,clientOffset:c||null,sourceClientOffset:_||null,isSourcePublic:!!a}}}}function qp(n,i,o){Ie(!i.isDragging(),"Cannot call beginDrag while dragging."),n.forEach(function(u){Ie(o.getSource(u),"Expected sourceIds to be registered.")})}function Vp(n){Ie(typeof n=="function","When clientOffset is provided, getSourceClientOffset must be a function.")}function Gp(n){Ie(ld(n),"Item must be an object.")}function Yp(n,i){let o=null;for(let u=n.length-1;u>=0;u--)if(i.canDragSource(n[u])){o=n[u];break}return o}function Zp(n,i,o){return i in n?Object.defineProperty(n,i,{value:o,enumerable:!0,configurable:!0,writable:!0}):n[i]=o,n}function Qp(n){for(var i=1;i<arguments.length;i++){var o=arguments[i]!=null?arguments[i]:{},u=Object.keys(o);typeof Object.getOwnPropertySymbols=="function"&&(u=u.concat(Object.getOwnPropertySymbols(o).filter(function(a){return Object.getOwnPropertyDescriptor(o,a).enumerable}))),u.forEach(function(a){Zp(n,a,o[a])})}return n}function Kp(n){return function(o={}){const u=n.getMonitor(),a=n.getRegistry();Xp(u),th(u).forEach((f,p)=>{const h=Jp(f,p,a,u),g={type:ko,payload:{dropResult:Qp({},o,h)}};n.dispatch(g)})}}function Xp(n){Ie(n.isDragging(),"Cannot call drop while not dragging."),Ie(!n.didDrop(),"Cannot call drop twice during one drag operation.")}function Jp(n,i,o,u){const a=o.getTarget(n);let c=a?a.drop(u,n):void 0;return eh(c),typeof c>"u"&&(c=i===0?{}:u.getDropResult()),c}function eh(n){Ie(typeof n>"u"||ld(n),"Drop result must either be an object or undefined.")}function th(n){const i=n.getTargetIds().filter(n.canDropOnTarget,n);return i.reverse(),i}function nh(n){return function(){const o=n.getMonitor(),u=n.getRegistry();rh(o);const a=o.getSourceId();return a!=null&&(u.getSource(a,!0).endDrag(o,a),u.unpinSource()),{type:Co}}}function rh(n){Ie(n.isDragging(),"Cannot call endDrag while not dragging.")}function Ca(n,i){return i===null?n===null:Array.isArray(n)?n.some(o=>o===i):n===i}function ih(n){return function(o,{clientOffset:u}={}){oh(o);const a=o.slice(0),c=n.getMonitor(),f=n.getRegistry(),p=c.getItemType();return ah(a,f,p),sh(a,c,f),lh(a,c,f),{type:So,payload:{targetIds:a,clientOffset:u||null}}}}function oh(n){Ie(Array.isArray(n),"Expected targetIds to be an array.")}function sh(n,i,o){Ie(i.isDragging(),"Cannot call hover while not dragging."),Ie(!i.didDrop(),"Cannot call hover after drop.");for(let u=0;u<n.length;u++){const a=n[u];Ie(n.lastIndexOf(a)===u,"Expected targetIds to be unique in the passed array.");const c=o.getTarget(a);Ie(c,"Expected targetIds to be registered.")}}function ah(n,i,o){for(let u=n.length-1;u>=0;u--){const a=n[u],c=i.getTargetType(a);Ca(c,o)||n.splice(u,1)}}function lh(n,i,o){n.forEach(function(u){o.getTarget(u).hover(i,u)})}function uh(n){return function(){if(n.getMonitor().isDragging())return{type:$a}}}function ch(n){return{beginDrag:Wp(n),publishDragSource:uh(n),hover:ih(n),drop:Kp(n),endDrag:nh(n)}}class dh{receiveBackend(i){this.backend=i}getMonitor(){return this.monitor}getBackend(){return this.backend}getRegistry(){return this.monitor.registry}getActions(){const i=this,{dispatch:o}=this.store;function u(c){return(...f)=>{const p=c.apply(i,f);typeof p<"u"&&o(p)}}const a=ch(this);return Object.keys(a).reduce((c,f)=>{const p=a[f];return c[f]=u(p),c},{})}dispatch(i){this.store.dispatch(i)}constructor(i,o){this.isSetUp=!1,this.handleRefCountChange=()=>{const u=this.store.getState().refCount>0;this.backend&&(u&&!this.isSetUp?(this.backend.setup(),this.isSetUp=!0):!u&&this.isSetUp&&(this.backend.teardown(),this.isSetUp=!1))},this.store=i,this.monitor=o,i.subscribe(this.handleRefCountChange)}}function fh(n,i){return{x:n.x+i.x,y:n.y+i.y}}function ud(n,i){return{x:n.x-i.x,y:n.y-i.y}}function ph(n){const{clientOffset:i,initialClientOffset:o,initialSourceClientOffset:u}=n;return!i||!o||!u?null:ud(fh(i,u),o)}function hh(n){const{clientOffset:i,initialClientOffset:o}=n;return!i||!o?null:ud(i,o)}const oi=[],Aa=[];oi.__IS_NONE__=!0;Aa.__IS_ALL__=!0;function mh(n,i){return n===oi?!1:n===Aa||typeof i>"u"?!0:Bp(i,n).length>0}class gh{subscribeToStateChange(i,o={}){const{handlerIds:u}=o;Ie(typeof i=="function","listener must be a function."),Ie(typeof u>"u"||Array.isArray(u),"handlerIds, when specified, must be an array of strings.");let a=this.store.getState().stateId;const c=()=>{const f=this.store.getState(),p=f.stateId;try{p===a||p===a+1&&!mh(f.dirtyHandlerIds,u)||i()}finally{a=p}};return this.store.subscribe(c)}subscribeToOffsetChange(i){Ie(typeof i=="function","listener must be a function.");let o=this.store.getState().dragOffset;const u=()=>{const a=this.store.getState().dragOffset;a!==o&&(o=a,i())};return this.store.subscribe(u)}canDragSource(i){if(!i)return!1;const o=this.registry.getSource(i);return Ie(o,`Expected to find a valid source. sourceId=${i}`),this.isDragging()?!1:o.canDrag(this,i)}canDropOnTarget(i){if(!i)return!1;const o=this.registry.getTarget(i);if(Ie(o,`Expected to find a valid target. targetId=${i}`),!this.isDragging()||this.didDrop())return!1;const u=this.registry.getTargetType(i),a=this.getItemType();return Ca(u,a)&&o.canDrop(this,i)}isDragging(){return!!this.getItemType()}isDraggingSource(i){if(!i)return!1;const o=this.registry.getSource(i,!0);if(Ie(o,`Expected to find a valid source. sourceId=${i}`),!this.isDragging()||!this.isSourcePublic())return!1;const u=this.registry.getSourceType(i),a=this.getItemType();return u!==a?!1:o.isDragging(this,i)}isOverTarget(i,o={shallow:!1}){if(!i)return!1;const{shallow:u}=o;if(!this.isDragging())return!1;const a=this.registry.getTargetType(i),c=this.getItemType();if(c&&!Ca(a,c))return!1;const f=this.getTargetIds();if(!f.length)return!1;const p=f.indexOf(i);return u?p===f.length-1:p>-1}getItemType(){return this.store.getState().dragOperation.itemType}getItem(){return this.store.getState().dragOperation.item}getSourceId(){return this.store.getState().dragOperation.sourceId}getTargetIds(){return this.store.getState().dragOperation.targetIds}getDropResult(){return this.store.getState().dragOperation.dropResult}didDrop(){return this.store.getState().dragOperation.didDrop}isSourcePublic(){return!!this.store.getState().dragOperation.isSourcePublic}getInitialClientOffset(){return this.store.getState().dragOffset.initialClientOffset}getInitialSourceClientOffset(){return this.store.getState().dragOffset.initialSourceClientOffset}getClientOffset(){return this.store.getState().dragOffset.clientOffset}getSourceClientOffset(){return ph(this.store.getState().dragOffset)}getDifferenceFromInitialOffset(){return hh(this.store.getState().dragOffset)}constructor(i,o){this.store=i,this.registry=o}}const Uc=typeof global<"u"?global:self,cd=Uc.MutationObserver||Uc.WebKitMutationObserver;function dd(n){return function(){const o=setTimeout(a,0),u=setInterval(a,50);function a(){clearTimeout(o),clearInterval(u),n()}}}function yh(n){let i=1;const o=new cd(n),u=document.createTextNode("");return o.observe(u,{characterData:!0}),function(){i=-i,u.data=i}}const vh=typeof cd=="function"?yh:dd;class _h{enqueueTask(i){const{queue:o,requestFlush:u}=this;o.length||(u(),this.flushing=!0),o[o.length]=i}constructor(){this.queue=[],this.pendingErrors=[],this.flushing=!1,this.index=0,this.capacity=1024,this.flush=()=>{const{queue:i}=this;for(;this.index<i.length;){const o=this.index;if(this.index++,i[o].call(),this.index>this.capacity){for(let u=0,a=i.length-this.index;u<a;u++)i[u]=i[u+this.index];i.length-=this.index,this.index=0}}i.length=0,this.index=0,this.flushing=!1},this.registerPendingError=i=>{this.pendingErrors.push(i),this.requestErrorThrow()},this.requestFlush=vh(this.flush),this.requestErrorThrow=dd(()=>{if(this.pendingErrors.length)throw this.pendingErrors.shift()})}}class wh{call(){try{this.task&&this.task()}catch(i){this.onError(i)}finally{this.task=null,this.release(this)}}constructor(i,o){this.onError=i,this.release=o,this.task=null}}class bh{create(i){const o=this.freeTasks,u=o.length?o.pop():new wh(this.onError,a=>o[o.length]=a);return u.task=i,u}constructor(i){this.onError=i,this.freeTasks=[]}}const fd=new _h,xh=new bh(fd.registerPendingError);function Sh(n){fd.enqueueTask(xh.create(n))}const La="dnd-core/ADD_SOURCE",za="dnd-core/ADD_TARGET",Fa="dnd-core/REMOVE_SOURCE",jo="dnd-core/REMOVE_TARGET";function kh(n){return{type:La,payload:{sourceId:n}}}function Ch(n){return{type:za,payload:{targetId:n}}}function jh(n){return{type:Fa,payload:{sourceId:n}}}function Th(n){return{type:jo,payload:{targetId:n}}}function Nh(n){Ie(typeof n.canDrag=="function","Expected canDrag to be a function."),Ie(typeof n.beginDrag=="function","Expected beginDrag to be a function."),Ie(typeof n.endDrag=="function","Expected endDrag to be a function.")}function Eh(n){Ie(typeof n.canDrop=="function","Expected canDrop to be a function."),Ie(typeof n.hover=="function","Expected hover to be a function."),Ie(typeof n.drop=="function","Expected beginDrag to be a function.")}function ja(n,i){if(i&&Array.isArray(n)){n.forEach(o=>ja(o,!1));return}Ie(typeof n=="string"||typeof n=="symbol",i?"Type can only be a string, a symbol, or an array of either.":"Type can only be a string or a symbol.")}var At;(function(n){n.SOURCE="SOURCE",n.TARGET="TARGET"})(At||(At={}));let Oh=0;function Ph(){return Oh++}function Ih(n){const i=Ph().toString();switch(n){case At.SOURCE:return`S${i}`;case At.TARGET:return`T${i}`;default:throw new Error(`Unknown Handler Role: ${n}`)}}function Bc(n){switch(n[0]){case"S":return At.SOURCE;case"T":return At.TARGET;default:throw new Error(`Cannot parse handler ID: ${n}`)}}function Hc(n,i){const o=n.entries();let u=!1;do{const{done:a,value:[,c]}=o.next();if(c===i)return!0;u=!!a}while(!u);return!1}class Rh{addSource(i,o){ja(i),Nh(o);const u=this.addHandler(At.SOURCE,i,o);return this.store.dispatch(kh(u)),u}addTarget(i,o){ja(i,!0),Eh(o);const u=this.addHandler(At.TARGET,i,o);return this.store.dispatch(Ch(u)),u}containsHandler(i){return Hc(this.dragSources,i)||Hc(this.dropTargets,i)}getSource(i,o=!1){return Ie(this.isSourceId(i),"Expected a valid source ID."),o&&i===this.pinnedSourceId?this.pinnedSource:this.dragSources.get(i)}getTarget(i){return Ie(this.isTargetId(i),"Expected a valid target ID."),this.dropTargets.get(i)}getSourceType(i){return Ie(this.isSourceId(i),"Expected a valid source ID."),this.types.get(i)}getTargetType(i){return Ie(this.isTargetId(i),"Expected a valid target ID."),this.types.get(i)}isSourceId(i){return Bc(i)===At.SOURCE}isTargetId(i){return Bc(i)===At.TARGET}removeSource(i){Ie(this.getSource(i),"Expected an existing source."),this.store.dispatch(jh(i)),Sh(()=>{this.dragSources.delete(i),this.types.delete(i)})}removeTarget(i){Ie(this.getTarget(i),"Expected an existing target."),this.store.dispatch(Th(i)),this.dropTargets.delete(i),this.types.delete(i)}pinSource(i){const o=this.getSource(i);Ie(o,"Expected an existing source."),this.pinnedSourceId=i,this.pinnedSource=o}unpinSource(){Ie(this.pinnedSource,"No source is pinned at the time."),this.pinnedSourceId=null,this.pinnedSource=null}addHandler(i,o,u){const a=Ih(i);return this.types.set(a,o),i===At.SOURCE?this.dragSources.set(a,u):i===At.TARGET&&this.dropTargets.set(a,u),a}constructor(i){this.types=new Map,this.dragSources=new Map,this.dropTargets=new Map,this.pinnedSourceId=null,this.pinnedSource=null,this.store=i}}const Dh=(n,i)=>n===i;function $h(n,i){return!n&&!i?!0:!n||!i?!1:n.x===i.x&&n.y===i.y}function Ah(n,i,o=Dh){if(n.length!==i.length)return!1;for(let u=0;u<n.length;++u)if(!o(n[u],i[u]))return!1;return!0}function Lh(n=oi,i){switch(i.type){case So:break;case La:case za:case jo:case Fa:return oi;case xo:case $a:case Co:case ko:default:return Aa}const{targetIds:o=[],prevTargetIds:u=[]}=i.payload,a=Up(o,u);if(!(a.length>0||!Ah(o,u)))return oi;const f=u[u.length-1],p=o[o.length-1];return f!==p&&(f&&a.push(f),p&&a.push(p)),a}function zh(n,i,o){return i in n?Object.defineProperty(n,i,{value:o,enumerable:!0,configurable:!0,writable:!0}):n[i]=o,n}function Fh(n){for(var i=1;i<arguments.length;i++){var o=arguments[i]!=null?arguments[i]:{},u=Object.keys(o);typeof Object.getOwnPropertySymbols=="function"&&(u=u.concat(Object.getOwnPropertySymbols(o).filter(function(a){return Object.getOwnPropertyDescriptor(o,a).enumerable}))),u.forEach(function(a){zh(n,a,o[a])})}return n}const Wc={initialSourceClientOffset:null,initialClientOffset:null,clientOffset:null};function Mh(n=Wc,i){const{payload:o}=i;switch(i.type){case Da:case xo:return{initialSourceClientOffset:o.sourceClientOffset,initialClientOffset:o.clientOffset,clientOffset:o.clientOffset};case So:return $h(n.clientOffset,o.clientOffset)?n:Fh({},n,{clientOffset:o.clientOffset});case Co:case ko:return Wc;default:return n}}function Uh(n,i,o){return i in n?Object.defineProperty(n,i,{value:o,enumerable:!0,configurable:!0,writable:!0}):n[i]=o,n}function hr(n){for(var i=1;i<arguments.length;i++){var o=arguments[i]!=null?arguments[i]:{},u=Object.keys(o);typeof Object.getOwnPropertySymbols=="function"&&(u=u.concat(Object.getOwnPropertySymbols(o).filter(function(a){return Object.getOwnPropertyDescriptor(o,a).enumerable}))),u.forEach(function(a){Uh(n,a,o[a])})}return n}const Bh={itemType:null,item:null,sourceId:null,targetIds:[],dropResult:null,didDrop:!1,isSourcePublic:null};function Hh(n=Bh,i){const{payload:o}=i;switch(i.type){case xo:return hr({},n,{itemType:o.itemType,item:o.item,sourceId:o.sourceId,isSourcePublic:o.isSourcePublic,dropResult:null,didDrop:!1});case $a:return hr({},n,{isSourcePublic:!0});case So:return hr({},n,{targetIds:o.targetIds});case jo:return n.targetIds.indexOf(o.targetId)===-1?n:hr({},n,{targetIds:Mp(n.targetIds,o.targetId)});case ko:return hr({},n,{dropResult:o.dropResult,didDrop:!0,targetIds:[]});case Co:return hr({},n,{itemType:null,item:null,sourceId:null,dropResult:null,didDrop:!1,isSourcePublic:null,targetIds:[]});default:return n}}function Wh(n=0,i){switch(i.type){case La:case za:return n+1;case Fa:case jo:return n-1;default:return n}}function qh(n=0){return n+1}function Vh(n,i,o){return i in n?Object.defineProperty(n,i,{value:o,enumerable:!0,configurable:!0,writable:!0}):n[i]=o,n}function Gh(n){for(var i=1;i<arguments.length;i++){var o=arguments[i]!=null?arguments[i]:{},u=Object.keys(o);typeof Object.getOwnPropertySymbols=="function"&&(u=u.concat(Object.getOwnPropertySymbols(o).filter(function(a){return Object.getOwnPropertyDescriptor(o,a).enumerable}))),u.forEach(function(a){Vh(n,a,o[a])})}return n}function Yh(n={},i){return{dirtyHandlerIds:Lh(n.dirtyHandlerIds,{type:i.type,payload:Gh({},i.payload,{prevTargetIds:Fp(n,"dragOperation.targetIds",[])})}),dragOffset:Mh(n.dragOffset,i),refCount:Wh(n.refCount,i),dragOperation:Hh(n.dragOperation,i),stateId:qh(n.stateId)}}function Zh(n,i=void 0,o={},u=!1){const a=Qh(u),c=new gh(a,new Rh(a)),f=new dh(a,c),p=n(f,i,o);return f.receiveBackend(p),f}function Qh(n){const i=typeof window<"u"&&window.__REDUX_DEVTOOLS_EXTENSION__;return ad(Yh,n&&i&&i({name:"dnd-core",instanceId:"dnd-core"}))}function Kh(n,i){if(n==null)return{};var o=Xh(n,i),u,a;if(Object.getOwnPropertySymbols){var c=Object.getOwnPropertySymbols(n);for(a=0;a<c.length;a++)u=c[a],!(i.indexOf(u)>=0)&&Object.prototype.propertyIsEnumerable.call(n,u)&&(o[u]=n[u])}return o}function Xh(n,i){if(n==null)return{};var o={},u=Object.keys(n),a,c;for(c=0;c<u.length;c++)a=u[c],!(i.indexOf(a)>=0)&&(o[a]=n[a]);return o}let qc=0;const _o=Symbol.for("__REACT_DND_CONTEXT_INSTANCE__");var Jh=fe.memo(function(i){var{children:o}=i,u=Kh(i,["children"]);const[a,c]=em(u);return fe.useEffect(()=>{if(c){const f=pd();return++qc,()=>{--qc===0&&(f[_o]=null)}}},[]),l.jsx(sd.Provider,{value:a,children:o})});function em(n){if("manager"in n)return[{dragDropManager:n.manager},!1];const i=tm(n.backend,n.context,n.options,n.debugMode),o=!n.context;return[i,o]}function tm(n,i=pd(),o,u){const a=i;return a[_o]||(a[_o]={dragDropManager:Zh(n,i,o,u)}),a[_o]}function pd(){return typeof global<"u"?global:window}var ya,Vc;function nm(){return Vc||(Vc=1,ya=function n(i,o){if(i===o)return!0;if(i&&o&&typeof i=="object"&&typeof o=="object"){if(i.constructor!==o.constructor)return!1;var u,a,c;if(Array.isArray(i)){if(u=i.length,u!=o.length)return!1;for(a=u;a--!==0;)if(!n(i[a],o[a]))return!1;return!0}if(i.constructor===RegExp)return i.source===o.source&&i.flags===o.flags;if(i.valueOf!==Object.prototype.valueOf)return i.valueOf()===o.valueOf();if(i.toString!==Object.prototype.toString)return i.toString()===o.toString();if(c=Object.keys(i),u=c.length,u!==Object.keys(o).length)return!1;for(a=u;a--!==0;)if(!Object.prototype.hasOwnProperty.call(o,c[a]))return!1;for(a=u;a--!==0;){var f=c[a];if(!n(i[f],o[f]))return!1}return!0}return i!==i&&o!==o}),ya}var rm=nm();const im=Ia(rm),Wn=typeof window<"u"?fe.useLayoutEffect:fe.useEffect;function om(n,i,o){const[u,a]=fe.useState(()=>i(n)),c=fe.useCallback(()=>{const f=i(n);im(u,f)||(a(f),o&&o())},[u,n,o]);return Wn(c),[u,c]}function sm(n,i,o){const[u,a]=om(n,i,o);return Wn(function(){const f=n.getHandlerId();if(f!=null)return n.subscribeToStateChange(a,{handlerIds:[f]})},[n,a]),u}function hd(n,i,o){return sm(i,n||(()=>({})),()=>o.reconnect())}function md(n,i){const o=[];return typeof n!="function"&&o.push(n),fe.useMemo(()=>typeof n=="function"?n():n,o)}function am(n){return fe.useMemo(()=>n.hooks.dragSource(),[n])}function lm(n){return fe.useMemo(()=>n.hooks.dragPreview(),[n])}let va=!1,_a=!1;class um{receiveHandlerId(i){this.sourceId=i}getHandlerId(){return this.sourceId}canDrag(){Ie(!va,"You may not call monitor.canDrag() inside your canDrag() implementation. Read more: http://react-dnd.github.io/react-dnd/docs/api/drag-source-monitor");try{return va=!0,this.internalMonitor.canDragSource(this.sourceId)}finally{va=!1}}isDragging(){if(!this.sourceId)return!1;Ie(!_a,"You may not call monitor.isDragging() inside your isDragging() implementation. Read more: http://react-dnd.github.io/react-dnd/docs/api/drag-source-monitor");try{return _a=!0,this.internalMonitor.isDraggingSource(this.sourceId)}finally{_a=!1}}subscribeToStateChange(i,o){return this.internalMonitor.subscribeToStateChange(i,o)}isDraggingSource(i){return this.internalMonitor.isDraggingSource(i)}isOverTarget(i,o){return this.internalMonitor.isOverTarget(i,o)}getTargetIds(){return this.internalMonitor.getTargetIds()}isSourcePublic(){return this.internalMonitor.isSourcePublic()}getSourceId(){return this.internalMonitor.getSourceId()}subscribeToOffsetChange(i){return this.internalMonitor.subscribeToOffsetChange(i)}canDragSource(i){return this.internalMonitor.canDragSource(i)}canDropOnTarget(i){return this.internalMonitor.canDropOnTarget(i)}getItemType(){return this.internalMonitor.getItemType()}getItem(){return this.internalMonitor.getItem()}getDropResult(){return this.internalMonitor.getDropResult()}didDrop(){return this.internalMonitor.didDrop()}getInitialClientOffset(){return this.internalMonitor.getInitialClientOffset()}getInitialSourceClientOffset(){return this.internalMonitor.getInitialSourceClientOffset()}getSourceClientOffset(){return this.internalMonitor.getSourceClientOffset()}getClientOffset(){return this.internalMonitor.getClientOffset()}getDifferenceFromInitialOffset(){return this.internalMonitor.getDifferenceFromInitialOffset()}constructor(i){this.sourceId=null,this.internalMonitor=i.getMonitor()}}let wa=!1;class cm{receiveHandlerId(i){this.targetId=i}getHandlerId(){return this.targetId}subscribeToStateChange(i,o){return this.internalMonitor.subscribeToStateChange(i,o)}canDrop(){if(!this.targetId)return!1;Ie(!wa,"You may not call monitor.canDrop() inside your canDrop() implementation. Read more: http://react-dnd.github.io/react-dnd/docs/api/drop-target-monitor");try{return wa=!0,this.internalMonitor.canDropOnTarget(this.targetId)}finally{wa=!1}}isOver(i){return this.targetId?this.internalMonitor.isOverTarget(this.targetId,i):!1}getItemType(){return this.internalMonitor.getItemType()}getItem(){return this.internalMonitor.getItem()}getDropResult(){return this.internalMonitor.getDropResult()}didDrop(){return this.internalMonitor.didDrop()}getInitialClientOffset(){return this.internalMonitor.getInitialClientOffset()}getInitialSourceClientOffset(){return this.internalMonitor.getInitialSourceClientOffset()}getSourceClientOffset(){return this.internalMonitor.getSourceClientOffset()}getClientOffset(){return this.internalMonitor.getClientOffset()}getDifferenceFromInitialOffset(){return this.internalMonitor.getDifferenceFromInitialOffset()}constructor(i){this.targetId=null,this.internalMonitor=i.getMonitor()}}function dm(n,i,o){const u=o.getRegistry(),a=u.addTarget(n,i);return[a,()=>u.removeTarget(a)]}function fm(n,i,o){const u=o.getRegistry(),a=u.addSource(n,i);return[a,()=>u.removeSource(a)]}function Ta(n,i,o,u){let a;if(a!==void 0)return!!a;if(n===i)return!0;if(typeof n!="object"||!n||typeof i!="object"||!i)return!1;const c=Object.keys(n),f=Object.keys(i);if(c.length!==f.length)return!1;const p=Object.prototype.hasOwnProperty.bind(i);for(let h=0;h<c.length;h++){const g=c[h];if(!p(g))return!1;const _=n[g],C=i[g];if(a=void 0,a===!1||a===void 0&&_!==C)return!1}return!0}function Na(n){return n!==null&&typeof n=="object"&&Object.prototype.hasOwnProperty.call(n,"current")}function pm(n){if(typeof n.type=="string")return;const i=n.type.displayName||n.type.name||"the component";throw new Error(`Only native element nodes can now be passed to React DnD connectors.You can either wrap ${i} into a <div>, or turn it into a drag source or a drop target itself.`)}function hm(n){return(i=null,o=null)=>{if(!fe.isValidElement(i)){const c=i;return n(c,o),c}const u=i;return pm(u),mm(u,o?c=>n(c,o):n)}}function gd(n){const i={};return Object.keys(n).forEach(o=>{const u=n[o];if(o.endsWith("Ref"))i[o]=n[o];else{const a=hm(u);i[o]=()=>a}}),i}function Gc(n,i){typeof n=="function"?n(i):n.current=i}function mm(n,i){const o=n.ref;return Ie(typeof o!="string","Cannot connect React DnD to an element with an existing string ref. Please convert it to use a callback ref instead, or wrap it into a <span> or <div>. Read more: https://reactjs.org/docs/refs-and-the-dom.html#callback-refs"),o?fe.cloneElement(n,{ref:u=>{Gc(o,u),Gc(i,u)}}):fe.cloneElement(n,{ref:i})}class gm{receiveHandlerId(i){this.handlerId!==i&&(this.handlerId=i,this.reconnect())}get connectTarget(){return this.dragSource}get dragSourceOptions(){return this.dragSourceOptionsInternal}set dragSourceOptions(i){this.dragSourceOptionsInternal=i}get dragPreviewOptions(){return this.dragPreviewOptionsInternal}set dragPreviewOptions(i){this.dragPreviewOptionsInternal=i}reconnect(){const i=this.reconnectDragSource();this.reconnectDragPreview(i)}reconnectDragSource(){const i=this.dragSource,o=this.didHandlerIdChange()||this.didConnectedDragSourceChange()||this.didDragSourceOptionsChange();return o&&this.disconnectDragSource(),this.handlerId?i?(o&&(this.lastConnectedHandlerId=this.handlerId,this.lastConnectedDragSource=i,this.lastConnectedDragSourceOptions=this.dragSourceOptions,this.dragSourceUnsubscribe=this.backend.connectDragSource(this.handlerId,i,this.dragSourceOptions)),o):(this.lastConnectedDragSource=i,o):o}reconnectDragPreview(i=!1){const o=this.dragPreview,u=i||this.didHandlerIdChange()||this.didConnectedDragPreviewChange()||this.didDragPreviewOptionsChange();if(u&&this.disconnectDragPreview(),!!this.handlerId){if(!o){this.lastConnectedDragPreview=o;return}u&&(this.lastConnectedHandlerId=this.handlerId,this.lastConnectedDragPreview=o,this.lastConnectedDragPreviewOptions=this.dragPreviewOptions,this.dragPreviewUnsubscribe=this.backend.connectDragPreview(this.handlerId,o,this.dragPreviewOptions))}}didHandlerIdChange(){return this.lastConnectedHandlerId!==this.handlerId}didConnectedDragSourceChange(){return this.lastConnectedDragSource!==this.dragSource}didConnectedDragPreviewChange(){return this.lastConnectedDragPreview!==this.dragPreview}didDragSourceOptionsChange(){return!Ta(this.lastConnectedDragSourceOptions,this.dragSourceOptions)}didDragPreviewOptionsChange(){return!Ta(this.lastConnectedDragPreviewOptions,this.dragPreviewOptions)}disconnectDragSource(){this.dragSourceUnsubscribe&&(this.dragSourceUnsubscribe(),this.dragSourceUnsubscribe=void 0)}disconnectDragPreview(){this.dragPreviewUnsubscribe&&(this.dragPreviewUnsubscribe(),this.dragPreviewUnsubscribe=void 0,this.dragPreviewNode=null,this.dragPreviewRef=null)}get dragSource(){return this.dragSourceNode||this.dragSourceRef&&this.dragSourceRef.current}get dragPreview(){return this.dragPreviewNode||this.dragPreviewRef&&this.dragPreviewRef.current}clearDragSource(){this.dragSourceNode=null,this.dragSourceRef=null}clearDragPreview(){this.dragPreviewNode=null,this.dragPreviewRef=null}constructor(i){this.hooks=gd({dragSource:(o,u)=>{this.clearDragSource(),this.dragSourceOptions=u||null,Na(o)?this.dragSourceRef=o:this.dragSourceNode=o,this.reconnectDragSource()},dragPreview:(o,u)=>{this.clearDragPreview(),this.dragPreviewOptions=u||null,Na(o)?this.dragPreviewRef=o:this.dragPreviewNode=o,this.reconnectDragPreview()}}),this.handlerId=null,this.dragSourceRef=null,this.dragSourceOptionsInternal=null,this.dragPreviewRef=null,this.dragPreviewOptionsInternal=null,this.lastConnectedHandlerId=null,this.lastConnectedDragSource=null,this.lastConnectedDragSourceOptions=null,this.lastConnectedDragPreview=null,this.lastConnectedDragPreviewOptions=null,this.backend=i}}class ym{get connectTarget(){return this.dropTarget}reconnect(){const i=this.didHandlerIdChange()||this.didDropTargetChange()||this.didOptionsChange();i&&this.disconnectDropTarget();const o=this.dropTarget;if(this.handlerId){if(!o){this.lastConnectedDropTarget=o;return}i&&(this.lastConnectedHandlerId=this.handlerId,this.lastConnectedDropTarget=o,this.lastConnectedDropTargetOptions=this.dropTargetOptions,this.unsubscribeDropTarget=this.backend.connectDropTarget(this.handlerId,o,this.dropTargetOptions))}}receiveHandlerId(i){i!==this.handlerId&&(this.handlerId=i,this.reconnect())}get dropTargetOptions(){return this.dropTargetOptionsInternal}set dropTargetOptions(i){this.dropTargetOptionsInternal=i}didHandlerIdChange(){return this.lastConnectedHandlerId!==this.handlerId}didDropTargetChange(){return this.lastConnectedDropTarget!==this.dropTarget}didOptionsChange(){return!Ta(this.lastConnectedDropTargetOptions,this.dropTargetOptions)}disconnectDropTarget(){this.unsubscribeDropTarget&&(this.unsubscribeDropTarget(),this.unsubscribeDropTarget=void 0)}get dropTarget(){return this.dropTargetNode||this.dropTargetRef&&this.dropTargetRef.current}clearDropTarget(){this.dropTargetRef=null,this.dropTargetNode=null}constructor(i){this.hooks=gd({dropTarget:(o,u)=>{this.clearDropTarget(),this.dropTargetOptions=u,Na(o)?this.dropTargetRef=o:this.dropTargetNode=o,this.reconnect()}}),this.handlerId=null,this.dropTargetRef=null,this.dropTargetOptionsInternal=null,this.lastConnectedHandlerId=null,this.lastConnectedDropTarget=null,this.lastConnectedDropTargetOptions=null,this.backend=i}}function mr(){const{dragDropManager:n}=fe.useContext(sd);return Ie(n!=null,"Expected drag drop context"),n}function vm(n,i){const o=mr(),u=fe.useMemo(()=>new gm(o.getBackend()),[o]);return Wn(()=>(u.dragSourceOptions=n||null,u.reconnect(),()=>u.disconnectDragSource()),[u,n]),Wn(()=>(u.dragPreviewOptions=i||null,u.reconnect(),()=>u.disconnectDragPreview()),[u,i]),u}function _m(){const n=mr();return fe.useMemo(()=>new um(n),[n])}class wm{beginDrag(){const i=this.spec,o=this.monitor;let u=null;return typeof i.item=="object"?u=i.item:typeof i.item=="function"?u=i.item(o):u={},u??null}canDrag(){const i=this.spec,o=this.monitor;return typeof i.canDrag=="boolean"?i.canDrag:typeof i.canDrag=="function"?i.canDrag(o):!0}isDragging(i,o){const u=this.spec,a=this.monitor,{isDragging:c}=u;return c?c(a):o===i.getSourceId()}endDrag(){const i=this.spec,o=this.monitor,u=this.connector,{end:a}=i;a&&a(o.getItem(),o),u.reconnect()}constructor(i,o,u){this.spec=i,this.monitor=o,this.connector=u}}function bm(n,i,o){const u=fe.useMemo(()=>new wm(n,i,o),[i,o]);return fe.useEffect(()=>{u.spec=n},[n]),u}function xm(n){return fe.useMemo(()=>{const i=n.type;return Ie(i!=null,"spec.type must be defined"),i},[n])}function Sm(n,i,o){const u=mr(),a=bm(n,i,o),c=xm(n);Wn(function(){if(c!=null){const[p,h]=fm(c,a,u);return i.receiveHandlerId(p),o.receiveHandlerId(p),h}},[u,i,o,a,c])}function km(n,i){const o=md(n);Ie(!o.begin,"useDrag::spec.begin was deprecated in v14. Replace spec.begin() with spec.item(). (see more here - https://react-dnd.github.io/react-dnd/docs/api/use-drag)");const u=_m(),a=vm(o.options,o.previewOptions);return Sm(o,u,a),[hd(o.collect,u,a),am(a),lm(a)]}function Cm(n){return fe.useMemo(()=>n.hooks.dropTarget(),[n])}function jm(n){const i=mr(),o=fe.useMemo(()=>new ym(i.getBackend()),[i]);return Wn(()=>(o.dropTargetOptions=n||null,o.reconnect(),()=>o.disconnectDropTarget()),[n]),o}function Tm(){const n=mr();return fe.useMemo(()=>new cm(n),[n])}function Nm(n){const{accept:i}=n;return fe.useMemo(()=>(Ie(n.accept!=null,"accept must be defined"),Array.isArray(i)?i:[i]),[i])}class Em{canDrop(){const i=this.spec,o=this.monitor;return i.canDrop?i.canDrop(o.getItem(),o):!0}hover(){const i=this.spec,o=this.monitor;i.hover&&i.hover(o.getItem(),o)}drop(){const i=this.spec,o=this.monitor;if(i.drop)return i.drop(o.getItem(),o)}constructor(i,o){this.spec=i,this.monitor=o}}function Om(n,i){const o=fe.useMemo(()=>new Em(n,i),[i]);return fe.useEffect(()=>{o.spec=n},[n]),o}function Pm(n,i,o){const u=mr(),a=Om(n,i),c=Nm(n);Wn(function(){const[p,h]=dm(c,a,u);return i.receiveHandlerId(p),o.receiveHandlerId(p),h},[u,i,a,o,c.map(f=>f.toString()).join("|")])}function Im(n,i){const o=md(n),u=Tm(),a=jm(o.options);return Pm(o,u,a),[hd(o.collect,u,a),Cm(a)]}function yd(n){let i=null;return()=>(i==null&&(i=n()),i)}function Rm(n,i){return n.filter(o=>o!==i)}function Dm(n,i){const o=new Set,u=c=>o.add(c);n.forEach(u),i.forEach(u);const a=[];return o.forEach(c=>a.push(c)),a}class $m{enter(i){const o=this.entered.length,u=a=>this.isNodeInDocument(a)&&(!a.contains||a.contains(i));return this.entered=Dm(this.entered.filter(u),[i]),o===0&&this.entered.length>0}leave(i){const o=this.entered.length;return this.entered=Rm(this.entered.filter(this.isNodeInDocument),i),o>0&&this.entered.length===0}reset(){this.entered=[]}constructor(i){this.entered=[],this.isNodeInDocument=i}}class Am{initializeExposedProperties(){Object.keys(this.config.exposeProperties).forEach(i=>{Object.defineProperty(this.item,i,{configurable:!0,enumerable:!0,get(){return console.warn(`Browser doesn't allow reading "${i}" until the drop event.`),null}})})}loadDataTransfer(i){if(i){const o={};Object.keys(this.config.exposeProperties).forEach(u=>{const a=this.config.exposeProperties[u];a!=null&&(o[u]={value:a(i,this.config.matchesTypes),configurable:!0,enumerable:!0})}),Object.defineProperties(this.item,o)}}canDrag(){return!0}beginDrag(){return this.item}isDragging(i,o){return o===i.getSourceId()}endDrag(){}constructor(i){this.config=i,this.item={},this.initializeExposedProperties()}}const vd="__NATIVE_FILE__",_d="__NATIVE_URL__",wd="__NATIVE_TEXT__",bd="__NATIVE_HTML__",Yc=Object.freeze(Object.defineProperty({__proto__:null,FILE:vd,HTML:bd,TEXT:wd,URL:_d},Symbol.toStringTag,{value:"Module"}));function ba(n,i,o){const u=i.reduce((a,c)=>a||n.getData(c),"");return u??o}const Ea={[vd]:{exposeProperties:{files:n=>Array.prototype.slice.call(n.files),items:n=>n.items,dataTransfer:n=>n},matchesTypes:["Files"]},[bd]:{exposeProperties:{html:(n,i)=>ba(n,i,""),dataTransfer:n=>n},matchesTypes:["Html","text/html"]},[_d]:{exposeProperties:{urls:(n,i)=>ba(n,i,"").split(`
`),dataTransfer:n=>n},matchesTypes:["Url","text/uri-list"]},[wd]:{exposeProperties:{text:(n,i)=>ba(n,i,""),dataTransfer:n=>n},matchesTypes:["Text","text/plain"]}};function Lm(n,i){const o=Ea[n];if(!o)throw new Error(`native type ${n} has no configuration`);const u=new Am(o);return u.loadDataTransfer(i),u}function xa(n){if(!n)return null;const i=Array.prototype.slice.call(n.types||[]);return Object.keys(Ea).filter(o=>{const u=Ea[o];return u!=null&&u.matchesTypes?u.matchesTypes.some(a=>i.indexOf(a)>-1):!1})[0]||null}const zm=yd(()=>/firefox/i.test(navigator.userAgent)),xd=yd(()=>!!window.safari);class Zc{interpolate(i){const{xs:o,ys:u,c1s:a,c2s:c,c3s:f}=this;let p=o.length-1;if(i===o[p])return u[p];let h=0,g=f.length-1,_;for(;h<=g;){_=Math.floor(.5*(h+g));const w=o[_];if(w<i)h=_+1;else if(w>i)g=_-1;else return u[_]}p=Math.max(0,g);const C=i-o[p],T=C*C;return u[p]+a[p]*C+c[p]*T+f[p]*C*T}constructor(i,o){const{length:u}=i,a=[];for(let w=0;w<u;w++)a.push(w);a.sort((w,k)=>i[w]<i[k]?-1:1);const c=[],f=[];let p,h;for(let w=0;w<u-1;w++)p=i[w+1]-i[w],h=o[w+1]-o[w],c.push(p),f.push(h/p);const g=[f[0]];for(let w=0;w<c.length-1;w++){const k=f[w],y=f[w+1];if(k*y<=0)g.push(0);else{p=c[w];const x=c[w+1],j=p+x;g.push(3*j/((j+x)/k+(j+p)/y))}}g.push(f[f.length-1]);const _=[],C=[];let T;for(let w=0;w<g.length-1;w++){T=f[w];const k=g[w],y=1/c[w],x=k+g[w+1]-T-T;_.push((T-k-x)*y),C.push(x*y*y)}this.xs=i,this.ys=o,this.c1s=g,this.c2s=_,this.c3s=C}}const Fm=1;function Sd(n){const i=n.nodeType===Fm?n:n.parentElement;if(!i)return null;const{top:o,left:u}=i.getBoundingClientRect();return{x:u,y:o}}function yo(n){return{x:n.clientX,y:n.clientY}}function Mm(n){var i;return n.nodeName==="IMG"&&(zm()||!(!((i=document.documentElement)===null||i===void 0)&&i.contains(n)))}function Um(n,i,o,u){let a=n?i.width:o,c=n?i.height:u;return xd()&&n&&(c/=window.devicePixelRatio,a/=window.devicePixelRatio),{dragPreviewWidth:a,dragPreviewHeight:c}}function Bm(n,i,o,u,a){const c=Mm(i),p=Sd(c?n:i),h={x:o.x-p.x,y:o.y-p.y},{offsetWidth:g,offsetHeight:_}=n,{anchorX:C,anchorY:T}=u,{dragPreviewWidth:w,dragPreviewHeight:k}=Um(c,i,g,_),y=()=>{let K=new Zc([0,.5,1],[h.y,h.y/_*k,h.y+k-_]).interpolate(T);return xd()&&c&&(K+=(window.devicePixelRatio-1)*k),K},x=()=>new Zc([0,.5,1],[h.x,h.x/g*w,h.x+w-g]).interpolate(C),{offsetX:j,offsetY:O}=a,R=j===0||j,z=O===0||O;return{x:R?j:x(),y:z?O:y()}}class Hm{get window(){if(this.globalContext)return this.globalContext;if(typeof window<"u")return window}get document(){var i;return!((i=this.globalContext)===null||i===void 0)&&i.document?this.globalContext.document:this.window?this.window.document:void 0}get rootElement(){var i;return((i=this.optionsArgs)===null||i===void 0?void 0:i.rootElement)||this.window}constructor(i,o){this.ownerDocument=null,this.globalContext=i,this.optionsArgs=o}}function Wm(n,i,o){return i in n?Object.defineProperty(n,i,{value:o,enumerable:!0,configurable:!0,writable:!0}):n[i]=o,n}function Qc(n){for(var i=1;i<arguments.length;i++){var o=arguments[i]!=null?arguments[i]:{},u=Object.keys(o);typeof Object.getOwnPropertySymbols=="function"&&(u=u.concat(Object.getOwnPropertySymbols(o).filter(function(a){return Object.getOwnPropertyDescriptor(o,a).enumerable}))),u.forEach(function(a){Wm(n,a,o[a])})}return n}class qm{profile(){var i,o;return{sourcePreviewNodes:this.sourcePreviewNodes.size,sourcePreviewNodeOptions:this.sourcePreviewNodeOptions.size,sourceNodeOptions:this.sourceNodeOptions.size,sourceNodes:this.sourceNodes.size,dragStartSourceIds:((i=this.dragStartSourceIds)===null||i===void 0?void 0:i.length)||0,dropTargetIds:this.dropTargetIds.length,dragEnterTargetIds:this.dragEnterTargetIds.length,dragOverTargetIds:((o=this.dragOverTargetIds)===null||o===void 0?void 0:o.length)||0}}get window(){return this.options.window}get document(){return this.options.document}get rootElement(){return this.options.rootElement}setup(){const i=this.rootElement;if(i!==void 0){if(i.__isReactDndBackendSetUp)throw new Error("Cannot have two HTML5 backends at the same time.");i.__isReactDndBackendSetUp=!0,this.addEventListeners(i)}}teardown(){const i=this.rootElement;if(i!==void 0&&(i.__isReactDndBackendSetUp=!1,this.removeEventListeners(this.rootElement),this.clearCurrentDragSourceNode(),this.asyncEndDragFrameId)){var o;(o=this.window)===null||o===void 0||o.cancelAnimationFrame(this.asyncEndDragFrameId)}}connectDragPreview(i,o,u){return this.sourcePreviewNodeOptions.set(i,u),this.sourcePreviewNodes.set(i,o),()=>{this.sourcePreviewNodes.delete(i),this.sourcePreviewNodeOptions.delete(i)}}connectDragSource(i,o,u){this.sourceNodes.set(i,o),this.sourceNodeOptions.set(i,u);const a=f=>this.handleDragStart(f,i),c=f=>this.handleSelectStart(f);return o.setAttribute("draggable","true"),o.addEventListener("dragstart",a),o.addEventListener("selectstart",c),()=>{this.sourceNodes.delete(i),this.sourceNodeOptions.delete(i),o.removeEventListener("dragstart",a),o.removeEventListener("selectstart",c),o.setAttribute("draggable","false")}}connectDropTarget(i,o){const u=f=>this.handleDragEnter(f,i),a=f=>this.handleDragOver(f,i),c=f=>this.handleDrop(f,i);return o.addEventListener("dragenter",u),o.addEventListener("dragover",a),o.addEventListener("drop",c),()=>{o.removeEventListener("dragenter",u),o.removeEventListener("dragover",a),o.removeEventListener("drop",c)}}addEventListeners(i){i.addEventListener&&(i.addEventListener("dragstart",this.handleTopDragStart),i.addEventListener("dragstart",this.handleTopDragStartCapture,!0),i.addEventListener("dragend",this.handleTopDragEndCapture,!0),i.addEventListener("dragenter",this.handleTopDragEnter),i.addEventListener("dragenter",this.handleTopDragEnterCapture,!0),i.addEventListener("dragleave",this.handleTopDragLeaveCapture,!0),i.addEventListener("dragover",this.handleTopDragOver),i.addEventListener("dragover",this.handleTopDragOverCapture,!0),i.addEventListener("drop",this.handleTopDrop),i.addEventListener("drop",this.handleTopDropCapture,!0))}removeEventListeners(i){i.removeEventListener&&(i.removeEventListener("dragstart",this.handleTopDragStart),i.removeEventListener("dragstart",this.handleTopDragStartCapture,!0),i.removeEventListener("dragend",this.handleTopDragEndCapture,!0),i.removeEventListener("dragenter",this.handleTopDragEnter),i.removeEventListener("dragenter",this.handleTopDragEnterCapture,!0),i.removeEventListener("dragleave",this.handleTopDragLeaveCapture,!0),i.removeEventListener("dragover",this.handleTopDragOver),i.removeEventListener("dragover",this.handleTopDragOverCapture,!0),i.removeEventListener("drop",this.handleTopDrop),i.removeEventListener("drop",this.handleTopDropCapture,!0))}getCurrentSourceNodeOptions(){const i=this.monitor.getSourceId(),o=this.sourceNodeOptions.get(i);return Qc({dropEffect:this.altKeyPressed?"copy":"move"},o||{})}getCurrentDropEffect(){return this.isDraggingNativeItem()?"copy":this.getCurrentSourceNodeOptions().dropEffect}getCurrentSourcePreviewNodeOptions(){const i=this.monitor.getSourceId(),o=this.sourcePreviewNodeOptions.get(i);return Qc({anchorX:.5,anchorY:.5,captureDraggingState:!1},o||{})}isDraggingNativeItem(){const i=this.monitor.getItemType();return Object.keys(Yc).some(o=>Yc[o]===i)}beginDragNativeItem(i,o){this.clearCurrentDragSourceNode(),this.currentNativeSource=Lm(i,o),this.currentNativeHandle=this.registry.addSource(i,this.currentNativeSource),this.actions.beginDrag([this.currentNativeHandle])}setCurrentDragSourceNode(i){this.clearCurrentDragSourceNode(),this.currentDragSourceNode=i;const o=1e3;this.mouseMoveTimeoutTimer=setTimeout(()=>{var u;return(u=this.rootElement)===null||u===void 0?void 0:u.addEventListener("mousemove",this.endDragIfSourceWasRemovedFromDOM,!0)},o)}clearCurrentDragSourceNode(){if(this.currentDragSourceNode){if(this.currentDragSourceNode=null,this.rootElement){var i;(i=this.window)===null||i===void 0||i.clearTimeout(this.mouseMoveTimeoutTimer||void 0),this.rootElement.removeEventListener("mousemove",this.endDragIfSourceWasRemovedFromDOM,!0)}return this.mouseMoveTimeoutTimer=null,!0}return!1}handleDragStart(i,o){i.defaultPrevented||(this.dragStartSourceIds||(this.dragStartSourceIds=[]),this.dragStartSourceIds.unshift(o))}handleDragEnter(i,o){this.dragEnterTargetIds.unshift(o)}handleDragOver(i,o){this.dragOverTargetIds===null&&(this.dragOverTargetIds=[]),this.dragOverTargetIds.unshift(o)}handleDrop(i,o){this.dropTargetIds.unshift(o)}constructor(i,o,u){this.sourcePreviewNodes=new Map,this.sourcePreviewNodeOptions=new Map,this.sourceNodes=new Map,this.sourceNodeOptions=new Map,this.dragStartSourceIds=null,this.dropTargetIds=[],this.dragEnterTargetIds=[],this.currentNativeSource=null,this.currentNativeHandle=null,this.currentDragSourceNode=null,this.altKeyPressed=!1,this.mouseMoveTimeoutTimer=null,this.asyncEndDragFrameId=null,this.dragOverTargetIds=null,this.lastClientOffset=null,this.hoverRafId=null,this.getSourceClientOffset=a=>{const c=this.sourceNodes.get(a);return c&&Sd(c)||null},this.endDragNativeItem=()=>{this.isDraggingNativeItem()&&(this.actions.endDrag(),this.currentNativeHandle&&this.registry.removeSource(this.currentNativeHandle),this.currentNativeHandle=null,this.currentNativeSource=null)},this.isNodeInDocument=a=>!!(a&&this.document&&this.document.body&&this.document.body.contains(a)),this.endDragIfSourceWasRemovedFromDOM=()=>{const a=this.currentDragSourceNode;a==null||this.isNodeInDocument(a)||(this.clearCurrentDragSourceNode()&&this.monitor.isDragging()&&this.actions.endDrag(),this.cancelHover())},this.scheduleHover=a=>{this.hoverRafId===null&&typeof requestAnimationFrame<"u"&&(this.hoverRafId=requestAnimationFrame(()=>{this.monitor.isDragging()&&this.actions.hover(a||[],{clientOffset:this.lastClientOffset}),this.hoverRafId=null}))},this.cancelHover=()=>{this.hoverRafId!==null&&typeof cancelAnimationFrame<"u"&&(cancelAnimationFrame(this.hoverRafId),this.hoverRafId=null)},this.handleTopDragStartCapture=()=>{this.clearCurrentDragSourceNode(),this.dragStartSourceIds=[]},this.handleTopDragStart=a=>{if(a.defaultPrevented)return;const{dragStartSourceIds:c}=this;this.dragStartSourceIds=null;const f=yo(a);this.monitor.isDragging()&&(this.actions.endDrag(),this.cancelHover()),this.actions.beginDrag(c||[],{publishSource:!1,getSourceClientOffset:this.getSourceClientOffset,clientOffset:f});const{dataTransfer:p}=a,h=xa(p);if(this.monitor.isDragging()){if(p&&typeof p.setDragImage=="function"){const _=this.monitor.getSourceId(),C=this.sourceNodes.get(_),T=this.sourcePreviewNodes.get(_)||C;if(T){const{anchorX:w,anchorY:k,offsetX:y,offsetY:x}=this.getCurrentSourcePreviewNodeOptions(),R=Bm(C,T,f,{anchorX:w,anchorY:k},{offsetX:y,offsetY:x});p.setDragImage(T,R.x,R.y)}}try{p==null||p.setData("application/json",{})}catch{}this.setCurrentDragSourceNode(a.target);const{captureDraggingState:g}=this.getCurrentSourcePreviewNodeOptions();g?this.actions.publishDragSource():setTimeout(()=>this.actions.publishDragSource(),0)}else if(h)this.beginDragNativeItem(h);else{if(p&&!p.types&&(a.target&&!a.target.hasAttribute||!a.target.hasAttribute("draggable")))return;a.preventDefault()}},this.handleTopDragEndCapture=()=>{this.clearCurrentDragSourceNode()&&this.monitor.isDragging()&&this.actions.endDrag(),this.cancelHover()},this.handleTopDragEnterCapture=a=>{if(this.dragEnterTargetIds=[],this.isDraggingNativeItem()){var c;(c=this.currentNativeSource)===null||c===void 0||c.loadDataTransfer(a.dataTransfer)}if(!this.enterLeaveCounter.enter(a.target)||this.monitor.isDragging())return;const{dataTransfer:p}=a,h=xa(p);h&&this.beginDragNativeItem(h,p)},this.handleTopDragEnter=a=>{const{dragEnterTargetIds:c}=this;if(this.dragEnterTargetIds=[],!this.monitor.isDragging())return;this.altKeyPressed=a.altKey,c.length>0&&this.actions.hover(c,{clientOffset:yo(a)}),c.some(p=>this.monitor.canDropOnTarget(p))&&(a.preventDefault(),a.dataTransfer&&(a.dataTransfer.dropEffect=this.getCurrentDropEffect()))},this.handleTopDragOverCapture=a=>{if(this.dragOverTargetIds=[],this.isDraggingNativeItem()){var c;(c=this.currentNativeSource)===null||c===void 0||c.loadDataTransfer(a.dataTransfer)}},this.handleTopDragOver=a=>{const{dragOverTargetIds:c}=this;if(this.dragOverTargetIds=[],!this.monitor.isDragging()){a.preventDefault(),a.dataTransfer&&(a.dataTransfer.dropEffect="none");return}this.altKeyPressed=a.altKey,this.lastClientOffset=yo(a),this.scheduleHover(c),(c||[]).some(p=>this.monitor.canDropOnTarget(p))?(a.preventDefault(),a.dataTransfer&&(a.dataTransfer.dropEffect=this.getCurrentDropEffect())):this.isDraggingNativeItem()?a.preventDefault():(a.preventDefault(),a.dataTransfer&&(a.dataTransfer.dropEffect="none"))},this.handleTopDragLeaveCapture=a=>{this.isDraggingNativeItem()&&a.preventDefault(),this.enterLeaveCounter.leave(a.target)&&(this.isDraggingNativeItem()&&setTimeout(()=>this.endDragNativeItem(),0),this.cancelHover())},this.handleTopDropCapture=a=>{if(this.dropTargetIds=[],this.isDraggingNativeItem()){var c;a.preventDefault(),(c=this.currentNativeSource)===null||c===void 0||c.loadDataTransfer(a.dataTransfer)}else xa(a.dataTransfer)&&a.preventDefault();this.enterLeaveCounter.reset()},this.handleTopDrop=a=>{const{dropTargetIds:c}=this;this.dropTargetIds=[],this.actions.hover(c,{clientOffset:yo(a)}),this.actions.drop({dropEffect:this.getCurrentDropEffect()}),this.isDraggingNativeItem()?this.endDragNativeItem():this.monitor.isDragging()&&this.actions.endDrag(),this.cancelHover()},this.handleSelectStart=a=>{const c=a.target;typeof c.dragDrop=="function"&&(c.tagName==="INPUT"||c.tagName==="SELECT"||c.tagName==="TEXTAREA"||c.isContentEditable||(a.preventDefault(),c.dragDrop()))},this.options=new Hm(o,u),this.actions=i.getActions(),this.monitor=i.getMonitor(),this.registry=i.getRegistry(),this.enterLeaveCounter=new $m(this.isNodeInDocument)}}const Vm=function(i,o,u){return new qm(i,o,u)},Gm=({workflowName:n,onSave:i,onImport:o,onNew:u,onStartFromTemplate:a,onExportDevTeam:c})=>l.jsxs("div",{className:"flex justify-between items-center pb-4 mb-4 border-b border-gray-200",children:[l.jsx("h1",{className:"text-2xl font-bold text-primary",children:n}),l.jsxs("div",{className:"flex gap-2",children:[l.jsx("button",{onClick:u,className:"bg-gray-500 hover:bg-gray-600 text-white px-4 py-2 rounded text-sm","data-testid":"new-workflow-button","data-action":"new-workflow",children:"New Workflow"}),l.jsx("button",{onClick:a,className:"bg-green-500 hover:bg-green-600 text-white px-4 py-2 rounded text-sm","data-testid":"start-from-template-button","data-action":"start-from-template",children:"Start from Template"}),l.jsx("input",{type:"file",id:"import-workflow",accept:".json",onChange:o,className:"hidden","data-testid":"import-workflow-input"}),l.jsx("label",{htmlFor:"import-workflow",className:"bg-secondary hover:bg-secondary-600 text-white px-4 py-2 rounded text-sm cursor-pointer","data-testid":"import-workflow-button","data-action":"import-workflow",children:"Import Workflow"}),l.jsx("button",{onClick:i,className:"bg-primary hover:bg-primary-600 text-white px-4 py-2 rounded text-sm","data-testid":"save-workflow-button","data-action":"save-workflow",children:"Save Workflow"}),l.jsx("button",{onClick:c,className:"bg-purple-500 hover:bg-purple-600 text-white px-4 py-2 rounded text-sm","data-testid":"export-dev-team-button","data-action":"export-dev-team",children:"Export for Dev Team"})]})]}),Ym=n=>{switch(n){case"Approval":return"border-primary";case"Upload":return"border-secondary";case"Information":return"border-yellow-400";case"ProvideConsent":return"border-green-500";case"CheckHolds":return"border-orange-500";case"RegisterViaApi":return"border-purple-500";case"ResolveIssue":return"border-red-500";default:return"border-gray-400"}},Oa={"Student Name":"Shelby Hyatt","Course Number":"MATH 101","Course Title":"Introduction to Statistics",CRN:"4857",Section:"A01",Instructor:"Dr. Johnson",Term:"Fall 2023",Credits:"3",Status:"Pending","High School":"Lincoln High School","Hold Names":"Financial Hold, Orientation Required",Messages:"Must resolve holds before registration","Fee Amount":"$350.00","Payment Status":"Unpaid",Grade:"N/A"},Zm={time:"MWF 10:00-10:50 AM",days:"MWF",location:"Main Campus Room 103",instructor:"Dr. Johnson",available_seats:"12 of 30",campus:"Main Campus",delivery:"In Person"},Qm=n=>({time:"Meeting Time",days:"Meeting Days",location:"Location",instructor:"Instructor",available_seats:"Available Seats",campus:"Campus",delivery:"Delivery Method"})[n]||n,Km=({workflowConditionNames:n})=>{const i=Array.isArray(n)?n:[n].filter(Boolean);return i.length===0?null:l.jsxs("div",{className:"mt-2 p-2 bg-amber-50 border border-amber-200 rounded text-xs","data-testid":"conditional-display",children:[l.jsx("div",{className:"font-medium text-amber-800 mb-1","data-testid":"conditional-display-header",children:"Conditional Logic:"}),i.length===1?l.jsxs("div",{className:"text-amber-700 text-xs","data-testid":"conditional-display-single",children:["Using workflow condition: ",l.jsx("span",{className:"font-medium","data-testid":"conditional-display-condition-name",children:i[0]})]}):l.jsxs("div",{className:"text-amber-700 text-xs","data-testid":"conditional-display-multiple",children:[l.jsx("div",{className:"mb-1",children:"Using workflow conditions (ANY of these):"}),l.jsx("ul",{className:"list-disc pl-4",children:i.map(o=>l.jsx("li",{className:"font-medium","data-testid":`conditional-display-condition-${o}`,children:o},o))})]})]})},Xm=n=>n||[],bo=n=>{var i;return n.causes_termination?!0:n.stepType==="Approval"&&((i=n.actionOptions)==null?void 0:i.length)>0?n.actionOptions.some(o=>o.terminates_workflow||o.canTerminate||o.value==="no"):!1},kd=n=>{var i;return n.stepType!=="Approval"||!((i=n.actionOptions)!=null&&i.length)?[]:n.actionOptions.filter(o=>o.terminates_workflow||o.canTerminate||o.value==="no")},Kc=n=>{var o;const i={};return n.title.trim()||(i.title="Title is required"),n.stepType||(i.stepType="Step type is required"),!n.role&&(n.stepType==="Approval"||n.stepType==="Upload"||n.stepType==="Information")&&(i.role="Role is required"),n.stepType==="Upload"&&n.fileUploads.length===0&&(i.fileUploads="At least one file upload is required"),n.conditional&&(!n.workflowCondition||!Array.isArray(n.workflowCondition)||n.workflowCondition.length===0)&&(i.workflowCondition="At least one workflow condition must be selected when step is marked as conditional"),bo(n)&&n.stepType!=="Approval"&&!((o=n.comments)!=null&&o.required)&&(i.comments="Comments must be required for non-Approval steps that can terminate the workflow"),i},Jm=({step:n,index:i,onEdit:o,onDelete:u,isExpanded:a,setIsExpanded:c,isConditionalStep:f,hasWorkflowConditions:p,isFeedbackStep:h,onGenerateView:g})=>{bo(n),n.stepType==="Approval"&&kd(n);const _=n.role==="System"||n.participant_role==="system"||n.stepType==="RegisterViaApi"||n.stepType==="PendingCompletionOfOneTimeSteps"||n.stepType==="PendingCompletionOfPerTermSteps"||n.stepType==="PendingCompletionOfPerYearSteps",C=()=>{if(!n.workflow_category)return null;let T;switch(n.workflow_category){case"One Time":T="bg-purple-100 text-purple-800";break;case"Per Academic Year":T="bg-blue-100 text-blue-800";break;case"Per Term":T="bg-green-100 text-green-800";break;case"Per Course":T="bg-orange-100 text-orange-800";break;case"Drop/Withdraw":T="bg-red-100 text-red-800";break;default:T="bg-gray-100 text-gray-800"}return l.jsx("span",{className:`text-xs px-2 py-0.5 rounded-full ${T}`,"data-testid":"workflow-category-badge",children:n.workflow_category})};return l.jsxs("div",{className:`
        flex border-l-4 
        ${Ym(n.stepType)} 
        ${h?"bg-gray-50":"bg-white"} 
        shadow-sm 
        ${f?"border-l-dashed ml-4":""}
        ${h?"feedback-header":""}
      `,"data-testid":`step-header-${n.id}`,"data-step-id":n.id,"data-step-index":i,"data-header-for":n.id,"data-is-feedback":h?"true":"false","data-is-conditional":f?"true":"false","data-role":n.role||"","data-step-type":n.stepType||"",children:[l.jsxs("div",{className:"step-header flex-grow relative",children:[l.jsx("div",{className:"step-number",children:i+1}),l.jsxs("div",{className:"flex flex-col md:flex-row md:items-center",children:[l.jsxs("div",{className:"step-type font-medium flex items-center",children:[h&&l.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-4 w-4 mr-1 text-gray-500",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:l.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 5l7 7-7 7"})}),n.role?`${n.role}: `:"",n.title||`${n.stepType} Step`,h&&l.jsx("span",{className:"ml-2 text-xs bg-gray-200 text-gray-700 px-1.5 py-0.5 rounded",children:"Feedback"})]}),C()]}),h&&n.feedbackRelationship&&l.jsxs("div",{className:"mt-1 text-xs text-gray-500 pl-9",children:[l.jsx("span",{className:"font-medium",children:"Feedback for:"})," ",n.feedbackRelationship.parentStepTitle||"Parent Step"]}),n.conditional&&n.workflowCondition&&n.workflowCondition.length>0&&l.jsx("div",{className:"pl-9",children:l.jsx(Km,{workflowConditionNames:n.workflowCondition||[]})})]}),l.jsxs("div",{className:"step-controls p-2 flex items-start gap-1",children:[l.jsx("button",{onClick:()=>c(!a),className:"text-gray-500 hover:bg-gray-100 p-1.5 rounded",title:"Toggle Preview","data-testid":`toggle-preview-${n.id}`,"data-action":"toggle-preview","data-for-step":n.id,children:l.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-4 w-4",viewBox:"0 0 20 20",fill:"currentColor",children:l.jsx("path",{fillRule:"evenodd",d:"M5.293 7.293a1 1 0 011.414 0L10 10.586l3.293-3.293a1 1 0 111.414 1.414l-4 4a1 1 0 01-1.414 0l-4-4a1 1 0 010-1.414z",clipRule:"evenodd"})})}),l.jsx("button",{onClick:o,className:"text-blue-500 hover:bg-blue-50 p-1.5 rounded",title:"Edit Step","data-testid":`edit-step-${n.id}`,"data-action":"edit-step","data-for-step":n.id,children:l.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-4 w-4",viewBox:"0 0 20 20",fill:"currentColor",children:l.jsx("path",{d:"M13.586 3.586a2 2 0 112.828 2.828l-.793.793-2.828-2.828.793-.793zM11.379 5.793L3 14.172V17h2.828l8.38-8.379-2.83-2.828z"})})}),!_&&g&&l.jsx("button",{onClick:()=>g(n),className:"text-green-500 hover:bg-green-50 p-1.5 rounded",title:"Generate View Template","data-testid":`generate-view-${n.id}`,"data-action":"generate-view","data-for-step":n.id,children:l.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-4 w-4",viewBox:"0 0 20 20",fill:"currentColor",children:l.jsx("path",{fillRule:"evenodd",d:"M4 4a2 2 0 012-2h4.586A2 2 0 0112 2.586L15.414 6A2 2 0 0116 7.414V16a2 2 0 01-2 2H6a2 2 0 01-2-2V4zm2 6a1 1 0 011-1h6a1 1 0 110 2H7a1 1 0 01-1-1zm1 3a1 1 0 100 2h6a1 1 0 100-2H7z",clipRule:"evenodd"})})}),l.jsx("button",{onClick:u,className:"text-red-500 hover:bg-red-50 p-1.5 rounded",title:"Delete Step","data-testid":`delete-step-${n.id}`,"data-action":"delete-step","data-for-step":n.id,children:l.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-4 w-4",viewBox:"0 0 20 20",fill:"currentColor",children:l.jsx("path",{fillRule:"evenodd",d:"M9 2a1 1 0 00-.894.553L7.382 4H4a1 1 0 000 2v10a2 2 0 002 2h8a2 2 0 002-2V6a1 1 0 100-2h-3.382l-.724-1.447A1 1 0 0011 2H9zM7 8a1 1 0 012 0v6a1 1 0 11-2 0V8zm5-1a1 1 0 00-1 1v6a1 1 0 102 0V8a1 1 0 00-1-1z",clipRule:"evenodd"})})})]})]})},gr=({step:n,children:i})=>l.jsx("div",{className:"workflow-step-preview bg-white rounded border border-gray-200",children:l.jsxs("div",{className:"p-4",children:[l.jsxs("h3",{className:"text-lg font-bold mb-3",children:[n.role,": ",n.title||"Step"]}),l.jsxs("div",{className:"border border-dashed border-gray-300 rounded-md p-5 mb-4",children:[n.description&&l.jsx("p",{className:"text-gray-700 mb-4",children:n.description}),i,n.comments&&n.comments.required&&l.jsxs("div",{className:"mt-4",children:[l.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Comments"}),l.jsx("div",{className:"border border-gray-300 rounded-md p-3 bg-white text-gray-400 text-sm",children:"Note: comments entered here will be communicated to the student and will be visible to other participants."})]})]}),l.jsx("div",{className:"flex justify-center",children:l.jsx("button",{className:"bg-primary text-white font-medium py-2 px-4 rounded-md text-sm uppercase",children:"COMPLETE STEP"})})]})}),eg=({columnName:n,step:i,value:o})=>{let u=!1,a=null,c=null,f=null,p=null,h=null,g=null,_=null;if(i.tableColumns&&(_=i.tableColumns.find(w=>typeof w=="string"?w===n:typeof w=="object"?(w.displayValue||w.label)===n:!1),_&&typeof _=="object"&&_.type==="input"&&(u=!0,a=_.inputType||"text",c=_.value.replace("fields.",""),f=_.options,p=_.min,h=_.max,g=_.step)),u)switch(a){case"section_select":case"other_section_select":const w=_.sampleOptions||["4857","4858","4859"],k=a==="other_section_select";return l.jsx("div",{className:"text-left",children:w.map((y,x)=>k&&x===0?null:l.jsx("div",{className:"mb-1",children:l.jsxs("label",{className:"flex items-center",children:[l.jsx("input",{type:"radio",name:"course_section_id",value:y,className:"mr-1",defaultChecked:!k&&x===0}),l.jsx("span",{children:y}),k&&x===1&&l.jsx("span",{className:"ml-2 text-xs text-gray-500",children:"(alternative section)"})]})},x))});case"number":return l.jsx("input",{type:"number",name:c,className:"w-full p-1 border border-gray-300 rounded",min:p,max:h,step:g,placeholder:`Enter ${n}...`});case"radio":return l.jsx("div",{className:"text-left",children:(f||[]).map((y,x)=>l.jsx("div",{className:"mb-1",children:l.jsxs("label",{className:"flex items-center",children:[l.jsx("input",{type:"radio",name:c,value:y,className:"mr-1"}),l.jsx("span",{children:y})]})},x))});case"select":return l.jsxs("select",{name:c,className:"w-full p-1 border border-gray-300 rounded",children:[l.jsx("option",{value:"",children:"Select..."}),(f||[]).map((y,x)=>l.jsx("option",{value:y,children:y},x))]});case"checkbox":return l.jsx("input",{type:"checkbox",name:c,className:"h-4 w-4"});case"text":default:return l.jsx("input",{type:"text",name:c,className:"w-full p-1 border border-gray-300 rounded",placeholder:`Enter ${n}...`})}if(n!=="CRN"&&n!=="Course Reference Number"&&n!=="CRN Number")return o;const C=[{crn:"4857",selected:!0},{crn:"4858",selected:!1},{crn:"4859",selected:!1}],T=i.crnDisplay||[];return l.jsx("div",{className:"text-left",children:C.map((w,k)=>l.jsxs("div",{className:"mb-3 pb-3 border-b border-gray-200 last:border-0 last:mb-0 last:pb-0",children:[l.jsxs("div",{className:"flex items-center",children:[l.jsx("input",{type:"radio",id:`crn-${w.crn}`,name:"selectedCrn",defaultChecked:w.selected,className:"h-4 w-4 mr-2"}),l.jsx("label",{htmlFor:`crn-${w.crn}`,className:"font-medium",children:w.crn})]}),T.length>0&&l.jsx("div",{className:"mt-1 ml-6 pt-1 text-xs",children:T.map((y,x)=>l.jsxs("div",{className:"py-0.5",children:[l.jsxs("span",{className:"font-medium",children:[Qm(y),":"]})," ",Zm[y]]},x))})]},k))})},tg=({step:n})=>{const i=(n.tableColumns||["Student Name","Course Number","CRN","Instructor"]).map(p=>typeof p=="string"?p:typeof p=="object"&&(p.displayValue||p.label)||"Column"),[o,u]=fe.useState(null),[a,c]=fe.useState(!1),f=o!==null&&n.actionOptions?n.actionOptions[o]:null;return fe.useEffect(()=>{var p;if(!f){c(!1);return}if(f.terminates_workflow||f.canTerminate||f.value==="no"){c(!0);return}if(f.value==="defer"){c(!1);return}c(((p=n.comments)==null?void 0:p.required)||!1)},[o,f,n.comments]),l.jsxs(gr,{step:n,children:[l.jsx("div",{className:"mb-4 overflow-x-auto",children:l.jsxs("table",{className:"min-w-full border-collapse",children:[l.jsx("thead",{children:l.jsxs("tr",{children:[l.jsx("th",{className:"bg-gray-600 p-2"}),i.map((p,h)=>l.jsx("th",{className:"bg-gray-600 text-white p-2 font-medium text-center border border-gray-700",children:p},h))]})}),l.jsx("tbody",{children:l.jsxs("tr",{children:[l.jsx("td",{className:"p-3 border border-gray-300 bg-gray-100 align-top",style:{minWidth:"120px"},children:l.jsx("div",{className:"space-y-2",children:n.actionOptions&&n.actionOptions.length>0?n.actionOptions.map((p,h)=>l.jsxs("div",{className:"flex flex-col",children:[l.jsxs("div",{className:"flex items-center",children:[l.jsx("input",{type:"radio",id:`option-${h}`,name:"actionOption",className:`h-4 w-4 ${p.terminates_workflow||p.canTerminate||p.value==="no"?"text-red-500":""}`,checked:o===h,onChange:()=>u(h),"data-testid":`approval-option-radio-${h}`}),l.jsxs("label",{htmlFor:`option-${h}`,className:`ml-2 text-sm ${p.terminates_workflow||p.canTerminate||p.value==="no"?"text-red-600 font-medium":""}`,children:[p.label,(p.terminates_workflow||p.canTerminate||p.value==="no")&&l.jsx("span",{className:"ml-1 text-xs",children:"(Terminates workflow)"})]})]}),o===h&&p.requiresAdditionalInfo&&l.jsxs("div",{className:"mt-2 ml-6",children:[l.jsx("label",{htmlFor:`additional-info-${h}`,className:"block text-sm text-gray-600 mb-1",children:p.additionalInfoLabel||"Additional Information"}),l.jsx("input",{type:"text",id:`additional-info-${h}`,className:"w-full text-sm p-1 border border-gray-300 rounded",placeholder:`Enter ${p.additionalInfoLabel||"additional information"}...`,"data-testid":`approval-option-additional-info-input-${h}`})]})]},h)):l.jsxs("div",{className:"flex items-center",children:[l.jsx("input",{type:"radio",id:"approve",name:"actionOption",className:"h-4 w-4",checked:o===0,onChange:()=>u(0),"data-testid":"approval-option-radio-default"}),l.jsx("label",{htmlFor:"approve",className:"ml-2 text-sm",children:"Approve"})]})})}),i.map((p,h)=>l.jsx("td",{className:"p-3 text-center border border-gray-300 bg-gray-100",children:l.jsx(eg,{columnName:p,step:n,value:Oa[p]||`Sample ${p}`})},h))]})})]})}),o!==null&&l.jsxs("div",{className:"mt-4",children:[l.jsx("div",{className:"flex items-center mb-2",children:l.jsxs("label",{className:"block text-sm font-medium text-gray-700",children:["Comments",a&&l.jsx("span",{className:"ml-1 text-xs text-red-600 font-normal",children:f!=null&&f.terminates_workflow||f!=null&&f.canTerminate||(f==null?void 0:f.value)==="no"?"(Required for workflow termination)":"(Required)"})]})}),l.jsx("textarea",{className:`w-full border ${a?"border-red-300 bg-red-50":"border-gray-300"} rounded-md p-2 text-sm`,placeholder:a?"Comment required for this action":"Add optional comment...",rows:"3"})]})]})},ng=({step:n})=>l.jsxs(gr,{step:n,children:[n.documentClass&&l.jsx("div",{className:"mb-3",children:l.jsx("div",{className:"bg-blue-50 border border-blue-200 rounded p-2 mb-2",children:l.jsxs("span",{className:"text-sm font-medium text-blue-800",children:["Document Class: ",n.documentClass]})})}),n.fileUploads&&n.fileUploads.length>0&&l.jsx("div",{children:l.jsx("div",{className:"mb-4",children:n.fileUploads.map((i,o)=>l.jsxs("div",{className:"mb-3",children:[l.jsx("h4",{className:"font-medium mb-1",children:i.label}),l.jsxs("div",{className:"border border-gray-300 rounded-md p-3 bg-gray-50 flex items-center",children:[l.jsx("button",{className:"bg-gray-200 hover:bg-gray-300 text-gray-800 px-3 py-1 rounded mr-3 text-sm",children:"Choose File"}),l.jsx("span",{className:"text-gray-500 text-sm",children:"No file chosen"})]}),l.jsxs("p",{className:"text-sm text-gray-500 mt-1",children:["Document Type: ",typeof i.fileType=="object"?i.fileType.label||i.fileType.value:i.fileType]})]},o))})})]}),rg=({step:n})=>l.jsx(gr,{step:n,children:n.informationDisplays&&n.informationDisplays.length>0&&l.jsx("div",{className:"bg-gray-50 border border-gray-200 rounded-md p-3",children:n.informationDisplays.map((i,o)=>l.jsx("p",{className:"mb-2 last:mb-0",children:typeof i=="string"?i:i.content},o))})}),ig=({step:n})=>l.jsx(gr,{step:n,children:l.jsx("div",{className:"mb-4",children:l.jsxs("div",{className:"mb-3",children:[l.jsx("h4",{className:"font-medium mb-2",children:"Parent Consent Form"}),l.jsxs("div",{className:"border border-gray-300 rounded-md p-4 bg-gray-50",children:[l.jsxs("p",{className:"text-sm mb-4",children:["Your child, ",l.jsx("em",{children:"[Student Name]"}),", has signed up to take classes this term."]}),l.jsx("p",{className:"text-sm mb-4",children:"I have read all the information provided and understand the conditions of enrollment. To facilitate this program, I hereby give permission for the college to release all student account information, including financial, academic, and enrollment records, to the student's high school, and the high school to release grades to the college."}),l.jsxs("div",{className:"mt-5",children:[l.jsx("label",{className:"block text-sm font-medium mb-1",children:"Sign electronically by entering your first and last name:"}),l.jsx("div",{className:"flex items-center",children:l.jsx("input",{type:"text",disabled:!0,className:"border border-gray-300 rounded px-3 py-2 bg-white text-gray-600",placeholder:"Parent Name"})})]})]})]})})}),og=({step:n})=>{const i=n.tableColumns||["Hold Names","Messages","Student Name","Section","Grade"];return l.jsx(gr,{step:n,children:l.jsxs("div",{className:"bg-gray-50 border border-gray-300 rounded-md p-4 mb-4",children:[l.jsx("h4",{className:"font-medium mb-2",children:"Student Hold Check"}),l.jsxs("p",{className:"text-sm text-gray-700 mb-4",children:["This student has the following holds: ","{HOLDS LISTED}"]}),l.jsxs("div",{className:"mb-4",children:[l.jsx("div",{className:"mb-2",children:l.jsxs("div",{className:"bg-gray-100 p-3 rounded-md",children:[l.jsxs("div",{className:"flex items-center mb-2",children:[l.jsx("input",{type:"radio",id:"proceed",name:"holdAction",className:"h-4 w-4"}),l.jsx("label",{htmlFor:"proceed",className:"ml-2 text-sm",children:"Proceed Anyway"})]}),l.jsxs("div",{className:"flex items-center",children:[l.jsx("input",{type:"radio",id:"retry",name:"holdAction",className:"h-4 w-4"}),l.jsx("label",{htmlFor:"retry",className:"ml-2 text-sm",children:"Retry"})]})]})}),l.jsx("div",{className:"bg-gray-600 p-2 text-white font-medium text-center mb-px",children:i[0]||"Hold Names"}),l.jsx("div",{className:"bg-gray-100 p-3 text-center mb-2",children:Oa[i[0]]||"Financial Hold, Orientation Required"}),i.slice(1).map((o,u)=>l.jsxs("div",{children:[l.jsx("div",{className:"bg-gray-600 p-2 text-white font-medium text-center mb-px",children:o}),l.jsx("div",{className:"bg-gray-100 p-3 text-center mb-2",children:Oa[o]||`Sample ${o}`})]},u))]})]})})},sg=({step:n})=>l.jsx("div",{className:"workflow-step-preview bg-white rounded border border-gray-200",children:l.jsxs("div",{className:"p-4",children:[l.jsxs("h3",{className:"text-lg font-bold mb-3",children:[n.role,": ",n.title||"Register Via API"]}),l.jsxs("div",{className:"border border-dashed border-gray-300 rounded-md p-5 mb-4",children:[n.description&&l.jsx("p",{className:"text-gray-700 mb-4",children:n.description}),l.jsxs("div",{className:"bg-gray-50 border border-gray-300 rounded-md p-4 mb-4",children:[l.jsx("h4",{className:"font-medium mb-2",children:"API Registration"}),l.jsxs("p",{className:"text-sm text-gray-700",children:["The system will automatically register the student through the ",n.apiEndpoint||"selected"," API integration."]}),l.jsx("div",{className:"mt-4 p-3 bg-gray-100 rounded-md",children:l.jsx("p",{className:"text-xs text-gray-500",children:"This step is processed automatically by the system."})})]})]}),l.jsx("div",{className:"flex justify-center",children:l.jsx("button",{className:"bg-gray-400 text-white font-medium py-2 px-4 rounded-md text-sm uppercase",disabled:!0,children:"SYSTEM PROCESSED"})})]})}),ag=({step:n})=>l.jsxs(gr,{step:n,children:[l.jsxs("div",{className:"bg-gray-50 border border-gray-300 rounded-md p-4 mb-4",children:[l.jsx("h4",{className:"font-medium mb-2",children:"Issue Resolution"}),l.jsxs("p",{className:"text-sm text-gray-700 mb-3",children:["Please address the following issue: ",n.issueType||"Registration Issue"]}),n.fileUploads&&n.fileUploads.length>0?l.jsxs("div",{className:"mt-4",children:[l.jsx("h5",{className:"text-sm font-medium mb-2",children:"Supporting Documents:"}),n.fileUploads.map((i,o)=>l.jsx("div",{className:"mb-2",children:l.jsxs("div",{className:"border border-gray-300 rounded-md p-2 bg-white flex items-center",children:[l.jsx("button",{className:"bg-gray-200 text-gray-800 px-2 py-1 rounded mr-2 text-xs",children:"Choose File"}),l.jsx("span",{className:"text-gray-500 text-xs",children:"No file chosen"})]})},o))]}):null]}),n.actionOptions&&n.actionOptions.length>0?l.jsxs("div",{className:"mt-4",children:[l.jsx("h4",{className:"font-medium mb-2",children:"Resolution Options:"}),l.jsx("div",{className:"space-y-2",children:n.actionOptions.map((i,o)=>l.jsxs("div",{className:"flex items-center",children:[l.jsx("input",{type:"radio",id:`option-${o}`,name:"actionOption",className:"h-4 w-4"}),l.jsx("label",{htmlFor:`option-${o}`,className:"ml-2 text-sm",children:i.label})]},o))})]}):l.jsxs("div",{className:"mt-4",children:[l.jsx("h4",{className:"font-medium mb-2",children:"Resolution Options:"}),l.jsxs("div",{className:"space-y-2",children:[l.jsxs("div",{className:"flex items-center",children:[l.jsx("input",{type:"radio",id:"resolved",name:"resolution",className:"h-4 w-4"}),l.jsx("label",{htmlFor:"resolved",className:"ml-2 text-sm",children:"Issue Resolved"})]}),l.jsxs("div",{className:"flex items-center",children:[l.jsx("input",{type:"radio",id:"unresolved",name:"resolution",className:"h-4 w-4"}),l.jsx("label",{htmlFor:"unresolved",className:"ml-2 text-sm",children:"Issue Cannot Be Resolved"})]})]})]})]}),lg=({step:n})=>l.jsx("div",{className:"workflow-step-preview bg-white rounded border border-gray-200",children:l.jsxs("div",{className:"p-4",children:[l.jsxs("h3",{className:"text-lg font-bold mb-3",children:[n.role,": ",n.title||"Pending Completion of One-Time Steps"]}),l.jsxs("div",{className:"border border-dashed border-gray-300 rounded-md p-5 mb-4",children:[n.description&&l.jsx("p",{className:"text-gray-700 mb-4",children:n.description}),l.jsxs("div",{className:"bg-gray-50 border border-gray-300 rounded-md p-4 mb-4",children:[l.jsx("h4",{className:"font-medium mb-2",children:"Waiting for One-Time Steps"}),l.jsx("p",{className:"text-sm text-gray-700",children:"The system will verify that all one-time application steps have been completed before proceeding."}),l.jsx("div",{className:"mt-4 p-3 bg-gray-100 rounded-md",children:l.jsx("p",{className:"text-xs text-gray-500",children:"This step is processed automatically by the system."})})]})]}),l.jsx("div",{className:"flex justify-center",children:l.jsx("button",{className:"bg-gray-400 text-white font-medium py-2 px-4 rounded-md text-sm uppercase",disabled:!0,children:"SYSTEM PROCESSED"})})]})}),ug=({step:n})=>l.jsx("div",{className:"workflow-step-preview bg-white rounded border border-gray-200",children:l.jsxs("div",{className:"p-4",children:[l.jsxs("h3",{className:"text-lg font-bold mb-3",children:[n.role,": ",n.title||"Pending Completion of Per-Term Steps"]}),l.jsxs("div",{className:"border border-dashed border-gray-300 rounded-md p-5 mb-4",children:[n.description&&l.jsx("p",{className:"text-gray-700 mb-4",children:n.description}),l.jsxs("div",{className:"bg-gray-50 border border-gray-300 rounded-md p-4 mb-4",children:[l.jsx("h4",{className:"font-medium mb-2",children:"Waiting for Per-Term Steps"}),l.jsx("p",{className:"text-sm text-gray-700",children:"The system will verify that all per-term steps have been completed before proceeding."}),l.jsx("div",{className:"mt-4 p-3 bg-gray-100 rounded-md",children:l.jsx("p",{className:"text-xs text-gray-500",children:"This step is processed automatically by the system."})})]})]}),l.jsx("div",{className:"flex justify-center",children:l.jsx("button",{className:"bg-gray-400 text-white font-medium py-2 px-4 rounded-md text-sm uppercase",disabled:!0,children:"SYSTEM PROCESSED"})})]})}),cg=({step:n})=>l.jsx("div",{className:"workflow-step-preview bg-white rounded border border-gray-200",children:l.jsxs("div",{className:"p-4",children:[l.jsxs("h3",{className:"text-lg font-bold mb-3",children:[n.role,": ",n.title||"Pending Completion of Per-Year Steps"]}),l.jsxs("div",{className:"border border-dashed border-gray-300 rounded-md p-5 mb-4",children:[n.description&&l.jsx("p",{className:"text-gray-700 mb-4",children:n.description}),l.jsxs("div",{className:"bg-gray-50 border border-gray-300 rounded-md p-4 mb-4",children:[l.jsx("h4",{className:"font-medium mb-2",children:"Waiting for Per-Year Steps"}),l.jsx("p",{className:"text-sm text-gray-700",children:"The system will verify that all per-year steps have been completed before proceeding."}),l.jsx("div",{className:"mt-4 p-3 bg-gray-100 rounded-md",children:l.jsx("p",{className:"text-xs text-gray-500",children:"This step is processed automatically by the system."})})]})]}),l.jsx("div",{className:"flex justify-center",children:l.jsx("button",{className:"bg-gray-400 text-white font-medium py-2 px-4 rounded-md text-sm uppercase",disabled:!0,children:"SYSTEM PROCESSED"})})]})}),dg=({step:n})=>{const i=()=>{switch(n.stepType){case"Approval":return l.jsx(tg,{step:n});case"Upload":return l.jsx(ng,{step:n});case"Information":return l.jsx(rg,{step:n});case"ProvideConsent":return l.jsx(ig,{step:n});case"CheckHolds":return l.jsx(og,{step:n});case"RegisterViaApi":return l.jsx(sg,{step:n});case"ResolveIssue":return l.jsx(ag,{step:n});case"PendingCompletionOfOneTimeSteps":return l.jsx(lg,{step:n});case"PendingCompletionOfPerTermSteps":return l.jsx(ug,{step:n});case"PendingCompletionOfPerYearSteps":return l.jsx(cg,{step:n});default:return l.jsx("p",{children:"Unknown step type"})}};return l.jsx("div",{className:"p-4 border-t border-gray-200",children:i()})},fg=n=>{switch(n){case"approval":return"#4ade80";case"upload":return"#3b82f6";case"information":return"#f97316";default:return"#6b7280"}},pg=({step:n,index:i,onEdit:o,onDelete:u,moveStep:a,onGenerateView:c})=>{var j;const[f,p]=fe.useState(!1),h=n.conditional&&n.workflowCondition&&(Array.isArray(n.workflowCondition)?n.workflowCondition.length>0:!!n.workflowCondition),g=h,_=n.isFeedbackStep&&n.feedbackRelationship;let C="";_&&n.stepType&&(C=fg(n.stepType.toLowerCase()));const T=fe.useRef(null),[{handlerId:w},k]=Im({accept:"WORKFLOW_STEP",collect(O){return{handlerId:O.getHandlerId()}},hover(O,R){if(!T.current||_)return;const z=O.index,M=i;if(z===M)return;const K=T.current.getBoundingClientRect(),Z=(K.bottom-K.top)/2,ne=R.getClientOffset();if(!ne)return;const U=ne.y-K.top;z<M&&U<Z||z>M&&U>Z||(a(z,M),O.index=M)}}),[{isDragging:y},x]=km({type:"WORKFLOW_STEP",item:()=>({id:n.id,index:i,isParent:!!(n.feedbackLoops&&Object.keys(n.feedbackLoops).length>0),isFeedbackStep:_}),collect:O=>({isDragging:O.isDragging()}),canDrag:()=>!_});return x(k(T)),l.jsxs("div",{ref:T,className:`
        workflow-step 
        ${((j=n.stepType)==null?void 0:j.toLowerCase())||""} 
        ${y?"opacity-50":""}
        ${_?"feedback-child":""}
      `,"data-handler-id":w,"data-testid":`workflow-step-${n.id}`,"data-step-id":n.id,"data-step-type":n.stepType,"data-is-feedback":_?"true":"false","data-parent-id":_&&n.feedbackRelationship?n.feedbackRelationship.parentStepId:"","data-step-index":i,"data-drag-handle":"true","data-has-feedback":n.feedbackLoops&&Object.keys(n.feedbackLoops).length>0?"true":"false","data-step-role":n.role||"","data-is-conditional":h?"true":"false",style:{borderLeft:_?`4px solid ${C}`:"","--parent-color":C},children:[l.jsx(Jm,{step:n,index:i,onEdit:o,onDelete:()=>u(n.id),isExpanded:f,setIsExpanded:p,isConditionalStep:h,hasWorkflowConditions:g,isFeedbackStep:_,onGenerateView:c}),f&&l.jsx(dg,{step:n})]})},Xc=n=>{if(!n||Object.keys(n).length===0)return"{}";const i=u=>u==null?"nil":typeof u=="string"?`'${u}'`:Array.isArray(u)?`[${u.map(a=>i(a)).join(", ")}]`:typeof u=="object"?`{${Object.entries(u).map(([c,f])=>`"${c}" => ${i(f)}`).join(", ")}}`:u.toString();return`{ ${Object.entries(n).map(([u,a])=>`"${u}" => ${i(a)}`).join(", ")} }`},Lt=n=>n?n.toLowerCase().replace(/\s+/g,"_").replace(/[^a-z0-9_]/g,"").replace(/_+/g,"_"):"",ot=n=>n.stepType==="ReviewFailedRegistration"?"college_resubmit_registration":n.stepType==="Approval"?n.title==="Parent Consent"?"parent_consent_provided":n.title==="Review Declined Registration"||n.title==="Resolve Failed Registration"?"college_resubmit_registration":Lt(n.title||"approve"):n.stepType==="Upload"?Lt(n.title||"upload_document"):n.stepType==="Initialization"?"initialization_complete":n.stepType==="WaitForCompletionOfOneTimeSteps"||n.stepType==="PendingCompletionOfOneTimeSteps"?"one_time_workflow_complete":n.stepType==="ProvideConsent"?"parent_consent_provided":n.stepType==="CheckHolds"||n.step_class==="CheckHoldsViaEthosApiStep"?"holds_checked_via_ethos_api":n.stepType==="RegisterViaApi"||n.step_class==="RegisterViaEthosApiStep"?"registration_via_ethos_api":n.stepType==="CheckEligibility"||n.step_class==="RegistrationEligibilityViaEthosApiStep"?"student_eligibility_checked_via_ethos_api":Lt(n.title||"complete"),hg=n=>{const i=ot(n);if(!i)return[];if(n.stepType==="Approval"&&n.feedbackLoops&&Object.keys(n.feedbackLoops).length>0){const o=[i,`${i}_yes`,`${i}_no`,`${i}_declined`];return Object.entries(n.feedbackLoops).forEach(([u,a])=>{if(a.recipient){const c=a.recipient.toLowerCase()==="student"?"student_more_info":a.recipient.toLowerCase()==="parent"?"parent_more_info":a.recipient.toLowerCase()==="high school"||a.recipient.toLowerCase()==="counselor"?"hs_more_info":a.recipient.toLowerCase()==="approver"?"approver_more_info":"more_info";o.push(`${i}_${c}`)}}),o}return i==="college_resubmit_registration"||n.stepType==="ReviewFailedRegistration"?[i,`${i}_yes`,`${i}_no`,`${i}_complete`,`${i}_choose_new_section`]:n.stepType==="Approval"?[i,`${i}_yes`,`${i}_no`,`${i}_declined`]:n.stepType==="Upload"?[i,`${i}_complete`,`${i}_return`]:n.stepType==="CheckHolds"?[i,`${i}_has_holds`,`${i}_no_holds`]:n.stepType==="RegisterViaApi"||n.step_class==="RegisterViaEthosApiStep"?[i,"registration_response_yes","registration_response_no",`${i}_processed`,`${i}_course_section_full`,"registration_via_ethos_api_processed"]:n.stepType==="CheckEligibility"||n.step_class==="RegistrationEligibilityViaEthosApiStep"?[i,`${i}_eligible`,`${i}_ineligible`,"ineligibility_reasons"]:[i,`${i}_complete`]},Ma=n=>{if(n.role){const i=n.role.toLowerCase();switch(i){case"college":return"coll";case"high school":return"hs";case"student":return"student";case"parent":case"parent/guardian":return"parent";case"approver":return"approver";case"processing":case"system":return"system";default:return i==="parent/guardian"?"parent":i}}return"system"},mg=n=>{if(n.role){const i=n.role.toLowerCase();switch(i){case"college":return"College";case"high school":return"High School";case"student":return"Student";case"parent":case"parent/guardian":return"Parent";case"approver":return"Approver";case"processing":case"system":return n.participant?n.participant==="Parent/Guardian"?"Parent":n.participant:"Processing";default:return i==="parent/guardian"?"Parent":n.role}}return"Processing"},gg=n=>{let i="";return n.workflow_category==="Per Course"?i=`<% @student_de_course = @target %>
<% @student = @student_de_course.student %>
<% @course_section = @student_de_course.course_section %>
<% @course = @course_section&.course %>
`:n.workflow_category==="Per Term"?i=`<% @student_term = @target %>
<% @student = @student_term.student %>
`:n.workflow_category==="One Time"?i=`<% @college_student_application = @target %>
<% @student = @college_student_application.student %>
`:i=`<% @student = @target %>
`,`<% completion_state = @active_flow_step.get_parameter_by_name('completion_state') %>
<% active_flow_step_id = @active_flow_step_ids.first %>
<% @target = @target_hash[active_flow_step_id] %>
<% @fields = @fields_hash[active_flow_step_id] %>

${i}
<%= render layout: 'shared/active_view', locals: { active_view_file_instance: __FILE__ } do %>
  <p>${n.description||n.title||"Please complete this step."}</p>
<% end %>

<% @student_documents = @target.student.student_documents %>
<% if @student_documents.present? %>
<%= render partial: 'shared/student_documents_list', locals: {hide_term: true} %>
<% end %>
`},To=(n=!1)=>n?`
<%= render partial: 'shared/active_flow_all_comments_list' %>

<div>
  <%= render partial: 'shared/active_flow_comment_entry', locals: {
    make_comment_required_selector: ".js-comment-required",
    make_comment_optional_selector: ".js-comment-not-required",
  } %>
</div>`:`
<%= render partial: 'shared/active_flow_all_comments_list' %>
<%= render partial: 'shared/active_flow_comment_entry' %>`,yg=n=>`<!-- This is a generic template for a ${n.stepType} step -->
<p>This step needs a custom implementation.</p>

${To()}`,vg=()=>"",_g=(n,i)=>{let o="";return n.tableColumns&&n.tableColumns.length>0&&(o+=wg(n)),(!n.tableColumns||n.tableColumns.length===0)&&(o+=Cd(n)),o+=To(!0),o+=`

<%= javascript_tag do %>
  enableCompletedFields('<%= completion_state %>', 'ul', 'label');
<% end %>`,o},wg=(n,i)=>{const o=n.multipleRows||n.tableColumns.some(a=>typeof a=="string"&&a.toLowerCase()==="action"||typeof a=="object"&&a.field&&a.field.toLowerCase()==="action");let u=`<table class="data-table" style="width: 100%; margin-top:10px">
  <thead>
    <tr>
      <th>Action Options</th>
      ${n.tableColumns.map(a=>`<th>${typeof a=="object"?a.displayValue||a.label:a}</th>`).join(`
      `)}
    </tr>
  </thead>
  <tbody>
`;return o?u+=`  <% @active_flow_step_ids.each do |active_flow_step_id| %>
    <% @target = @target_hash[active_flow_step_id] %>
    <% @fields = @fields_hash[active_flow_step_id] %>
    <tr id="<%=active_flow_step_id%>">
`:u+=`    <tr>
`,u+=`<td>${Cd(n)}</td>`,n.tableColumns.forEach((a,c)=>{typeof a=="object"&&a.value;const f=typeof a=="object"?a.displayValue||a.label:typeof a=="string"?a:"";let p="";if(typeof a=="object"&&a.value)if(a.type==="input"){const h=a.value.replace("fields.","");if(a.inputType==="section_select")p=`<td id="${h}-<%=active_flow_step_id%>">
            <% @target.other_course_sections(@target.student, true).each do |course_section| %>
              <% unless course_section.is_wish_list? %>
                <%= radio_button_tag "fields[#{active_flow_step_id}][${h}]", course_section.id, course_section.id == @target.course_section.id %>&nbsp;<%= course_section.number %><br/>
              <% end %>
            <% end %>
          </td>`;else if(a.inputType==="other_section_select")p=`<td id="${h}-<%=active_flow_step_id%>">
            <% @target.other_course_sections(@target.student, true).each do |course_section| %>
              <% unless course_section.is_wish_list? || course_section.id == @target.course_section.id %>
                <%= radio_button_tag "fields[#{active_flow_step_id}][${h}]", course_section.id, false %>&nbsp;<%= course_section.number %><br/>
              <% end %>
            <% end %>
          </td>`;else switch(a.inputType){case"number":p=`<td id="${h}-<%=active_flow_step_id%>">
              <%= number_field_tag "fields[#{active_flow_step_id}][${h}]", @fields['${h}'], { min: ${a.min||0}, max: ${a.max||9999}, size: 8, step: ${a.step||.1} } %>
            </td>`;break;case"radio":p=`<td style="white-space:nowrap" id="${h}-<%=active_flow_step_id%>">
              ${(a.options||[]).map(g=>`<label><%= radio_button_tag "fields[#{active_flow_step_id}][${h}]", '${g}', @fields['${h}'] == '${g}' %>&nbsp;<b>${g}</b></label><br />`).join("")}
            </td>`;break;case"select":p=`<td id="${h}-<%=active_flow_step_id%>">
              <%= select_tag "fields[#{active_flow_step_id}][${h}]", 
                options_for_select([${(a.options||[]).map(g=>`["${g}", "${g}"]`).join(", ")}], @fields['${h}']), 
                { include_blank: true } %>
            </td>`;break;case"checkbox":p=`<td id="${h}-<%=active_flow_step_id%>">
              <%= check_box_tag "fields[#{active_flow_step_id}][${h}]", "yes", @fields['${h}'] == "yes" %>
            </td>`;break;case"text":default:p=`<td id="${h}-<%=active_flow_step_id%>">
              <%= text_field_tag "fields[#{active_flow_step_id}][${h}]", @fields['${h}'] %>
            </td>`}}else if(a.customField)a.value==="custom"?p=`<td><!-- ${f} data goes here --></td>`:p=`<td><%= @${a.value} %></td>`;else{const h=a.value.split(".");h.length===1?p=`<td><%= @${a.value} %></td>`:p=`<td><%= @${h.join("&.")} %></td>`}else{const h=typeof a=="string"?a.toLowerCase():"";h==="student name"?p="<td><%= @target.student&.display_name %></td>":h.includes("course")&&h.includes("number")?p="<td><%= @course&.number %></td>":h==="crn"?p="<td><%= @course_section&.number %></td>":h.includes("instructor")?p="<td><%= @course_section&.instructor&.name %></td>":n.formFields&&n.formFields[c]?p=bg(n.formFields[c]):p=`<td><!-- ${a} data goes here --></td>`}u+=`      ${p}
`}),o?u+=`    </tr>
  <% end %>
`:u+=`    </tr>
`,u+=`  </tbody>
</table>

`,u},bg=n=>{switch(n.type){case"numeric":case"number":return`<td id="${n.name}-<%=active_flow_step_id%>">
        <%= number_field_tag "fields[#{active_flow_step_id}][${n.name}]", @fields['${n.name}'], { min: ${n.min||0}, max: ${n.max||9999}, size: 8, step: ${n.step||.1} } %>
      </td>`;case"radio":return`<td style="white-space:nowrap" id="${n.name}-<%=active_flow_step_id%>">
        ${(n.options||[]).map(i=>`<label><%= radio_button_tag "fields[#{active_flow_step_id}][${n.name}]", '${i.value}', @fields['${n.name}'] == '${i.value}' %>&nbsp;<b>${i.label}</b></label><br />`).join("")}
      </td>`;case"text":default:return`<td id="${n.name}-<%=active_flow_step_id%>">
        <%= text_field_tag "fields[#{active_flow_step_id}][${n.name}]", @fields['${n.name}'] %>
      </td>`}},Cd=(n,i)=>{let o=`<ul class="main-step-options">
`;return n.actionOptions&&n.actionOptions.length>0?n.actionOptions.forEach((u,a)=>{console.log(u);const c=u.value,f=u.requiresComment||c.includes("_more_info")||c==="decline"||c==="no"||c==="decide_later";let p="";(c==="yes"||c==="approve")&&(p=' class="js-sep"'),o+=`  <li>
    <label${p}>
      <%= radio_button_tag "fields[#{active_flow_step_id}][#{completion_state}]", '${c}', @fields[completion_state] == '${c}', class: 'js-comment-${f?"required":"not-required"}' %>
      ${u.label}
    </label>
  </li>
`}):o+=`  <li>
    <label class="js-sep">
      <%= radio_button_tag "fields[#{active_flow_step_id}][#{completion_state}]", 'yes', @fields[completion_state] == 'yes', class: 'js-comment-not-required' %>
      ${n.approvalLabel||"Approve - I have reviewed and approve this request"}
    </label>
  </li>
  <li>
    <label>
      <%= radio_button_tag "fields[#{active_flow_step_id}][#{completion_state}]", 'no', @fields[completion_state] == 'no', class: 'js-comment-required' %>
      ${n.declineLabel||"Decline - I cannot approve this request"}
    </label>
  </li>
`,o+=`</ul>

`,o},xg=(n,i)=>{console.log(`generating upload template for step: ${n}`);let o="";const u=n.documentClass||"StudentDocument";o+=`<% @${u.toLowerCase().replace(/document$/,"_documents")} = @student.${u.toLowerCase().replace(/document$/,"_documents")} %>

`,o+=`<% @target = @student %>

`,n.parameters&&(n.parameters.update_attributes||n.parameters.update_application_field_values)&&(o+=kg(n));let a="";n.fileUploads&&n.fileUploads.length>0&&(a=`<div class="upload-instructions mb-4">
  <h4 class="text-lg font-medium">Please upload the following:</h4>
  <ul class="list-disc ml-6">
    ${n.fileUploads.map(f=>`<li>${f.label||f.type}</li>`).join(`
    `)}
  </ul>
</div>

`,o+=a);const c=Sg(n);if(o+=`<%= render partial: 'shared/common_upload_document', locals: { 
  upload_document_instructions_partial: 'shared/upload_document_instructions',
  document_class_name: '${u}',
  document_kinds: [${c.map(f=>`'${f}'`).join(", ")}]
} %>
`,n.requireUpload){const f=c.length>0?c.map(p=>`'${p}'`).join(", "):"'transcript', 'other'";o+=`
<% unless @${u.toLowerCase().replace(/document$/,"_documents")}.where(kind: [${f}]).exists? %>
  <%= javascript_tag do -%>
    function validateForm(){
    showFlashMsg('Please upload the required document(s)');
    return false;
    }
  <% end -%>
<% end %>
`}return o+=To(),o},Sg=n=>{const i=[];return n.parameters&&n.parameters.kinds&&Array.isArray(n.parameters.kinds)&&i.push(...n.parameters.kinds),i.length===0&&n.fileUploads&&n.fileUploads.length>0&&n.fileUploads.forEach(o=>{o.fileType&&!i.includes(o.fileType)&&i.push(o.fileType)}),i.length===0&&i.push("other"),i},kg=n=>{let i="";const o=[];if(n.parameters&&n.parameters.update_attributes&&Object.entries(n.parameters.update_attributes).forEach(([u,a])=>{Array.isArray(a)&&a.forEach(c=>o.push({name:c,target:u}))}),n.parameters&&n.parameters.update_application_field_values&&Array.isArray(n.parameters.update_application_field_values)&&n.parameters.update_application_field_values.forEach(u=>{o.push({name:u,target:"application"})}),o.length>0){const u=["Action","Student Name"],a={};o.forEach(c=>{let f=c.name.replace(/_/g," ").replace(/\b\w/g,p=>p.toUpperCase());u.push(f),c.name.includes("gpa")?a[c.name]="number":c.name.includes("grade")||c.name.includes("current")?a[c.name]="radio":c.name.includes("year")?a[c.name]="year":c.name.includes("id")?a[c.name]="id":a[c.name]="text"}),n.parameters&&n.parameters.completion_state&&n.parameters.completion_state,i=`<table class="data-table" style="margin-top:10px">
  <tr>
    ${u.map(c=>`<th${c==="Action"?' width="30px;"':""}>${c}</th>`).join(`
    `)}
  </tr>
  <% @active_flow_step_ids.each do |active_flow_step_id| %>
    <% @target = @target_hash[active_flow_step_id] %>
    <% @fields = @fields_hash[active_flow_step_id] %>
    <tr id="<%=active_flow_step_id%>">
      <td style="white-space:nowrap" id="approve-<%=active_flow_step_id%>">
        <label>
          <%= radio_button_tag "fields[#{active_flow_step_id}][#{completionStateValue}]", 'yes', @fields[completion_state] == 'yes' %>
          <b>Approve</b>
        </label><br />
        <hr style="border-bottom-color: #8e8e8e">
        <label>
          <%= radio_button_tag "fields[#{active_flow_step_id}][#{completionStateValue}]", 'decline', @fields[completion_state] == 'decline' %>
          <b>Deny</b>
        </label><br/>
      </td>
      <td><%= @target.student.display_name %></td>`,o.forEach(c=>{const f=a[c.name];let p="";switch(f){case"number":p=`<td id="${c.name}-<%=active_flow_step_id%>">
        <%= number_field_tag "fields[#{active_flow_step_id}][${c.name}]", @fields['${c.name}'], { min: 0, max: 4, size: 8, step: 0.1 } %>
      </td>`;break;case"year":const h=new Date().getFullYear();p=`<td>
        <%= number_field_tag "fields[#{active_flow_step_id}][${c.name}]", @fields['${c.name}'], { min: ${h}, max: ${h+10}, size: 8, step: 1 } %>
      </td>`;break;case"id":p=`<td>
        <%= text_field_tag "fields[#{active_flow_step_id}][${c.name}]", @fields['${c.name}'], { size: 12, maxlength: 20 } %>
      </td>`;break;case"radio":p=`<td style="white-space:nowrap" id="${c.name}-<%=active_flow_step_id%>">
        <label><%= radio_button_tag "fields[#{active_flow_step_id}][${c.name}]", 'Freshman', @fields['${c.name}'] == 'Freshman' %>&nbsp;<b>Freshman</b></label><br />
        <label><%= radio_button_tag "fields[#{active_flow_step_id}][${c.name}]", 'Sophomore', @fields['${c.name}'] == 'Sophomore' %>&nbsp;<b>Sophomore</b></label><br />
        <label><%= radio_button_tag "fields[#{active_flow_step_id}][${c.name}]", 'Junior', @fields['${c.name}'] == 'Junior' %>&nbsp;<b>Junior</b></label><br />
        <label><%= radio_button_tag "fields[#{active_flow_step_id}][${c.name}]", 'Senior', @fields['${c.name}'] == 'Senior' %>&nbsp;<b>Senior</b></label><br />
      </td>`;break;default:p=`<td>
        <%= text_field_tag "fields[#{active_flow_step_id}][${c.name}]", @fields['${c.name}'] %>
      </td>`}i+=`      ${p}
`}),i+=`    </tr>
  <% end %>
</table>

`,o.some(c=>c.name.includes("gpa"))&&(i+=`
<script type="text/javascript">
  function validateForm() {
    // Check if a transcript is uploaded
    <% unless @student.student_documents.where(kind: 'transcript').exists? %>
    showFlashMsg('Please upload a transcript');
    return false;
    <% end %>

    $("#notice").hide();
    var ok = true;
    $("tr").each(function(){
      var stepId = $(this).attr('id');
      var $approveGpa = $('#approve-' + stepId).find("input[type=radio]:checked");
      var $gpa = $('#gpa-' + stepId).find('input');
      var $academicYear = $('input[type=radio][name^="fields[' + stepId + '][hs_current_grade]"]');

      if ($approveGpa.val() == 'yes') {
        if ($gpa.val() == '') {
          $("#notice").text('One or more GPAs are blank for approved students');
          ok = false;
          $("#notice").css("color","red");
          $("#notice").show();
          $gpa.css("border", "1px solid red");
          setFocus($gpa);
        } else {
          $gpa.css("border", "1px solid gray");

          if (!$academicYear.is(":checked")) {
            $("#notice").text('One or more Academic Years have not been selected for approved students');
            ok = false;
            $("#notice").css("color","red");
            $("#notice").show();
            $academicYear.css("border", "1px solid red");
            setFocus($academicYear);
          } else {
            $academicYear.css("border", "1px solid gray");
          }
        }
      }
    });
    return ok;
  }
<\/script>
`)}return i},Cg=n=>{let i="";return n.informationDisplays&&n.informationDisplays.length>0?i=n.informationDisplays.map(u=>`<div class="info-item mb-4">
    <h4 class="font-medium">${u.title||"Information"}</h4>
    <div>${u.content||""}</div>
  </div>`).join(`

`):i=n.information||"Information to be displayed to the user.",`<div class="info-step-content">
  ${i}
</div>

${To()}`},jd=()=>`<%= render partial: 'shared/common_consent' %>
<br />
<p><%= lt :parent_consent_help %></p>
<%= render partial: 'shared/pci_logo' %>`,jg=()=>`<%= render 'shared/local_text_translation_control' %>
<br />
<p><%= lt :parent_consent_intro %></p>
<br />
<p><%= @target.student.display_name %></p>
<br />
<p><%= lt :parent_consent_instructions_body %></p>`,Tg=(n,i)=>{let o=`<% @student = @target.student %>
<%= render layout: 'shared/active_view', locals: { active_view_file_instance: __FILE__ } do %>
  <p style="margin-bottom: 10px">One of your students, <em><%= @student.display_name %></em>, wishes to enroll in <em><%= @target.course_section.display_name %>.</em>
    This student's registration was submitted but could not be completed. Please review the student's registration and see if it can be corrected for resubmission,
    then indicate below how the registration should be handled.
  </p>
<% end -%>

<h3 style="margin-top: 10px">Explanation:</h3><br />
<%= text_area_tag 'fields[registration_response_reason]', @fields['registration_response_reason'], style: 'width:99%; padding: 10px;', disabled: 'disabled' %>
<br />

<% @student_documents = @student.student_documents %>
<% if @student_documents.present? %>
  <%= render partial: 'shared/student_documents_list', locals: {hide_term: true} %>
<% end %>
<br />`;return o+=`<h3 style="margin-top: 10px"><u>Rejected Registration Disposition</u></h3>
<br />
<ul style="margin: 10px 10px;">`,Sa(n,"student")&&(o+=`
  <li style="margin: 10px 10px;">
    <label>
      <%= radio_button_tag "fields[#{active_flow_step_id}][#{completion_state}]", 'student_resolve_issues', @fields[completion_state] == 'student_resolve_issues', class: 'js-comment-required' %>
      <b>Student resolve issues</b>
    </label>
  </li>`),(Sa(n,"high_school")||Sa(n,"counselor"))&&(o+=`
  <li style="margin: 10px 10px;">
    <label>
      <%= radio_button_tag "fields[#{active_flow_step_id}][#{completion_state}]", 'hs_resolve_issues', @fields[completion_state] == 'hs_resolve_issues', class: 'js-comment-required' %>
      <b>Counselor resolve issues</b>
    </label>
  </li>`),o+=`
  <li style="margin: 10px 10px;">
    <label>
      <%= radio_button_tag "fields[#{active_flow_step_id}][#{completion_state}]", 'yes', @fields[completion_state] == 'yes', class: 'js-comment-not-required' %>
      <b>I have corrected the issue; resubmit</b>
    </label>
  </li>
  <li style="margin: 10px 10px;">
    <label>
      <%= radio_button_tag "fields[#{active_flow_step_id}][#{completion_state}]", 'complete', @fields[completion_state] == 'complete', class: 'js-comment-not-required' %>
      <b>Student was manually enrolled in SIS. Change to complete in DualEnroll.com.</b>
    </label>
  </li>
  <li style="margin: 10px 10px;">
    <label>
      <%= radio_button_tag "fields[#{active_flow_step_id}][#{completion_state}]", 'decline', @fields[completion_state] == 'decline', class: 'js-comment-required' %>
      <b>Terminate the registration and notify the student and counselor</b>
    </label>
  </li>
</ul>`,o+=`
<%= render partial: 'shared/active_flow_all_comments_list' %>
<%= render partial: 'shared/active_flow_comment_entry', locals: {
  public_target: 'student',
  make_comment_required_selector: ".js-comment-required",
  make_comment_optional_selector: ".js-comment-not-required",
} %>`,o},Sa=(n,i)=>n.feedbackLoops?Object.values(n.feedbackLoops).some(o=>{var u;return((u=o.feedbackStepRole)==null?void 0:u.toLowerCase())===i.toLowerCase()}):!1,Td=n=>{ot(n),Ma(n);let i=gg(n);switch(n.stepType){case"Approval":i+=_g(n);break;case"Upload":i+=xg(n);break;case"Information":i+=Cg(n);break;case"ProvideConsent":i+=jd();break;case"ReviewFailedRegistration":i+=Tg(n);break;default:i+=yg(n)}return i+=vg(),i},Nd=n=>{if(n.viewNameOverride)return n.viewNameOverride;if(n.participant_role==="system"||n.role==="System"||n.role==="Processing"||n.stepType==="system"||n.stepType==="RegisterViaApi"||n.stepType==="PendingCompletionOfOneTimeSteps"||n.stepType==="PendingCompletionOfPerTermSteps"||n.stepType==="PendingCompletionOfPerYearSteps")return"";if(n.stepType==="ProvideConsent")return`active_flow_steps/course_registration/${(n.role||n.participant_role||"parent").toLowerCase().replace(/\s+/g,"_")}/provide_consent`;const i=(n.role||n.participant_role||"student").toLowerCase().replace(/\s+/g,"_");let o="";return n.title?o=n.title.toLowerCase().replace(/[^a-z0-9]+/g,"_").replace(/(^_+|_+$)/g,""):o=n.stepType.toLowerCase().replace(/\s+/g,"_"),`active_flow_steps/course_registration/${i}/${o}`},Ng=({step:n,onClose:i})=>{const[o,u]=fe.useState(!1),a=Td(n),c=Nd(n);let f="No view path determined";if(c){const h=c.split("/"),_=`_${h.pop()}.html.erb`;f=`app/views/${[...h,_].join("/")}`}const p=()=>{navigator.clipboard.writeText(a).then(()=>{u(!0),setTimeout(()=>u(!1),2e3)},h=>{console.error("Could not copy text: ",h)})};return l.jsx("div",{className:"fixed inset-0 bg-gray-600 bg-opacity-75 flex items-center justify-center z-50 p-4",children:l.jsxs("div",{className:"bg-white rounded-lg shadow-xl max-w-3xl w-full max-h-[90vh] flex flex-col",children:[l.jsxs("div",{className:"px-6 py-4 border-b flex justify-between items-center",children:[l.jsx("h2",{className:"text-xl font-bold text-gray-800",children:"View Template Generator"}),l.jsx("button",{onClick:i,className:"text-gray-400 hover:text-gray-600","data-testid":"close-view-template-modal",children:l.jsx("svg",{className:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:l.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),l.jsxs("div",{className:"px-6 py-4 flex-grow overflow-auto",children:[l.jsxs("div",{className:"mb-4",children:[l.jsx("h3",{className:"text-lg font-medium text-gray-700",children:"File Path"}),l.jsx("div",{className:"mt-1 p-3 bg-gray-50 rounded-md border border-gray-200 font-mono text-sm break-all",children:f})]}),l.jsxs("div",{className:"mb-4",children:[l.jsxs("div",{className:"flex justify-between items-center",children:[l.jsx("h3",{className:"text-lg font-medium text-gray-700",children:"Template Content"}),l.jsx("button",{onClick:p,className:`
                  px-3 py-1 rounded-md text-sm font-medium
                  ${o?"bg-green-500 text-white":"bg-gray-200 text-gray-700 hover:bg-gray-300"}
                `,"data-testid":"copy-template-btn",children:o?"Copied!":"Copy"})]}),l.jsx("div",{className:"mt-1 p-3 bg-gray-50 rounded-md border border-gray-200 font-mono text-sm overflow-auto max-h-96 whitespace-pre",children:a})]}),l.jsxs("div",{className:"bg-blue-50 text-blue-700 p-4 rounded-md",children:[l.jsx("h4",{className:"font-bold mb-2",children:"Template Usage Instructions"}),l.jsxs("ol",{className:"list-decimal pl-5 space-y-2 text-sm",children:[l.jsx("li",{children:"Copy this template content."}),l.jsx("li",{children:"Create a new file at the path shown above."}),l.jsx("li",{children:"Note that Rails partial templates must begin with an underscore (_) which is already included in the file path."}),l.jsx("li",{children:"Customize as needed to match your college's specific requirements or add additional functionality."}),l.jsx("li",{children:"Ensure that any form fields or buttons in the template correctly use the completion state values defined in your workflow step."})]})]})]}),l.jsx("div",{className:"px-6 py-4 border-t flex justify-end",children:l.jsx("button",{onClick:i,className:"px-4 py-2 bg-gray-200 text-gray-700 rounded-md hover:bg-gray-300","data-testid":"close-btn",children:"Close"})})]})})},Eg=({workflow:n=[],onEditStep:i,onDeleteStep:o,moveStep:u,onAddStep:a})=>{const[c,f]=fe.useState(null),p=g=>{f(g)},h=()=>{f(null)};return l.jsxs("div",{className:"workflow-content-wrapper",children:[n.length===0?l.jsxs("div",{className:"text-center py-8 bg-gray-50 rounded-lg border border-dashed border-gray-300 mb-6","data-testid":"empty-workflow",children:[l.jsx("p",{className:"text-gray-500 mb-2",children:"No steps in this workflow yet"}),l.jsx("p",{className:"text-gray-400 text-sm",children:'Click "Add Step" below to start building your workflow'})]}):l.jsx("div",{className:"space-y-4 mb-6 overflow-visible","data-testid":"workflow-steps-container",children:n.map((g,_)=>l.jsx(pg,{step:g,index:_,onEdit:()=>i(g.id),onDelete:()=>o(g.id),moveStep:u,onGenerateView:p},`${g.id}-${_}`))}),l.jsxs("button",{className:"w-full py-3 bg-green-600 hover:bg-green-700 text-white font-medium rounded-md flex items-center justify-center text-sm",onClick:a,"data-testid":"add-step-button","data-action":"add-step","data-id":"add-step-button",children:[l.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5 mr-2",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:[l.jsx("line",{x1:"12",y1:"5",x2:"12",y2:"19"}),l.jsx("line",{x1:"5",y1:"12",x2:"19",y2:"12"})]}),"Add Step"]}),c&&l.jsx(Ng,{step:c,onClose:h})]})},Ed=n=>n?n.entity&&n.property?Og(n):n.method?Pg(n):"":"",Og=n=>{const{entity:i,property:o,comparison:u,value:a,fields:c}=n,f={Student:"Student",Course:"Course",CourseSection:"Course Section",HighSchool:"High School",Instructor:"Instructor",Term:"Term",College:"College"};let p="";const h=f[i]||i;p+=h;const g=o.replace(/([A-Z])/g," $1").replace(/^./,_=>_.toUpperCase()).replace(/_/g," ");switch(p+=`'s ${g}`,u){case"equals":p+=` equals "${a}"`;break;case"not-equals":p+=` does not equal "${a}"`;break;case"greater-than":case">":p+=` is greater than ${a}`;break;case"less-than":case"<":p+=` is less than ${a}`;break;case"greater-than-or-equal":case">=":p+=` is at least ${a}`;break;case"less-than-or-equal":case"<=":p+=` is at most ${a}`;break;case"contains":case"includes":p+=` includes "${a}"`;break;case"not-contains":p+=` does not include "${a}"`;break;case"present":p+=" is present";break;case"blank":p+=" is blank";break;case"custom":return a;default:p+=` ${u} ${a}`}return c&&c.length>0&&(p+=`  set ${c.join(", ")}`),p},Pg=n=>{const{method:i,comparison:o,value:u,fields:a}=n;let c="",f="",p="";if(i.includes("_")){const _=i.split("_");f=_[0],p=_.slice(1).join("_")}else p=i;const h={student:"Student",course:"Course",section:"Course Section",instructor:"Instructor",high_school:"High School",term:"Term",registration:"Registration"},g={student:{age:"Age",gpa:"GPA",grade_level:"Grade Level",has_financial_aid:"Has Financial Aid",is_first_time:"First-Time Student",has_parent_consent:"Has Parent Consent"},course:{credits:"Credits",category:"Category",discipline:"Discipline",has_prerequisites:"Has Prerequisites"},section:{location:"Location",format:"Format",instructor_type:"Instructor Type",capacity:"Capacity",enrollment_count:"Enrollment Count"},instructor:{is_high_school:"Is High School Instructor",is_college:"Is College Instructor",credentials:"Credentials",discipline:"Discipline"},high_school:{has_feeder_schools:"Has Feeder Schools",payment_policy:"Payment Policy",is_home_school:"Is Home School"},term:{past_withdraw_deadline:"Past Withdraw Deadline",past_drop_deadline:"Past Drop Deadline",is_current:"Is Current Term"},registration:{past_due:"Has Past Due Payment",has_refund:"Has Refund",approval_status:"Approval Status"}};switch(f&&h[f]?(c+=h[f],p&&g[f]&&g[f][p]?c+=`'s ${g[f][p]}`:p&&(c+=`'s ${p.replace(/_/g," ")}`)):c=i.replace(/_/g," "),o){case"==":case"equals":c+=` equals "${u}"`;break;case"!=":case"not-equals":c+=` does not equal "${u}"`;break;case">":case"greater-than":c+=` is greater than ${u}`;break;case"<":case"less-than":c+=` is less than ${u}`;break;case">=":case"greater-than-or-equal":c+=` is at least ${u}`;break;case"<=":case"less-than-or-equal":c+=` is at most ${u}`;break;case"includes":case"contains":c+=` includes "${u}"`;break;case"present":c+=" is present";break;case"blank":c+=" is blank";break;case"custom":return u;default:c+=` ${o} ${u}`}return a&&a.length>0&&(c+=`  set ${a.join(", ")}`),c},Ig=({workflowConditions:n={},onManageConditions:i})=>l.jsxs("div",{className:"mb-6 bg-gray-50 p-4 rounded-lg border border-gray-200",children:[l.jsxs("div",{className:"flex justify-between items-center mb-2",children:[l.jsx("h2",{className:"text-lg font-semibold text-gray-700",children:"Workflow Conditions"}),l.jsxs("button",{onClick:i,className:"bg-green-600 hover:bg-green-700 text-white px-3 py-1 rounded text-sm flex items-center","data-testid":"manage-conditions-button",children:[l.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-4 w-4 mr-1",viewBox:"0 0 20 20",fill:"currentColor",children:l.jsx("path",{fillRule:"evenodd",d:"M10 5a1 1 0 011 1v3h3a1 1 0 110 2h-3v3a1 1 0 11-2 0v-3H6a1 1 0 110-2h3V6a1 1 0 011-1z",clipRule:"evenodd"})}),"Manage Conditions"]})]}),l.jsx("div",{className:"mt-3",children:Object.keys(n).length>0?l.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-2","data-testid":"condition-list",children:Object.entries(n).map(([o,u])=>l.jsxs("div",{className:"bg-white p-3 rounded-md border border-gray-200 shadow-sm","data-testid":`condition-item-${o}`,children:[l.jsx("div",{className:"font-medium text-sm text-gray-800",children:o}),l.jsx("div",{className:"text-xs text-gray-600 mt-1",children:Ed(u)})]},o))}):l.jsxs("div",{className:"text-center py-4 bg-gray-100 rounded-lg border border-dashed border-gray-300",children:[l.jsx("p",{className:"text-gray-500 text-sm",children:"No conditions defined"}),l.jsx("p",{className:"text-gray-400 text-xs mt-1",children:"Create conditions to make parts of your workflow conditional"})]})})]}),mt=({label:n,name:i,type:o="text",value:u,onChange:a,placeholder:c,options:f=[],required:p=!1,error:h,className:g="",children:_,"data-testid":C})=>{const T=()=>{switch(o){case"text":return l.jsx("input",{id:i,name:i,type:"text",value:u||"",onChange:a,placeholder:c,className:`w-full rounded-md border ${h?"border-red-500":"border-gray-300"} px-3 py-2 text-gray-700 focus:outline-none focus:ring-2 focus:ring-primary focus:border-transparent`,required:p,"data-testid":C||`field-${i}`});case"textarea":return l.jsx("textarea",{id:i,name:i,value:u||"",onChange:a,placeholder:c,className:`w-full rounded-md border ${h?"border-red-500":"border-gray-300"} px-3 py-2 text-gray-700 focus:outline-none focus:ring-2 focus:ring-primary focus:border-transparent`,required:p,rows:3});case"select":return l.jsx("select",{id:i,name:i,value:u||"",onChange:a,className:`w-full rounded-md border ${h?"border-red-500":"border-gray-300"} px-3 py-2 text-gray-700 focus:outline-none focus:ring-2 focus:ring-primary focus:border-transparent`,required:p,"data-testid":C||`field-${i}`,children:f.map(w=>{const k=typeof w=="object"?w.value:w,y=typeof w=="object"?w.label:w,x=i.includes("entity")?"entity":i.includes("property")?"property":i.includes("comparison")?"comparison":"";let j="";if(x==="entity")j=k?`entity-option-${k}`:"entity-option-empty";else if(x==="property"){const O=u.split("-").pop();j=k?`property-option-${O}-${k}`:"property-option-empty"}else x==="comparison"&&(j=k?`comparison-option-${k}`:"comparison-option-empty");return l.jsx("option",{value:k,"data-testid":j,children:y},k)})});case"checkbox":return l.jsxs("div",{className:"flex items-center",children:[l.jsx("input",{id:i,name:i,type:"checkbox",checked:u||!1,onChange:a,className:`h-4 w-4 text-primary focus:ring-primary ${h?"border-red-500":"border-gray-300"} rounded`}),l.jsx("label",{htmlFor:i,className:"ml-2 text-sm font-medium text-gray-700",children:n})]});case"radio":return l.jsxs("div",{className:"flex items-center",children:[l.jsx("input",{id:i,name:i,type:"radio",checked:u||!1,onChange:a,className:`h-4 w-4 text-primary focus:ring-primary ${h?"border-red-500":"border-gray-300"}`}),l.jsx("label",{htmlFor:i,className:"ml-2 text-sm font-medium text-gray-700",children:n})]});case"custom":return _;default:return null}};return o==="checkbox"||o==="radio"?l.jsxs("div",{className:`mb-4 ${g}`,children:[T(),h&&l.jsx("p",{className:"text-red-500 text-sm mt-1",children:h})]}):l.jsxs("div",{className:`mb-4 ${g}`,children:[l.jsxs("label",{htmlFor:i,className:"block text-sm font-medium text-gray-700 mb-1",children:[n,p&&l.jsx("span",{className:"text-red-500 ml-1",children:"*"})]}),T(),h&&l.jsx("p",{className:"text-red-500 text-sm mt-1",children:h})]})},Rg=({formData:n,handleChange:i,errors:o={}})=>{const u=[{value:"Approval",label:"Approval"},{value:"Upload",label:"Document Upload"},{value:"Information",label:"Information"},{value:"ProvideConsent",label:"Provide Consent"},{value:"CheckHolds",label:"Check Holds"},{value:"RegisterViaApi",label:"Register Via API"},{value:"ResolveIssue",label:"Resolve Issue"},{value:"ReviewFailedRegistration",label:"Review Failed Registration"},{value:"PendingCompletionOfOneTimeSteps",label:"Pending Completion of One-Time Steps"},{value:"PendingCompletionOfPerTermSteps",label:"Pending Completion of Per Term Steps"},{value:"PendingCompletionOfPerYearSteps",label:"Pending Completion of Per Year Steps"}],a=[{value:"One Time",label:"One Time",description:"Steps that only run once for each student (CollegeStudentApplication + registration_one_time)"},{value:"Per Academic Year",label:"Per Academic Year",description:"Steps that run once per academic year (StudentTerm + registration_academic_year)"},{value:"Per Term",label:"Per Term",description:"Steps that run once per term for each student (StudentTerm + registration)"},{value:"Per Course",label:"Per Course",description:"Steps that run for each course registration (StudentDeCourse + registration)"},{value:"Drop/Withdraw",label:"Drop/Withdraw",description:"Steps for dropping or withdrawing from courses (StudentDeCourse + registration_drop_withdraw)"}],c=[{value:"College",label:"College"},{value:"High School",label:"High School"},{value:"Student",label:"Student"},{value:"Parent",label:"Parent"},{value:"Approver",label:"Approver"},{value:"Dean",label:"Dean"},{value:"System",label:"System"}],f=n.stepType==="RegisterViaApi"||n.stepType==="PendingCompletionOfOneTimeSteps"||n.stepType==="PendingCompletionOfPerTermSteps"||n.stepType==="PendingCompletionOfPerYearSteps";return l.jsxs(l.Fragment,{children:[l.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[l.jsx(mt,{label:"Step Type",name:"stepType",type:"select",value:n.stepType,onChange:i,options:u,error:o.stepType,required:!0,"data-testid":"step-form-type"}),l.jsx(mt,{label:"Workflow Category",name:"workflow_category",type:"select",value:n.workflow_category,onChange:i,options:a,error:o.workflow_category,"data-testid":"field-workflow-category",helpText:"Defines the level at which this workflow operates"})]}),l.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[f&&n.stepType.includes("Pending")?l.jsxs("div",{className:"flex flex-col",children:[l.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Step Title"}),l.jsx("div",{className:"p-2 border border-gray-300 bg-gray-50 rounded-md",children:l.jsx("span",{className:"text-gray-700",children:n.stepType})}),l.jsx("p",{className:"mt-1 text-xs text-gray-500",children:"Pending steps use the step type as title"})]}):l.jsx(mt,{label:"Step Title",name:"title",type:"text",value:n.title,onChange:i,placeholder:`${n.stepType} Step`,error:o.title,required:!0,"data-testid":"step-form-title"}),l.jsx(mt,{label:"Role",name:"role",type:"select",value:n.role,onChange:i,options:c,error:o.role,required:!0,disabled:f,helpText:f?"This step type always uses System role":"","data-testid":"field-role"})]}),l.jsx(mt,{label:"Description",name:"description",type:"textarea",value:n.description,onChange:i,placeholder:"Enter step description",error:o.description,"data-testid":"step-form-description"})]})},ai=({title:n,children:i,className:o="",titleClassName:u="",bodyClassName:a="",footer:c,footerClassName:f="",defaultCollapsed:p=!0,id:h})=>{const[g,_]=fe.useState(p);return l.jsxs("div",{className:`bg-white border border-gray-200 rounded-md ${o}`,children:[l.jsxs("div",{className:`flex justify-between items-center cursor-pointer ${u} text-md font-medium text-gray-800 p-4 border-b ${g?"":"border-gray-200"}`,onClick:()=>_(!g),"data-testid":h?`${h}-header`:"collapsible-header",children:[l.jsx("div",{children:n}),l.jsx("button",{type:"button",className:"focus:outline-none","aria-expanded":!g,"aria-label":g?"Expand section":"Collapse section","data-testid":h?`${h}-expander`:"collapsible-expander",children:l.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:`transform transition-transform duration-200 ${g?"":"rotate-90"}`,children:l.jsx("polyline",{points:"9 18 15 12 9 6"})})})]}),!g&&l.jsxs(l.Fragment,{children:[l.jsx("div",{className:`p-4 ${a}`,"data-testid":h?`${h}-content`:"collapsible-content",children:i}),c&&l.jsx("div",{className:`p-4 border-t border-gray-200 ${f}`,children:c})]})]})},Dg=({formData:n,handleChange:i,errors:o={},workflowConditions:u={},onManageWorkflowConditions:a})=>{const c=Array.isArray(n==null?void 0:n.workflowCondition)?n.workflowCondition:n!=null&&n.workflowCondition?[n.workflowCondition]:[],f=p=>{const h=c.includes(p);let g;h?g=c.filter(C=>C!==p):g=[...c,p];const _=g.length>0;i({target:{name:"conditional",value:_,type:"checkbox",checked:_}}),i({target:{name:"workflowCondition",value:g,type:"array"}})};return l.jsx(ai,{title:"Conditionals",className:"mb-6",bodyClassName:"bg-gray-50",id:"conditionals-section","data-testid":"conditionals-section",children:l.jsxs("div",{className:"mb-4",children:[l.jsx("p",{className:"text-sm mb-4","data-testid":"conditionals-intro",children:"Select the conditions that must be met for this step to be shown in the workflow:"}),Object.keys(u).length>0?l.jsx("div",{className:"space-y-3 mb-4","data-testid":"workflow-conditions-list",children:Object.entries(u).map(([p,h])=>l.jsxs("div",{className:"flex items-start","data-testid":`condition-item-${p}`,"data-condition-name":p,children:[l.jsx("input",{id:`condition-${p}`,type:"checkbox",checked:(n==null?void 0:n.workflowCondition)&&c.includes(p),onChange:()=>f(p),className:"h-4 w-4 mt-1 text-primary focus:ring-primary border-gray-300 rounded","data-testid":`condition-checkbox-${p}`,"data-action":"toggle-condition","data-condition-name":p}),l.jsxs("label",{htmlFor:`condition-${p}`,className:"ml-2 block",children:[l.jsx("div",{className:"font-medium text-sm",children:p}),l.jsx("div",{className:"text-xs text-gray-600",children:Ed(h)})]})]},p))}):l.jsx("div",{className:"p-4 bg-gray-100 border border-dashed border-gray-300 rounded-md mb-4 text-center","data-testid":"no-conditions-message",children:l.jsx("p",{className:"text-gray-500 text-sm",children:"No workflow conditions available. Create your first condition below."})}),l.jsxs("button",{type:"button",onClick:p=>{p.preventDefault(),a({entity:"",property:"",comparison:"",value:"",fields:[]})},className:"w-full px-4 py-2 bg-primary hover:bg-primary-600 text-white rounded-md text-sm flex items-center justify-center","data-testid":"add-condition-button","data-action":"add-condition",children:[l.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-4 w-4 mr-2",viewBox:"0 0 20 20",fill:"currentColor",children:l.jsx("path",{fillRule:"evenodd",d:"M10 3a1 1 0 011 1v5h5a1 1 0 110 2h-5v5a1 1 0 11-2 0v-5H4a1 1 0 110-2h5V4a1 1 0 011-1z",clipRule:"evenodd"})}),"Add New Condition"]})]})})},$g=({formData:n,setFormData:i,errors:o={}})=>{var T,w;const u=si.useMemo(()=>{var k;return(k=n.tableColumns)==null?void 0:k.some(y=>typeof y=="object"&&y.value==="fields.course_section_id"&&y.inputType==="section_select")},[n.tableColumns]);si.useEffect(()=>{var k;if(u){const y=n.updateAttributes||{};((k=y.student_de_course)==null?void 0:k.includes("course_section_id"))||(y.student_de_course=[...y.student_de_course||[],"course_section_id"],i({...n,updateAttributes:y}))}},[u,n.tableColumns]);const[a,c]=fe.useState({label:"",value:"",requiresAdditionalInfo:!1,additionalInfoLabel:"",canTerminate:!1}),[f,p]=fe.useState(!1),h=[{label:"Approve",value:"yes",canTerminate:!1,terminates_workflow:!1},{label:"Decline",value:"no",canTerminate:!0,terminates_workflow:!0},{label:"Defer",value:"defer",canTerminate:!1,terminates_workflow:!1}];fe.useEffect(()=>{var j,O;if(!n.actionOptions||n.actionOptions.length===0)return;const y=kd(n).length>0,x={...n};x.canTerminate=y,y&&(x.comments={...n.comments||{},required:!0}),(x.canTerminate!==n.canTerminate||((j=x.comments)==null?void 0:j.required)!==((O=n.comments)==null?void 0:O.required))&&i(x)},[n.actionOptions,i]);const g=()=>{a.label.trim()!==""&&(i({...n,actionOptions:[...n.actionOptions||[],{...a}]}),c({label:"",value:""}))},_=k=>{var y;(y=n.actionOptions)!=null&&y.some(x=>x.value===k.value)||i({...n,actionOptions:[...n.actionOptions||[],{...k}]})},C=k=>{const y=[...n.actionOptions||[]];y.splice(k,1),i({...n,actionOptions:y})};return l.jsx(l.Fragment,{children:l.jsxs(ai,{title:"Action Options",className:"bg-white mb-6",defaultCollapsed:!0,id:"action-options-section",children:[l.jsx("p",{className:"text-sm text-gray-600 mb-3",children:"These will appear as radio button choices in the step:"}),l.jsx("div",{className:"space-y-2 mb-4",children:(T=n.actionOptions)==null?void 0:T.map((k,y)=>l.jsxs("div",{className:`bg-gray-50 p-2 rounded-md border ${k.canTerminate?"border-red-200":"border-gray-200"}`,children:[l.jsxs("div",{className:"flex items-center justify-between",children:[l.jsxs("div",{className:"flex items-center",children:[l.jsx("span",{className:"inline-block w-4 h-4 border border-gray-400 rounded-full mr-2"}),l.jsxs("span",{className:"text-sm",children:[k.label," ",l.jsxs("span",{className:"text-gray-500 text-xs",children:["(",k.value,")"]})]})]}),l.jsx("button",{type:"button",onClick:()=>C(y),className:"text-red-500 hover:bg-red-50 p-1 rounded",children:l.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-4 w-4",viewBox:"0 0 20 20",fill:"currentColor",children:l.jsx("path",{fillRule:"evenodd",d:"M4.293 4.293a1 1 0 011.414 0L10 8.586l4.293-4.293a1 1 0 111.414 1.414L11.414 10l4.293 4.293a1 1 0 01-1.414 1.414L10 11.414l-4.293 4.293a1 1 0 01-1.414-1.414L8.586 10 4.293 5.707a1 1 0 010-1.414z",clipRule:"evenodd"})})})]}),l.jsx("div",{className:"mt-2 pt-2 border-t border-gray-200",children:l.jsxs("div",{className:"flex flex-col space-y-2",children:[n.actionOptions[y].value==="no"?l.jsxs("div",{className:"flex items-center",children:[l.jsx("div",{className:"h-4 w-4 rounded-full bg-red-600"}),l.jsxs("span",{className:"ml-2 text-sm text-gray-700",children:["Terminates workflow",l.jsx("span",{className:"ml-1 text-xs text-gray-500",children:"(Default behavior)"})]})]}):n.actionOptions[y].value==="approve-yes"?l.jsxs("div",{className:"flex items-center",children:[l.jsx("input",{type:"checkbox",id:`approve-terminates-${y}`,checked:k.terminates_workflow||k.canTerminate||!1,onChange:x=>{const j=[...n.actionOptions||[]];j[y]={...j[y],canTerminate:x.target.checked,terminates_workflow:x.target.checked},i({...n,actionOptions:j})},className:"h-4 w-4 text-green-600 focus:ring-green-500 border-gray-300 rounded","data-testid":`action-option-approve-terminates-checkbox-${y}`}),l.jsx("label",{htmlFor:`approve-terminates-${y}`,className:"ml-2 text-sm text-gray-700",children:"Approval terminates workflow (success)"})]}):n.actionOptions[y].value==="defer"?l.jsxs("div",{className:"flex items-center",children:[l.jsx("div",{className:"h-4 w-4 rounded-full bg-green-600"}),l.jsxs("span",{className:"ml-2 text-sm text-gray-700",children:["Continues workflow",l.jsx("span",{className:"ml-1 text-xs text-gray-500",children:"(Default behavior)"})]})]}):l.jsxs("div",{className:"flex items-center",children:[l.jsx("input",{type:"checkbox",id:`can-terminate-${y}`,checked:k.canTerminate||k.terminates_workflow||!1,onChange:x=>{const j=[...n.actionOptions||[]];j[y]={...j[y],canTerminate:x.target.checked,terminates_workflow:x.target.checked},i({...n,actionOptions:j})},className:"h-4 w-4 text-red-600 focus:ring-red-500 border-gray-300 rounded","data-testid":`action-option-can-terminate-checkbox-${y}`}),l.jsx("label",{htmlFor:`can-terminate-${y}`,className:"ml-2 text-sm text-gray-700",children:"This action will terminate the workflow"})]}),l.jsxs("div",{className:"flex items-center",children:[l.jsx("input",{type:"checkbox",id:`requires-additional-info-${y}`,checked:k.requiresAdditionalInfo||!1,onChange:x=>{const j=[...n.actionOptions||[]];j[y]={...j[y],requiresAdditionalInfo:x.target.checked},i({...n,actionOptions:j})},className:"h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300 rounded","data-testid":`action-option-additional-info-checkbox-${y}`}),l.jsx("label",{htmlFor:`requires-additional-info-${y}`,className:"ml-2 text-sm text-gray-700",children:"Requires additional information"})]}),k.requiresAdditionalInfo&&l.jsxs("div",{className:"mt-2 pl-6",children:[l.jsx("label",{htmlFor:`additional-info-label-${y}`,className:"block text-sm text-gray-700 mb-1",children:"Label for additional information"}),l.jsx("input",{type:"text",id:`additional-info-label-${y}`,value:k.additionalInfoLabel||"",onChange:x=>{const j=[...n.actionOptions||[]];j[y]={...j[y],additionalInfoLabel:x.target.value},i({...n,actionOptions:j})},placeholder:"e.g., Student ID, Reason, etc.",className:"w-full rounded-md border border-gray-300 px-3 py-1 text-sm","data-testid":`action-option-additional-info-label-${y}`})]})]})})]},y))}),l.jsxs("div",{className:"mb-4",children:[l.jsxs("button",{type:"button",onClick:()=>p(!f),className:"text-primary bg-white text-sm flex items-center border border-gray-200 px-3 py-1 rounded",children:[f?"Hide":"Show"," common action options",l.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:`h-4 w-4 ml-1 transform ${f?"rotate-180":""}`,viewBox:"0 0 20 20",fill:"currentColor",children:l.jsx("path",{fillRule:"evenodd",d:"M5.293 7.293a1 1 0 011.414 0L10 10.586l3.293-3.293a1 1 0 111.414 1.414l-4 4a1 1 0 01-1.414 0l-4-4a1 1 0 010-1.414z",clipRule:"evenodd"})})]}),f&&l.jsx("div",{className:"mt-2 p-3 bg-gray-50 border border-gray-200 rounded-md",children:l.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-2",children:[h.filter(k=>{var y;return!((y=n.actionOptions)!=null&&y.some(x=>x.value===k.value||x.label.toLowerCase()===k.label.toLowerCase()))}).map((k,y)=>l.jsxs("button",{type:"button",onClick:()=>_(k),className:"text-left text-sm px-2 py-1 rounded flex items-center text-primary bg-white",children:[l.jsx("span",{className:"w-4 h-4 mr-2 flex-shrink-0",children:"+"}),k.label]},y)),h.length>0&&((w=n.actionOptions)==null?void 0:w.length)>0&&h.every(k=>n.actionOptions.some(y=>y.value===k.value||y.label.toLowerCase()===k.label.toLowerCase()))&&l.jsx("p",{className:"text-gray-500 text-sm col-span-2 italic",children:"All common actions are already added"})]})})]}),l.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-2",children:[l.jsx("input",{type:"text",value:a.label,onChange:k=>c({...a,label:k.target.value}),placeholder:"Button Label (e.g., Approve)",className:"col-span-1 rounded-md border border-gray-300 px-3 py-2 text-sm","data-testid":"new-action-option-label-input"}),l.jsx("input",{type:"text",value:a.value,onChange:k=>c({...a,value:k.target.value}),placeholder:"Value (e.g., yes)",className:"col-span-1 rounded-md border border-gray-300 px-3 py-2 text-sm","data-testid":"new-action-option-value-input"}),l.jsx("button",{type:"button",onClick:g,className:"bg-secondary hover:bg-secondary-600 text-white rounded-md px-3 py-2 text-sm","data-testid":"add-action-option-button",children:"Add Option"})]}),l.jsxs("div",{className:"mt-3 p-3 bg-gray-50 border border-gray-200 rounded-md",children:[l.jsxs("div",{className:"flex flex-col space-y-2",children:[l.jsxs("div",{className:"flex items-center",children:[l.jsx("input",{type:"checkbox",id:"new-option-can-terminate",checked:a.canTerminate||!1,onChange:k=>{c({...a,canTerminate:k.target.checked,terminates_workflow:k.target.checked})},className:"h-4 w-4 text-red-600 focus:ring-red-500 border-gray-300 rounded","data-testid":"new-action-option-can-terminate-checkbox"}),l.jsxs("label",{htmlFor:"new-option-can-terminate",className:"ml-2 text-sm text-gray-700",children:["This action will terminate the workflow",a.label&&a.label.toLowerCase()==="decline"&&l.jsx("span",{className:"ml-1 text-xs text-gray-500",children:'(Recommended for "Decline" actions)'})]})]}),l.jsxs("div",{className:"flex items-center",children:[l.jsx("input",{type:"checkbox",id:"new-option-requires-additional-info",checked:a.requiresAdditionalInfo||!1,onChange:k=>c({...a,requiresAdditionalInfo:k.target.checked}),className:"h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300 rounded","data-testid":"new-action-option-additional-info-checkbox"}),l.jsx("label",{htmlFor:"new-option-requires-additional-info",className:"ml-2 text-sm text-gray-700",children:"Requires additional information"})]})]}),a.requiresAdditionalInfo&&l.jsxs("div",{className:"mt-2 pl-6",children:[l.jsx("label",{htmlFor:"new-option-additional-info-label",className:"block text-sm text-gray-700 mb-1",children:"Label for additional information"}),l.jsx("input",{type:"text",id:"new-option-additional-info-label",value:a.additionalInfoLabel||"",onChange:k=>c({...a,additionalInfoLabel:k.target.value}),placeholder:"e.g., Student ID, Reason, etc.",className:"w-full rounded-md border border-gray-300 px-3 py-1 text-sm","data-testid":"new-action-option-additional-info-label-input"})]})]}),u&&l.jsx("div",{className:"mt-4 p-3 bg-blue-50 border border-blue-200 rounded-md",children:l.jsxs("p",{className:"text-xs text-blue-800",children:[l.jsx("strong",{children:"Note:"}),' When using Section Selection, the "Approve" action option will proceed with the selected section. The section selection radio buttons will update the ',l.jsx("code",{className:"bg-blue-100 px-1 py-0.5 rounded",children:"course_section_id"})," field."]})})]})})},Vt=({title:n,children:i,className:o="",titleClassName:u="",bodyClassName:a="",footer:c,footerClassName:f=""})=>l.jsxs("div",{className:`bg-white border border-gray-200 rounded-md ${o}`,children:[n&&l.jsx("div",{className:`text-md font-medium text-gray-800 mb-3 p-4 border-b border-gray-200 ${u}`,children:n}),l.jsx("div",{className:`p-4 ${a}`,children:i}),c&&l.jsx("div",{className:`p-4 border-t border-gray-200 ${f}`,children:c})]}),Ag=[{value:"StudentDocument",label:"Student Document"},{value:"CollegeDocument",label:"College Document"},{value:"HighSchoolDocument",label:"High School Document"},{value:"CourseDocument",label:"Course Document"},{value:"CourseSectionDocument",label:"Course Section Document"},{value:"CourseReviewDocument",label:"Course Review Document"},{value:"InstructorDocument",label:"Instructor Document"}],Lg=[{value:"transcript",label:"Transcript"},{value:"test_scores",label:"Test Scores"},{value:"additional_documentation",label:"Additional Documentation"},{value:"other",label:"Other"},{value:"consolidated_pdf",label:"Consolidated PDF"},{value:"proof_of_identity",label:"Proof of Identity"},{value:"orientation_certificate",label:"Orientation Certificate"},{value:"regional_center_form",label:"Regional Center Form"},{value:"immunization_form",label:"Immunization Form"},{value:"home_school_affidavit",label:"Home School Affidavit"},{value:"immigration_document",label:"Immigration Document"},{value:"green_card",label:"Green Card"}],zg=({formData:n,setFormData:i,errors:o={}})=>{var h;const[u,a]=fe.useState({fileType:"",label:""}),c=()=>{u.label.trim()===""||u.fileType.trim()===""||(i({...n,fileUploads:[...n.fileUploads||[],{...u}]}),a({fileType:"",label:""}))},f=g=>{const _=[...n.fileUploads||[]];_.splice(g,1),i({...n,fileUploads:_})},p=g=>{i({...n,documentClass:g.target.value})};return si.useEffect(()=>{n.documentClass||i({...n,documentClass:"StudentDocument"})},[]),l.jsxs(Vt,{title:"Document Upload Configuration",className:"bg-white mb-6",children:[o.fileUploads&&l.jsx("div",{className:"mb-4 p-2 bg-red-50 border border-red-200 rounded-md text-red-600 text-sm",children:o.fileUploads}),l.jsxs("div",{className:"mb-4",children:[l.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Document Class"}),l.jsx("select",{value:n.documentClass||"StudentDocument",onChange:p,className:"w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-primary focus:border-primary sm:text-sm","data-testid":"document-class-select",children:Ag.map(g=>l.jsx("option",{value:g.value,children:g.label},g.value))}),l.jsx("p",{className:"mt-1 text-xs text-gray-500",children:"Select the document class that will be used to store uploaded files"})]}),l.jsxs("div",{className:"mb-4",children:[l.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Accepted Document Types"}),l.jsx("div",{className:"space-y-2 mb-4",children:(h=n.fileUploads)==null?void 0:h.map((g,_)=>l.jsxs("div",{className:"flex items-center justify-between bg-gray-50 p-2 rounded-md border border-gray-200",children:[l.jsxs("span",{className:"text-sm",children:[g.label," ",l.jsxs("span",{className:"text-xs",children:["(",g.fileType,")"]})]}),l.jsx("button",{type:"button",onClick:()=>f(_),className:"text-red-500 hover:bg-red-50 p-1 rounded","data-testid":`remove-file-${_}`,children:l.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-4 w-4",viewBox:"0 0 20 20",fill:"currentColor",children:l.jsx("path",{fillRule:"evenodd",d:"M4.293 4.293a1 1 0 011.414 0L10 8.586l4.293-4.293a1 1 0 111.414 1.414L11.414 10l4.293 4.293a1 1 0 01-1.414 1.414L10 11.414l-4.293 4.293a1 1 0 01-1.414-1.414L8.586 10 4.293 5.707a1 1 0 010-1.414z",clipRule:"evenodd"})})})]},_))}),l.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-2",children:[l.jsx("input",{type:"text",value:u.label,onChange:g=>a({...u,label:g.target.value}),placeholder:"File Label (e.g., Transcript)",className:"col-span-1 rounded-md border border-gray-300 px-3 py-2 text-sm","data-testid":"file-label-input"}),l.jsxs("select",{value:u.fileType,onChange:g=>a({...u,fileType:g.target.value}),className:"col-span-1 rounded-md border border-gray-300 px-3 py-2 text-sm","data-testid":"file-type-select",children:[l.jsx("option",{value:"",children:"Select Document Type"}),Lg.map(g=>l.jsx("option",{value:g.value,children:g.label},g.value))]}),l.jsx("button",{type:"button",onClick:c,className:"bg-secondary hover:bg-secondary-600 text-white rounded-md px-3 py-2 text-sm","data-testid":"add-file-button",disabled:!u.label||!u.fileType,children:"Add Document Type"})]}),l.jsx("p",{className:"mt-1 text-xs text-gray-500",children:"Select document types to be collected in this upload step. Document types are standardized to match the core DualEnroll application."})]})]})},Fg=({formData:n,setFormData:i,errors:o={}})=>{var h;const[u,a]=fe.useState(""),c=()=>{u.trim()!==""&&(i({...n,informationDisplays:[...n.informationDisplays||[],{content:u}]}),a(""))},f=g=>{const _=[...n.informationDisplays||[]];_.splice(g,1),i({...n,informationDisplays:_})},p=g=>typeof g=="string"?g:g.content;return l.jsxs(Vt,{title:"Information Displays",className:"bg-white mb-6",children:[l.jsx("div",{className:"space-y-2 mb-4",children:(h=n.informationDisplays)==null?void 0:h.map((g,_)=>l.jsxs("div",{className:"flex items-center justify-between bg-gray-50 p-2 rounded-md border border-gray-200",children:[l.jsx("span",{className:"text-sm",children:p(g)}),l.jsx("button",{type:"button",onClick:()=>f(_),className:"text-red-500 hover:bg-red-50 p-1 rounded",children:l.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-4 w-4",viewBox:"0 0 20 20",fill:"currentColor",children:l.jsx("path",{fillRule:"evenodd",d:"M4.293 4.293a1 1 0 011.414 0L10 8.586l4.293-4.293a1 1 0 111.414 1.414L11.414 10l4.293 4.293a1 1 0 01-1.414 1.414L10 11.414l-4.293 4.293a1 1 0 01-1.414-1.414L8.586 10 4.293 5.707a1 1 0 010-1.414z",clipRule:"evenodd"})})})]},_))}),l.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-2",children:[l.jsx("input",{type:"text",value:u,onChange:g=>a(g.target.value),placeholder:"Information to display",className:"col-span-3 rounded-md border border-gray-300 px-3 py-2 text-sm"}),l.jsx("button",{type:"button",onClick:c,className:"bg-secondary hover:bg-secondary-600 text-white rounded-md px-3 py-2 text-sm",children:"Add Display"})]})]})},Mg=[{value:"text",label:"Text Field"},{value:"number",label:"Number Field"},{value:"select",label:"Dropdown Select"},{value:"radio",label:"Radio Buttons"},{value:"checkbox",label:"Checkbox"},{value:"section_select",label:"All Sections Selection"},{value:"other_section_select",label:"Other Sections Selection"}],ii=[{value:"target.student.display_name",label:"Student Name",type:"display"},{value:"course.number",label:"Course Number",type:"display"},{value:"course.title",label:"Course Title",type:"display"},{value:"course_section.number",label:"CRN",type:"display"},{value:"course_section.section_number",label:"Section",type:"display"},{value:"course_section.instructor.name",label:"Instructor",type:"display"},{value:"term.name",label:"Term",type:"display"},{value:"course.credits",label:"Credits",type:"display"},{value:"registration_status",label:"Status",type:"display"},{value:"target.high_school.name",label:"High School",type:"display"},{value:"fields.hold_names",label:"Hold Names",type:"display"},{value:"fields.messages",label:"Messages",type:"display"},{value:"fee.pretty_fee_amount",label:"Fee Amount",type:"display"},{value:"fields.payment_status",label:"Payment Status",type:"display"},{value:"fields.grade",label:"Grade",type:"display"},{value:"target.student.email",label:"Student Email",type:"display"},{value:"target.student.phone",label:"Student Phone",type:"display"},{value:"fields.student_number",label:"Student ID Input",type:"input",inputType:"text",modelPath:"college_student_application"},{value:"fields.hs_gpa",label:"GPA Input",type:"input",inputType:"number",modelPath:"college_student_application",min:0,max:4,step:.1},{value:"fields.hs_current_grade",label:"Grade Level Input",type:"input",inputType:"radio",modelPath:"college_student_application",options:["Freshman","Sophomore","Junior","Senior"]},{value:"fields.counselor_provided_graduation_year",label:"Graduation Year Input",type:"input",inputType:"number",modelPath:"college_student_application",min:2025,max:2035,step:1},{value:"fields.course_section_id",label:"All Sections Selection",type:"input",inputType:"section_select",modelPath:"student_de_course",description:"Selectable radio buttons for all available course sections (including current selection)",isSpecialRender:!0,sampleOptions:["4857","4858","4859"]},{value:"fields.course_section_id",label:"Other Sections Selection",type:"input",inputType:"other_section_select",modelPath:"student_de_course",description:"Selectable radio buttons for alternative course sections (excluding current selection)",isSpecialRender:!0,sampleOptions:["4857","4858","4859"]},{value:"custom",label:"Custom Field"}],Ug=[{value:"college_student_application",label:"College Student Application"},{value:"student_de_course",label:"Student Course"},{value:"student_term",label:"Student Term"}],Bg=({formData:n,setFormData:i,errors:o={}})=>{const[u,a]=fe.useState(""),[c,f]=fe.useState(""),[p,h]=fe.useState(""),[g,_]=fe.useState(!1),[C,T]=fe.useState(!1),[w,k]=fe.useState("text"),[y,x]=fe.useState(""),[j,O]=fe.useState(""),[R,z]=fe.useState(""),[M,K]=fe.useState(""),[Z,ne]=fe.useState(""),U=()=>{if(!u)return;const N=ii.find(G=>G.value===u);if(!N)return;let L={...N};if(N.value==="custom"){if(!c.trim())return;C&&y?(L={value:p.trim()?`fields.${p}`:"fields.custom_field",label:"Custom Field",displayValue:c,customField:!0,type:"input",inputType:w,modelPath:y},w==="number"&&(R&&(L.min=parseFloat(R)),M&&(L.max=parseFloat(M)),Z&&(L.step=parseFloat(Z))),(w==="radio"||w==="select")&&(L.options=j.split(",").map(G=>G.trim()).filter(G=>G))):L={value:p.trim()?p:"custom",label:"Custom Field",displayValue:c,customField:!0,type:"display"}}if(L.type==="input"&&!L.customField&&(L={...ii.find(ye=>ye.value===u)}),!(n.tableColumns||[]).some(G=>typeof G=="object"?G.value===L.value:G===L.label)){const G=[...n.tableColumns||[],L];if(L.type==="input"&&L.modelPath&&L.value.startsWith("fields.")){const ye=L.value.replace("fields.",""),ee=n.updateAttributes||{};ee[L.modelPath]=[...(ee[L.modelPath]||[]).filter(te=>te!==ye),ye],i({...n,tableColumns:G,updateAttributes:ee})}else i({...n,tableColumns:G})}a(""),f(""),h(""),_(!1),T(!1),k("text"),x(""),O(""),z(""),K(""),ne("")},Q=N=>{const L=[...n.tableColumns||[]];L.splice(N,1),i({...n,tableColumns:L})},ce=N=>{const L=N.target.value;a(L),_(L==="custom");const b=ii.find(G=>G.value===L);b&&b.type==="input"?(k(b.inputType||"text"),x(b.modelPath||""),z(b.min||""),K(b.max||""),ne(b.step||""),O(b.options?b.options.join(", "):"")):(T(!1),k("text"),x(""),O(""),z(""),K(""),ne(""))};return si.useEffect(()=>{if(n.tableColumns&&n.tableColumns.length>0&&typeof n.tableColumns[0]=="string"){const N=n.tableColumns.map(L=>{const b=ii.find(G=>G.label.toLowerCase()===L.toLowerCase());return b?{value:b.value,label:b.label,displayValue:L}:{value:"custom",label:"Custom Field",displayValue:L,customField:!0}});i({...n,tableColumns:N})}},[]),l.jsxs(ai,{title:"Table Columns",className:"bg-white mb-6",defaultCollapsed:!0,"data-testid":"table-columns-section",children:[l.jsx("p",{className:"text-sm text-gray-600 mb-3","data-testid":"table-columns-intro",children:"Define what information columns will appear in the step table. These columns will be used in the view template to display data from the DualEnroll system."}),l.jsx("div",{className:"space-y-2 mb-4","data-testid":"existing-table-columns",children:(n.tableColumns||[]).map((N,L)=>l.jsxs("div",{className:"flex items-center justify-between bg-gray-50 p-2 rounded-md border border-gray-200","data-testid":`table-column-${L}`,"data-column-index":L,children:[l.jsxs("div",{className:"flex-1",children:[l.jsxs("div",{className:"flex items-center",children:[l.jsx("span",{className:"text-sm font-medium",children:typeof N=="string"?N:N.displayValue||N.label}),typeof N=="object"&&N.type==="input"&&l.jsx("span",{className:"ml-2 text-xs px-2 py-0.5 bg-blue-100 text-blue-800 rounded",children:"Input Field"})]}),typeof N=="object"&&l.jsxs("div",{className:"text-xs text-gray-500 mt-1",children:[N.type==="display"&&!N.customField&&l.jsxs(l.Fragment,{children:["Ruby: ",N.value]}),N.type==="input"&&N.inputType==="section_select"&&l.jsxs(l.Fragment,{children:["Field: ",N.value.replace("fields.",""),", Type: All Sections Selection, Model: ",N.modelPath||"none",l.jsx("span",{className:"ml-2 text-xs px-1 py-0.5 bg-blue-100 text-blue-700 rounded",children:"Shows all sections, including current"})]}),N.type==="input"&&N.inputType==="other_section_select"&&l.jsxs(l.Fragment,{children:["Field: ",N.value.replace("fields.",""),", Type: Other Sections Selection, Model: ",N.modelPath||"none",l.jsx("span",{className:"ml-2 text-xs px-1 py-0.5 bg-blue-100 text-blue-700 rounded",children:"Shows only alternative sections"})]}),N.type==="input"&&N.inputType!=="section_select"&&N.inputType!=="other_section_select"&&l.jsxs(l.Fragment,{children:["Field: ",N.value.replace("fields.",""),", Type: ",N.inputType||"text",", Model: ",N.modelPath||"none",N.inputType==="number"&&l.jsxs(l.Fragment,{children:[", Range: ",N.min||"0"," to ",N.max||"",", Step: ",N.step||"1"]}),(N.inputType==="radio"||N.inputType==="select")&&N.options&&N.options.length>0&&l.jsxs(l.Fragment,{children:[", Options: ",N.options.join(", ")]})]}),N.customField&&N.type==="display"&&N.value!=="custom"&&l.jsxs(l.Fragment,{children:["Ruby: ",N.value]})]})]}),l.jsx("button",{type:"button",onClick:()=>Q(L),className:"text-red-500 hover:bg-red-50 p-1 rounded flex-shrink-0","data-testid":`remove-column-${L}`,"data-action":"remove-column","data-column-index":L,children:l.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-4 w-4",viewBox:"0 0 20 20",fill:"currentColor",children:l.jsx("path",{fillRule:"evenodd",d:"M4.293 4.293a1 1 0 011.414 0L10 8.586l4.293-4.293a1 1 0 111.414 1.414L11.414 10l4.293 4.293a1 1 0 01-1.414 1.414L10 11.414l-4.293 4.293a1 1 0 01-1.414-1.414L8.586 10 4.293 5.707a1 1 0 010-1.414z",clipRule:"evenodd"})})})]},L))}),l.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-2","data-testid":"add-column-form",children:[l.jsx("div",{children:l.jsxs("select",{value:u,onChange:ce,className:"w-full rounded-md border border-gray-300 px-3 py-2 text-sm","data-testid":"column-select",children:[l.jsx("option",{value:"",children:"Select a column type"}),ii.map(N=>l.jsx("option",{value:N.value,children:N.label},N.value))]})}),g&&l.jsx("div",{children:l.jsx("input",{type:"text",value:c,onChange:N=>f(N.target.value),placeholder:"Display Label (e.g., Student GPA)",className:"w-full rounded-md border border-gray-300 px-3 py-2 text-sm","data-testid":"custom-column-input"})}),g&&l.jsx("div",{className:"col-span-1 md:col-span-2",children:l.jsx("input",{type:"text",value:p,onChange:N=>h(N.target.value),placeholder:"Ruby Code (e.g., target.student.gpa) - Optional",className:"w-full rounded-md border border-gray-300 px-3 py-2 text-sm","data-testid":"custom-column-code-input"})}),g&&l.jsx("div",{className:"col-span-1 md:col-span-2 mt-2",children:l.jsxs("div",{className:"flex items-center",children:[l.jsx("input",{type:"checkbox",id:"is-input-field",checked:C,onChange:N=>T(N.target.checked),className:"h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300 rounded","data-testid":"is-input-field-checkbox"}),l.jsx("label",{htmlFor:"is-input-field",className:"ml-2 text-sm text-gray-700",children:"This is an input field (for user data entry)"})]})}),g&&C&&l.jsxs("div",{className:"col-span-1 md:col-span-2 mt-2 p-3 bg-gray-50 border border-gray-200 rounded-md space-y-3",children:[l.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-3",children:[l.jsxs("div",{children:[l.jsx("label",{htmlFor:"input-field-type",className:"block text-sm text-gray-700 mb-1",children:"Input Field Type"}),l.jsx("select",{id:"input-field-type",value:w,onChange:N=>k(N.target.value),className:"w-full rounded-md border border-gray-300 px-3 py-1 text-sm","data-testid":"input-field-type-select",children:Mg.map(N=>l.jsx("option",{value:N.value,children:N.label},N.value))})]}),l.jsxs("div",{children:[l.jsx("label",{htmlFor:"model-path",className:"block text-sm text-gray-700 mb-1",children:"Model Path (for update_attributes)"}),l.jsxs("select",{id:"model-path",value:y,onChange:N=>x(N.target.value),className:"w-full rounded-md border border-gray-300 px-3 py-1 text-sm","data-testid":"model-path-select",children:[l.jsx("option",{value:"",children:"Select Model"}),Ug.map(N=>l.jsx("option",{value:N.value,children:N.label},N.value))]})]})]}),(w==="radio"||w==="select")&&l.jsxs("div",{children:[l.jsx("label",{htmlFor:"field-options",className:"block text-sm text-gray-700 mb-1",children:"Options (comma separated)"}),l.jsx("input",{type:"text",id:"field-options",value:j,onChange:N=>O(N.target.value),placeholder:"e.g., Freshman, Sophomore, Junior, Senior",className:"w-full rounded-md border border-gray-300 px-3 py-1 text-sm","data-testid":"field-options-input"})]}),w==="number"&&l.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-3",children:[l.jsxs("div",{children:[l.jsx("label",{htmlFor:"field-min",className:"block text-sm text-gray-700 mb-1",children:"Min Value"}),l.jsx("input",{type:"number",id:"field-min",value:R,onChange:N=>z(N.target.value),placeholder:"e.g., 0",className:"w-full rounded-md border border-gray-300 px-3 py-1 text-sm","data-testid":"field-min-input"})]}),l.jsxs("div",{children:[l.jsx("label",{htmlFor:"field-max",className:"block text-sm text-gray-700 mb-1",children:"Max Value"}),l.jsx("input",{type:"number",id:"field-max",value:M,onChange:N=>K(N.target.value),placeholder:"e.g., 100",className:"w-full rounded-md border border-gray-300 px-3 py-1 text-sm","data-testid":"field-max-input"})]}),l.jsxs("div",{children:[l.jsx("label",{htmlFor:"field-step",className:"block text-sm text-gray-700 mb-1",children:"Step Value"}),l.jsx("input",{type:"number",id:"field-step",value:Z,onChange:N=>ne(N.target.value),placeholder:"e.g., 0.1",className:"w-full rounded-md border border-gray-300 px-3 py-1 text-sm","data-testid":"field-step-input"})]})]})]}),l.jsx("div",{className:g?"col-span-1 md:col-span-2":"col-span-1",children:l.jsx("button",{type:"button",onClick:U,className:"bg-secondary hover:bg-secondary-600 text-white rounded-md px-3 py-2 text-sm w-full","data-testid":"add-column-button","data-action":"add-column",disabled:!u||u==="custom"&&!c,children:"Add Column"})})]}),l.jsx("p",{className:"mt-2 text-xs text-gray-500",children:"Select standard column types to display data from the DualEnroll system. For custom fields, you can optionally specify the Ruby code accessor to use in the view template."})]})},Hg=({formData:n,setFormData:i})=>{if(!(n.tableColumns||[]).includes("CRN"))return null;const u=[{value:"time",label:"Meeting Time"},{value:"days",label:"Meeting Days"},{value:"location",label:"Location"},{value:"instructor",label:"Instructor"},{value:"available_seats",label:"Available Seats"},{value:"campus",label:"Campus"},{value:"delivery",label:"Delivery Method"}],a=f=>{const{name:p,checked:h}=f.target,g=n.crnDisplay||[];i(h?{...n,crnDisplay:[...g,p]}:{...n,crnDisplay:g.filter(_=>_!==p)})},c=f=>{const{checked:p}=f.target;i({...n,showCrnInfo:p,crnDisplay:p?n.crnDisplay||[]:[]})};return l.jsxs(ai,{title:"CRN Display Settings",className:"bg-white mb-6",defaultCollapsed:!0,"data-testid":"crn-display-section",children:[l.jsxs("div",{className:"mb-4","data-testid":"crn-display-intro",children:[l.jsxs("div",{className:"flex items-center",children:[l.jsx("input",{type:"checkbox",id:"show-crn-info",name:"showCrnInfo",checked:n.showCrnInfo||!1,onChange:c,className:"h-4 w-4 text-primary focus:ring-primary border-gray-300 rounded","data-testid":"show-crn-info-checkbox","data-action":"toggle-crn-info"}),l.jsx("label",{htmlFor:"show-crn-info",className:"ml-2 text-sm font-medium text-gray-700",children:"Additional Section CRN Information?"})]}),l.jsx("p",{className:"text-xs text-gray-500 mt-1 ml-6",children:"Enable to display additional information alongside the CRN column"})]}),n.showCrnInfo&&l.jsxs("div",{"data-testid":"crn-display-options",children:[l.jsx("p",{className:"text-sm text-gray-600 mb-3","data-testid":"crn-display-options-intro",children:"Select additional information to display alongside the CRN:"}),l.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-2","data-testid":"crn-display-fields",children:u.map(f=>l.jsxs("div",{className:"flex items-center","data-testid":`crn-field-${f.value}`,children:[l.jsx("input",{type:"checkbox",id:`crn-display-${f.value}`,name:f.value,checked:(n.crnDisplay||[]).includes(f.value),onChange:a,className:"h-4 w-4 text-primary focus:ring-primary border-gray-300 rounded","data-testid":`crn-field-checkbox-${f.value}`,"data-action":"toggle-crn-field","data-field-name":f.value}),l.jsx("label",{htmlFor:`crn-display-${f.value}`,className:"ml-2 text-sm text-gray-700",children:f.label})]},f.value))}),l.jsx("div",{className:"mt-4 p-3 bg-blue-50 border border-blue-100 rounded-md","data-testid":"crn-display-info",children:l.jsx("p",{className:"text-xs text-blue-700",children:"Selected fields will be displayed underneath the CRN in the table. This helps users see important details about each section without additional clicks."})})]})]})},Wg=({formData:n,setFormData:i,errors:o={}})=>{var g,_,C;const[u,a]=fe.useState(!1);fe.useEffect(()=>{var k;const T=((k=n.comments)==null?void 0:k.required)||!1;if(u)return;bo(n)&&n.stepType!=="Approval"&&!T&&i({...n,comments:{...n.comments||{},required:!0}})},[n.actionOptions,n.stepType,u]);const c=T=>{const{name:w,type:k,checked:y,value:x}=T.target;a(!0),i({...n,comments:{...n.comments||{},[w]:k==="checkbox"?y:x}})},f=bo(n),p=n.stepType==="Approval"&&f,h=f&&!p;return l.jsxs(Vt,{title:"Comments",className:"bg-white mb-6",children:[o.comments&&l.jsx("div",{className:"mb-3 p-2 bg-red-50 border border-red-200 rounded-md",children:l.jsx("p",{className:"text-sm text-red-600",children:o.comments})}),f&&l.jsx("div",{className:"mb-3 p-2 bg-yellow-50 border border-yellow-200 rounded-md",children:l.jsxs("p",{className:"text-sm text-yellow-800",children:[l.jsx("strong",{children:"Note:"})," This step has action options that can terminate the workflow. Comments are automatically required when termination options are selected, regardless of the setting below."]})}),l.jsxs("div",{className:"flex items-center mb-4",children:[l.jsx("input",{id:"commentsRequired",name:"required",type:"checkbox",checked:((g=n.comments)==null?void 0:g.required)||!1,onChange:c,className:"h-4 w-4 text-primary focus:ring-primary border-gray-300 rounded","data-testid":"comments-required-checkbox",disabled:h}),l.jsxs("label",{htmlFor:"commentsRequired",className:"ml-2 text-sm font-medium text-gray-700",children:["Require Comments for All Actions",l.jsx("span",{className:"ml-1 text-xs text-gray-500",children:"(When unchecked, comments are still required for terminating actions)"})]})]}),((_=n.comments)==null?void 0:_.required)&&l.jsxs("div",{className:"flex items-center mb-4 ml-6",children:[l.jsx("input",{id:"commentsPublic",name:"public",type:"checkbox",checked:((C=n.comments)==null?void 0:C.public)??!0,onChange:c,className:"h-4 w-4 text-primary focus:ring-primary border-gray-300 rounded"}),l.jsx("label",{htmlFor:"commentsPublic",className:"ml-2 text-sm font-medium text-gray-700",children:"Make Comments Public"})]})]})},Pa=(n="")=>`${n}${Date.now()}_${Math.random().toString(36).substr(2,9)}`,qg=({recipientRole:n,stepTitle:i,requestingRole:o,parentStepTitle:u="Previous Step",feedbackId:a,parentStepId:c,parentStepData:f})=>{if(!c)throw new Error("Parent step ID is required for feedback steps");return{...{conditional:f.conditional||!1,workflowCondition:f.workflowCondition||[],workflow_category:f.workflow_category||"Per Course",tableColumns:f.tableColumns||["Student Name","Document","Upload Status"]},stepType:"Upload",title:i.trim(),role:n,description:"Please provide the requested information to continue the process.",fileUploads:[{label:"Supporting Documentation",required:!0}],actionOptions:[{label:`Return to ${o}`,value:`return-to-${o.toLowerCase().replace(/\s+/g,"-")}`}],comments:{required:!0,public:!0},isFeedbackStep:!0,feedbackRelationship:{feedbackId:a,parentStepId:c,parentStepTitle:u,requestingRole:o,recipientRole:n},informationDisplays:[],showCrnInfo:!1,crnDisplay:[]}},Vg=n=>{const i={};return n.recipient||(i.recipient="A recipient role is required"),(!n.nextStep||!n.nextStep.trim())&&(i.nextStep="A step name is required"),i},Gg=({formData:n,setFormData:i,onAddFeedbackStep:o})=>{const[u,a]=fe.useState({recipient:"",nextStep:""}),[c,f]=fe.useState({}),[p,h]=fe.useState(!1),[g,_]=fe.useState(!1);fe.useEffect(()=>{if(p){const y=setTimeout(()=>{h(!1)},3e3);return()=>clearTimeout(y)}},[p]),fe.useEffect(()=>{g&&(u.recipient||u.nextStep)&&_(!0)},[u.recipient,u.nextStep]);const C=[{value:"Student",label:"Student"},{value:"High School",label:"High School"},{value:"College",label:"College"},{value:"Approver",label:"Approver"},{value:"Parent",label:"Parent"}],T=()=>{const y=Vg(u);if(Object.keys(y).length>0){f(y);return}f({});const x=n.id||Pa("step_");n.id||i(R=>({...R,id:x}));const j=Pa("feedback_"),O=qg({recipientRole:u.recipient,stepTitle:u.nextStep.trim(),requestingRole:n.role,parentStepTitle:n.title||"Requesting Step",feedbackId:j,parentStepId:x,parentStepData:n});i({...n,pendingFeedbackSteps:[...n.pendingFeedbackSteps||[],O],feedbackLoops:{...n.feedbackLoops||{},[j]:{recipient:u.recipient,nextStep:u.nextStep.trim()}}}),a({recipient:"",nextStep:""}),h(!0)},w=y=>{const x={...n.feedbackLoops||{}};delete x[y];const j=(n.pendingFeedbackSteps||[]).filter(O=>O.feedbackId!==y);i({...n,feedbackLoops:x,pendingFeedbackSteps:j})},k=Object.entries(n.feedbackLoops||{}).map(([y,x])=>({id:y,...x}));return l.jsxs(ai,{title:"Feedback Loops (Optional)",className:"bg-white mb-6",defaultCollapsed:!0,id:"feedback-loops-section","data-testid":"feedback-loops-section",children:[l.jsxs("div",{className:"bg-blue-50 p-3 rounded-md border border-blue-100 mb-4","data-testid":"feedback-loops-info",children:[l.jsx("p",{className:"text-sm text-blue-700 mb-2",children:"Feedback loops create additional steps when the user needs to request more information from another participant. These steps will automatically include document upload capabilities and return actions."}),l.jsxs("div",{className:"my-3 p-3 bg-white rounded-md border border-blue-100","data-testid":"feedback-diagram",children:[l.jsx("h4",{className:"text-sm font-medium text-blue-800 mb-2",children:"How Feedback Loops Work:"}),l.jsxs("div",{className:"flex items-center justify-center space-x-2 text-sm",children:[l.jsxs("div",{className:"bg-gray-100 p-2 rounded-md border border-gray-200 text-center",children:[l.jsx("div",{className:"font-medium text-gray-800",children:n.role||"This Step"}),l.jsx("div",{className:"text-xs text-gray-500",children:"Requests information"})]}),l.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6 text-blue-500",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:l.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M13 7l5 5m0 0l-5 5m5-5H6"})}),l.jsxs("div",{className:"bg-blue-100 p-2 rounded-md border border-blue-200 text-center",children:[l.jsx("div",{className:"font-medium text-blue-800",children:"Recipient"}),l.jsx("div",{className:"text-xs text-blue-500",children:"Uploads documents"})]}),l.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6 text-blue-500",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:l.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M11 17l-5-5m0 0l5-5m-5 5h12"})}),l.jsxs("div",{className:"bg-gray-100 p-2 rounded-md border border-gray-200 text-center",children:[l.jsx("div",{className:"font-medium text-gray-800",children:n.role||"This Step"}),l.jsx("div",{className:"text-xs text-gray-500",children:"Reviews response"})]})]})]})]}),p&&l.jsxs("div",{className:"bg-green-50 p-3 rounded-md border border-green-200 mb-4 flex items-center transition-all duration-500 ease-in-out","data-testid":"feedback-success-message",children:[l.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5 text-green-500 mr-2",viewBox:"0 0 20 20",fill:"currentColor",children:l.jsx("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z",clipRule:"evenodd"})}),l.jsx("span",{className:"text-green-700",children:"Feedback loop created successfully!"})]}),k.length>0&&l.jsx("div",{className:"space-y-2 mb-4","data-testid":"existing-feedback-loops",children:k.map(y=>l.jsxs("div",{className:"flex items-center justify-between bg-gray-50 p-3 rounded-md border border-gray-200 relative overflow-hidden","data-testid":`feedback-loop-${y.id}`,"data-feedback-id":y.id,children:[l.jsx("div",{className:"absolute left-0 top-0 bottom-0 w-1 bg-primary","aria-hidden":"true"}),l.jsx("div",{className:"absolute -left-1 -top-1 w-6 h-6 bg-primary text-white rounded-full flex items-center justify-center transform -rotate-45 text-xs",children:""}),l.jsxs("div",{className:"ml-2",children:[l.jsxs("div",{className:"flex items-center mb-1",children:[l.jsx("span",{className:"font-medium",children:"Send to: "}),l.jsx("span",{className:"text-primary font-bold ml-1",children:y.recipient})]}),l.jsxs("div",{className:"flex items-center",children:[l.jsx("span",{className:"font-medium",children:"Step name: "}),l.jsx("span",{className:"text-primary font-bold ml-1",children:y.nextStep})]})]}),l.jsx("button",{type:"button",onClick:()=>w(y.id),className:"text-white bg-red-500 hover:bg-red-600 p-1.5 rounded-full flex items-center justify-center shadow-sm transition-colors duration-200","aria-label":"Remove feedback loop","data-testid":`remove-feedback-${y.id}`,"data-action":"remove-feedback","data-feedback-id":y.id,children:l.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-4 w-4",viewBox:"0 0 20 20",fill:"currentColor",children:l.jsx("path",{fillRule:"evenodd",d:"M4.293 4.293a1 1 0 011.414 0L10 8.586l4.293-4.293a1 1 0 111.414 1.414L11.414 10l4.293 4.293a1 1 0 01-1.414 1.414L10 11.414l-4.293 4.293a1 1 0 01-1.414-1.414L8.586 10 4.293 5.707a1 1 0 010-1.414z",clipRule:"evenodd"})})})]},y.id))}),l.jsxs("div",{className:"bg-gray-50 p-3 rounded-md border border-gray-200","data-testid":"add-feedback-form",children:[l.jsx("h4",{className:"text-sm font-medium mb-2","data-testid":"add-feedback-heading",children:"Add New Feedback Loop (Optional)"}),l.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 mb-3",children:[l.jsx(mt,{label:"Send feedback to *",name:"recipient",type:"select",value:u.recipient,onChange:y=>a({...u,recipient:y.target.value}),options:[{value:"",label:"Select recipient..."},...C],error:c.recipient,"data-testid":"field-feedback-recipient"}),l.jsx(mt,{label:"Feedback Step Name *",name:"nextStep",type:"text",value:u.nextStep,onChange:y=>a({...u,nextStep:y.target.value}),placeholder:"Enter step name (e.g., Provide Additional Information)",error:c.nextStep,"data-testid":"feedback-step-name-input"})]}),l.jsx("div",{className:"mb-3",children:l.jsxs("button",{type:"button",onClick:()=>_(!g),className:"text-primary hover:text-primary-600 text-sm flex items-center","data-testid":"toggle-feedback-preview-button",children:[l.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-4 w-4 mr-1",viewBox:"0 0 20 20",fill:"currentColor",children:g?l.jsx("path",{d:"M13.586 3.586a2 2 0 112.828 2.828l-.793.793-2.828-2.828.793-.793zM11.379 5.793L3 14.172V17h2.828l8.38-8.379-2.83-2.828z"}):l.jsx("path",{fillRule:"evenodd",d:"M3.707 2.293a1 1 0 00-1.414 1.414l14 14a1 1 0 001.414-1.414l-1.473-1.473A10.014 10.014 0 0019.542 10C18.268 5.943 14.478 3 10 3a9.958 9.958 0 00-4.512 1.074l-1.78-1.781zm4.261 4.26l1.514 1.515a2.003 2.003 0 012.45 2.45l1.514 1.514a4 4 0 00-5.478-5.478z",clipRule:"evenodd"})}),g?"Hide Preview":"Preview Feedback Step"]})}),g&&u.recipient&&u.nextStep&&l.jsxs("div",{className:"mb-4 border border-primary-200 rounded-md p-3 bg-primary-50","data-testid":"feedback-preview",children:[l.jsx("h5",{className:"text-sm font-medium text-primary-800 mb-1",children:"Preview:"}),l.jsxs("div",{className:"bg-white rounded-md border border-gray-200 p-3 text-sm",children:[l.jsxs("div",{className:"flex mb-2",children:[l.jsx("div",{className:"w-24 font-medium",children:"Step Type:"}),l.jsx("div",{className:"text-gray-800",children:"Upload"})]}),l.jsxs("div",{className:"flex mb-2",children:[l.jsx("div",{className:"w-24 font-medium",children:"Title:"}),l.jsx("div",{className:"text-gray-800",children:u.nextStep||"Feedback Step"})]}),l.jsxs("div",{className:"flex mb-2",children:[l.jsx("div",{className:"w-24 font-medium",children:"Role:"}),l.jsx("div",{className:"text-gray-800",children:u.recipient||"Recipient"})]}),l.jsxs("div",{className:"flex mb-2",children:[l.jsx("div",{className:"w-24 font-medium",children:"Files:"}),l.jsx("div",{className:"text-gray-800",children:"Supporting Documentation (Required)"})]}),l.jsxs("div",{className:"flex",children:[l.jsx("div",{className:"w-24 font-medium",children:"Actions:"}),l.jsxs("div",{className:"text-gray-800",children:["Return to ",n.role||"Requestor"]})]})]})]}),l.jsx("div",{className:"flex justify-end",children:l.jsx("button",{type:"button",onClick:T,disabled:!u.recipient||!u.nextStep.trim(),className:"bg-primary hover:bg-primary-600 text-white rounded-md px-3 py-2 text-sm disabled:opacity-50 disabled:cursor-not-allowed","data-testid":"add-feedback-loop-button","data-action":"add-feedback-loop",children:"Add Feedback Loop"})})]}),l.jsx("div",{className:"mt-3 text-xs",children:l.jsxs("p",{children:["Adding a feedback loop will automatically create a Document Upload step with the specified name. This step will include required comments and an action to return to ",n.role,"."]})})]})},Yg=({formData:n,setFormData:i,errors:o={}})=>{const u=[{label:"Resubmit",value:"college_resubmit_registration_yes",canTerminate:!1,terminates_workflow:!1,description:"I have corrected the issue; resubmit the registration"},{label:"Mark Complete",value:"college_resubmit_registration_complete",canTerminate:!0,terminates_workflow:!0,description:"Student was manually enrolled in SIS. Mark as complete in DualEnroll."},{label:"Decline",value:"college_resubmit_registration_no",canTerminate:!0,terminates_workflow:!0,description:"Terminate the registration and notify the student and counselor"},{label:"Choose New Section",value:"college_resubmit_registration_choose_new_section",canTerminate:!1,terminates_workflow:!1,description:"Allow the student to select a different course section"}];return si.useEffect(()=>{(!n.actionOptions||n.actionOptions.length===0)&&i({...n,actionOptions:u,title:n.title||"Review Failed Registration",role:n.role||"College",comments:{...n.comments||{},required:!0,public:!0},feedbackLoops:n.feedbackLoops||{}})},[n,i]),l.jsxs(Vt,{title:"Review Failed Registration Configuration",className:"bg-white mb-6",children:[l.jsxs("div",{className:"bg-gray-50 p-3 rounded-md border border-gray-300 mb-4",children:[l.jsx("p",{className:"text-sm text-gray-700",children:"This step is used to review a failed registration attempt and determine how to proceed. The user can choose to resubmit the registration, mark it as complete, decline it, or allow the student to choose a new course section."}),l.jsx("p",{className:"text-sm text-gray-700 mt-2",children:'The "Resubmit" option will clear previous failure states and send the registration back to the RegisterViaAPI step for another attempt.'})]}),l.jsxs("div",{className:"p-3 border border-gray-200 rounded-md bg-white mb-4",children:[l.jsx("h3",{className:"text-sm font-medium text-gray-700 mb-2",children:"Default Action Options"}),l.jsx("ul",{className:"list-disc pl-5 space-y-2",children:u.map((a,c)=>l.jsxs("li",{className:"text-sm",children:[l.jsx("span",{className:"font-medium",children:a.label}),": ",a.description,a.canTerminate&&l.jsx("span",{className:"ml-1 text-xs text-red-500",children:"(Terminates workflow)"})]},c))})]}),l.jsxs("div",{className:"mt-3",children:[l.jsx("p",{className:"text-sm text-gray-600 mb-1",children:'To add "Resolve Issues" options for students or high schools, use the Feedback Loops section below.'}),l.jsx("p",{className:"text-sm text-gray-600",children:"This allows you to create feedback steps that will be triggered when certain actions are selected."})]})]})},Zg=({formData:n,handleChange:i,errors:o={}})=>l.jsxs(Vt,{title:"Consent Step",className:"bg-white mb-6",children:[l.jsxs("div",{className:"bg-gray-50 p-3 rounded-md border border-gray-300 mb-4",children:[l.jsx("p",{className:"text-sm text-gray-700",children:"This step will require the parent or guardian to provide consent for the student's enrollment."}),l.jsx("p",{className:"text-sm text-gray-700 mt-2",children:"Standard consent templates will be generated that are compatible with all workflow contexts."})]}),l.jsx(mt,{label:"Consent Type",name:"consentType",type:"select",value:n.consentType||"all",onChange:i,options:[{value:"all",label:"All (Generic Consent)"},{value:"ferpa",label:"FERPA"},{value:"financial",label:"Financial Responsibility"}],error:o.consentType})]}),Qg=({formData:n,handleChange:i,errors:o={}})=>l.jsxs(Vt,{title:"Hold Check Configuration",className:"bg-white mb-6",children:[l.jsx(mt,{label:"Hold Codes (comma separated or *any*)",name:"holdCodes",type:"text",value:n.holdCodes||"",onChange:i,placeholder:"e.g., ORIEN, FINAID, ADVISING or *any*",error:o.holdCodes}),l.jsx("div",{className:"bg-gray-50 p-3 rounded-md border border-gray-300 mt-4",children:l.jsx("p",{className:"text-sm text-gray-700",children:"This step will check for holds on the student's account. You can specify which hold codes to check for, or use *any* to check for any holds."})})]}),Kg=({formData:n,handleChange:i,errors:o={}})=>l.jsx(Vt,{title:"Register Via API",className:"bg-white mb-6",children:l.jsxs("div",{className:"bg-gray-50 p-3 rounded-md border border-gray-300",children:[l.jsx("p",{className:"text-sm text-gray-700",children:"This step will automatically register the student via the DualEnroll API integration with your SIS. No configuration is required."}),l.jsx("p",{className:"text-sm text-gray-700 mt-2",children:"The system will handle all communication with your SIS and will provide appropriate messages for any errors encountered."})]})}),Xg=({formData:n,handleChange:i,errors:o={}})=>{var u;return l.jsxs(Vt,{title:"Issue Resolution Configuration",className:"bg-white mb-6",children:[l.jsx(mt,{label:"Issue Type",name:"issueType",type:"select",value:n.issueType||"",onChange:i,options:[{value:"",label:"Select an issue type"},{value:"RegistrationIssue",label:"Registration Issue"},{value:"PaymentIssue",label:"Payment Issue"},{value:"PrerequisiteIssue",label:"Prerequisite Issue"},{value:"HoldIssue",label:"Hold Issue"},{value:"Other",label:"Other Issue"}],error:o.issueType}),l.jsx("div",{className:"bg-gray-50 p-3 rounded-md border border-gray-300 mt-4",children:l.jsx("p",{className:"text-sm text-gray-700",children:"This step allows the specified role to resolve issues that have occurred during the workflow process."})}),((u=n.fileUploads)==null?void 0:u.length)===0&&l.jsx("p",{className:"text-xs text-gray-500 italic mt-4",children:"Consider adding file uploads if supporting documents are needed to resolve the issue."})]})},Jg=({formData:n,handleChange:i,errors:o={}})=>l.jsx(Vt,{title:"Pending Completion Of One-Time Steps",className:"bg-white mb-6",children:l.jsxs("div",{className:"bg-gray-50 p-3 rounded-md border border-gray-300",children:[l.jsx("p",{className:"text-sm text-gray-700",children:"This step will automatically wait for the completion of the student's one-time application steps before proceeding. No configuration is required."}),l.jsx("p",{className:"text-sm text-gray-700 mt-2",children:"The system will handle this check automatically and proceed once the one-time steps are complete."})]})}),ey=({formData:n,handleChange:i,errors:o={}})=>l.jsx(Vt,{title:"Pending Completion Of Per-Term Steps",className:"bg-white mb-6",children:l.jsxs("div",{className:"bg-gray-50 p-3 rounded-md border border-gray-300",children:[l.jsx("p",{className:"text-sm text-gray-700",children:"This step will automatically wait for the completion of the student's per-term steps before proceeding. No configuration is required."}),l.jsx("p",{className:"text-sm text-gray-700 mt-2",children:"The system will handle this check automatically and proceed once the per-term steps are complete."})]})}),ty=({formData:n,handleChange:i,errors:o={}})=>l.jsx(Vt,{title:"Pending Completion Of Per-Year Steps",className:"bg-white mb-6",children:l.jsxs("div",{className:"bg-gray-50 p-3 rounded-md border border-gray-300",children:[l.jsx("p",{className:"text-sm text-gray-700",children:"This step will automatically wait for the completion of the student's per-year steps before proceeding. No configuration is required."}),l.jsx("p",{className:"text-sm text-gray-700 mt-2",children:"The system will handle this check automatically and proceed once the per-year steps are complete."})]})}),ny=Yg,ry=({initialData:n={},onSubmit:i,onCancel:o,onAddFeedbackStep:u,workflowConditions:a={},onManageWorkflowConditions:c})=>{const[f,p]=fe.useState({}),h={stepType:"Approval",title:"",role:"College",workflow_category:"Per Course",description:"",conditional:!1,workflowCondition:[],actionOptions:[],fileUploads:[],informationDisplays:[],tableColumns:["Student Name","Course Number","CRN","Instructor"],feedbackLoops:{},pendingFeedbackSteps:[],comments:{required:!1,public:!0},showCrnInfo:!1,crnDisplay:[],holdCodes:"",apiEndpoint:"",consentType:"all",issueType:"",documentClass:"StudentDocument"},[g,_]=fe.useState(()=>{const k={...h,...n};if((!n.id||!n.actionOptions||n.actionOptions.length===0)&&(n.stepType==="Approval"||!n.stepType)&&(k.actionOptions=[{label:"Approve",value:"yes",canTerminate:!1,terminates_workflow:!1},{label:"Decline",value:"no",canTerminate:!0,terminates_workflow:!0},{label:"Defer",value:"defer",canTerminate:!1,terminates_workflow:!1}],k.canTerminate=!0,k.comments={...k.comments,required:!0}),k.subworkflow&&!k.workflow_category){const y={"Once Ever":"One Time","Per Year":"Per Academic Year","Per Term":"Per Term","Per Course":"Per Course"};k.workflow_category=y[k.subworkflow]||"Per Course",delete k.subworkflow}return k.conditional=!!k.conditional,k});fe.useEffect(()=>{if(n&&Object.keys(n).length>0){const k={...h,...n,pendingFeedbackSteps:[]};k.stepType==="RegisterViaApi"&&(k.role="System"),_(k)}},[n]);const C=k=>{const{name:y,value:x,type:j,checked:O}=k.target;if(y==="stepType"){let R={...g,[y]:x,showCrnInfo:!1,crnDisplay:[]};x==="Approval"&&(!g.actionOptions||g.actionOptions.length===0)&&(R.actionOptions=[{label:"Approve",value:"approve-yes",canTerminate:!1,terminates_workflow:!1},{label:"Decline",value:"no",canTerminate:!0,terminates_workflow:!0},{label:"Defer",value:"defer",canTerminate:!1,terminates_workflow:!1}],R.comments={...R.comments,required:!0},R.canTerminate=!0),x==="ProvideConsent"&&(R.actionOptions=[],R.comments={required:!1,public:!0}),(x==="RegisterViaApi"||x==="PendingCompletionOfOneTimeSteps"||x==="PendingCompletionOfPerTermSteps"||x==="PendingCompletionOfPerYearSteps")&&(R.role="System",x.includes("Pending")&&(R.title=x)),x==="ReviewFailedRegistration"&&(R.role="College",R.title="Review Failed Registration"),_(R)}else if(y==="conditional"){console.log("Setting conditional to:",O),console.log("Previous form data:",g);const R={...g,conditional:O};O||(R.workflowCondition=[]),console.log("Updated form data:",R),_({...R})}else y==="role"&&g.stepType==="RegisterViaApi"?_(R=>({...R,role:"System"})):_(y==="workflowCondition"&&j==="array"?R=>({...R,[y]:x}):R=>({...R,[y]:j==="checkbox"?O:x}))},T=k=>{k.preventDefault(),console.log("Form submission attempt");const y=Kc(g);if(console.log("Validation errors:",y),Object.keys(y).length===0){const x={...g},j=[...x.pendingFeedbackSteps||[]];delete x.pendingFeedbackSteps,console.log("Submitting step data:",x),i(x),u&&j.length>0&&j.forEach(O=>{const R={...O,id:O.id||`feedback_step_${Date.now()}_${Math.random().toString(36).substr(2,9)}`};u(R)})}else p(y)},w=()=>{console.log("Save button clicked"),console.log("Current form data:",g);const k=Kc(g);if(console.log("Validation errors:",k),Object.keys(k).length===0)try{const y={...g},x=[...y.pendingFeedbackSteps||[]];delete y.pendingFeedbackSteps,console.log("Submitting step data:",y),i(y),u&&x.length>0&&x.forEach(j=>{const O={...j,id:j.id||`feedback_step_${Date.now()}_${Math.random().toString(36).substr(2,9)}`};u(O)})}catch(y){console.error("Error submitting form:",y)}else p(k)};return l.jsxs("form",{className:"space-y-0",onSubmit:T,id:"stepForm",children:[l.jsx(Rg,{formData:g,handleChange:C,errors:f}),l.jsx(Dg,{formData:g,handleChange:C,errors:f,workflowConditions:a,onManageWorkflowConditions:c}),g.stepType!=="Information"&&g.stepType!=="ProvideConsent"&&g.stepType!=="RegisterViaApi"&&g.stepType!=="PendingCompletionOfOneTimeSteps"&&g.stepType!=="PendingCompletionOfPerTermSteps"&&g.stepType!=="PendingCompletionOfPerYearSteps"&&l.jsxs(l.Fragment,{children:[l.jsx(Bg,{formData:g,setFormData:_,errors:f}),l.jsx(Hg,{formData:g,setFormData:_})]}),g.stepType==="Approval"&&l.jsx($g,{formData:g,setFormData:_,errors:f}),g.stepType==="Upload"&&l.jsx(zg,{formData:g,setFormData:_,errors:f}),g.stepType==="Information"&&l.jsx(Fg,{formData:g,setFormData:_,errors:f}),g.stepType==="ProvideConsent"&&l.jsx(Zg,{formData:g,handleChange:C,errors:f}),g.stepType==="CheckHolds"&&l.jsx(Qg,{formData:g,handleChange:C,errors:f}),g.stepType==="RegisterViaApi"&&l.jsx(Kg,{formData:g,handleChange:C,errors:f}),g.stepType==="ResolveIssue"&&l.jsx(Xg,{formData:g,handleChange:C,errors:f}),g.stepType==="ReviewFailedRegistration"&&l.jsx(ny,{formData:g,setFormData:_,errors:f}),g.stepType==="PendingCompletionOfOneTimeSteps"&&l.jsx(Jg,{formData:g,handleChange:C,errors:f}),g.stepType==="PendingCompletionOfPerTermSteps"&&l.jsx(ey,{formData:g,handleChange:C,errors:f}),g.stepType==="PendingCompletionOfPerYearSteps"&&l.jsx(ty,{formData:g,handleChange:C,errors:f}),(g.stepType==="Approval"||g.stepType==="ReviewFailedRegistration")&&l.jsx(Gg,{formData:g,setFormData:_,onAddFeedbackStep:u}),g.stepType!=="ProvideConsent"&&g.stepType!=="RegisterViaApi"&&g.stepType!=="PendingCompletionOfOneTimeSteps"&&g.stepType!=="PendingCompletionOfPerTermSteps"&&g.stepType!=="PendingCompletionOfPerYearSteps"&&l.jsx(Wg,{formData:g,setFormData:_,errors:f}),l.jsxs("div",{className:"flex justify-end gap-3 pt-4","data-testid":"modal-actions",children:[l.jsx("button",{type:"button",onClick:o,className:"px-4 py-2 bg-gray-200 hover:bg-gray-300 text-gray-800 rounded-md","data-testid":"modal-cancel-button",children:"Cancel"}),l.jsx("button",{type:"button",onClick:w,className:"px-4 py-2 bg-primary hover:bg-primary-600 text-white rounded-md","data-testid":"modal-save-button",children:"Save Step"})]})]})},No=({isOpen:n,onClose:i,title:o="Modal Title",children:u,size:a="md",hideCloseButton:c=!1})=>{if(!n)return null;const f=h=>{h.target===h.currentTarget&&(h.preventDefault(),i())},p=()=>{switch(a){case"sm":return"max-w-md";case"md":return"max-w-2xl";case"lg":return"max-w-4xl";case"xl":return"max-w-6xl";default:return"max-w-2xl"}};return fe.useEffect(()=>(n&&(document.body.style.overflow="hidden"),()=>{document.body.style.overflow="auto"}),[n]),l.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-[100]",onClick:f,"data-testid":"modal-backdrop","data-modal-size":a,style:{zIndex:1e3},children:l.jsxs("div",{className:`bg-white rounded-lg ${p()} w-5/6 max-h-[90vh] overflow-y-auto`,onClick:h=>h.stopPropagation(),"data-testid":"modal-content","data-title":o,children:[l.jsxs("div",{className:"flex justify-between items-center mb-4 pb-2 border-b border-gray-200 p-6 pb-4",children:[l.jsx("h2",{className:"text-xl font-semibold text-primary",children:o}),!c&&l.jsx("button",{onClick:h=>{h.preventDefault(),i()},className:"","aria-label":"Close modal","data-testid":"modal-close-button","data-action":"close-modal",children:l.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:l.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),u]})})},Jc=({isOpen:n,onClose:i,title:o="Add New Step",initialData:u={},onSubmit:a,onAddFeedbackStep:c,workflowConditions:f={},onManageWorkflowConditions:p})=>l.jsx(No,{isOpen:n,onClose:i,title:o,size:"lg",children:l.jsx("div",{className:"px-6 pb-6",children:l.jsx(ry,{initialData:u,onSubmit:a,onCancel:i,onAddFeedbackStep:c,workflowConditions:f,onManageWorkflowConditions:p})})}),iy=({isOpen:n,onClose:i,workflowName:o,setWorkflowName:u,onSave:a})=>l.jsx(No,{isOpen:n,onClose:i,title:"Save Workflow",size:"sm",children:l.jsxs("div",{className:"px-6 pb-6",children:[l.jsxs("div",{className:"mb-4",children:[l.jsx("label",{htmlFor:"workflow-name",className:"block text-sm font-medium mb-1",children:"Workflow Name"}),l.jsx("input",{id:"workflow-name",type:"text",value:o,onChange:c=>u(c.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md","data-testid":"workflow-name-input"})]}),l.jsxs("div",{className:"flex justify-end gap-2",children:[l.jsx("button",{onClick:i,className:"px-4 py-2 bg-gray-200 hover:bg-gray-300 rounded text-gray-800","data-testid":"save-workflow-cancel-button",children:"Cancel"}),l.jsx("button",{onClick:a,className:"px-4 py-2 bg-primary hover:bg-primary-600 text-white rounded","data-testid":"save-workflow-confirm-button",children:"Save"})]})]})}),oy=({isOpen:n,onClose:i,onConfirm:o,title:u="Confirm Action",message:a="Are you sure you want to proceed?",confirmButtonText:c="Confirm",cancelButtonText:f="Cancel",confirmButtonClass:p="bg-red-600 hover:bg-red-700"})=>l.jsx(No,{isOpen:n,onClose:i,title:u,size:"sm",children:l.jsxs("div",{className:"px-6 pb-6",children:[l.jsx("div",{className:"mb-6",children:l.jsx("p",{className:"text-gray-600",children:a})}),l.jsxs("div",{className:"flex justify-end gap-3",children:[l.jsx("button",{type:"button",onClick:i,className:"px-4 py-2 bg-gray-200 hover:bg-gray-300 text-gray-800 rounded-md","data-testid":"confirmation-cancel-button",children:f}),l.jsx("button",{type:"button",onClick:()=>{o(),i()},className:`px-4 py-2 ${p} text-white rounded-md`,"data-testid":"confirmation-confirm-button",children:c})]})]})}),sy=({condition:n={entity:"",property:"",comparison:"",value:"",fields:[]},onUpdate:i,onDelete:o})=>{const[u,a]=fe.useState(n),[c,f]=fe.useState(!1),[p,h]=fe.useState(""),g=[{value:"",label:"-- Select an entity --"},{value:"Course",label:"Course"},{value:"CourseSection",label:"Course Section"},{value:"Student",label:"Student"},{value:"HighSchool",label:"High School"},{value:"Instructor",label:"Instructor"},{value:"Term",label:"Term"},{value:"College",label:"College"}],_={Course:[{value:"has_requisites",label:"Has Prerequisites",rubyMethod:"has_requisites?"},{value:"has_course_category",label:"Has Course Category",rubyMethod:"has_course_category?"},{value:"title",label:"Title",rubyMethod:"title"},{value:"number",label:"Course Number",rubyMethod:"number"},{value:"subject",label:"Subject",rubyMethod:"subject"},{value:"department",label:"Department",rubyMethod:"department"},{value:"credits",label:"Credits",rubyMethod:"credits"},{value:"custom",label:"Custom property..."}],CourseSection:[{value:"is_full",label:"Is Full",rubyMethod:"is_full?"},{value:"is_wish_list",label:"Is Wish List",rubyMethod:"is_wish_list?"},{value:"location",label:"Location",rubyMethod:"location"},{value:"number",label:"Section Number",rubyMethod:"number"},{value:"capacity",label:"Capacity",rubyMethod:"capacity"},{value:"enrollment_count",label:"Enrollment Count",rubyMethod:"enrollment_count"},{value:"custom",label:"Custom property..."}],Student:[{value:"is_minor",label:"Is Minor",rubyMethod:"is_minor?"},{value:"has_parent_consent",label:"Has Parent Consent",rubyMethod:"has_parent_consent?"},{value:"name",label:"Name",rubyMethod:"name"},{value:"display_name",label:"Display Name",rubyMethod:"display_name"},{value:"email",label:"Email",rubyMethod:"email"},{value:"age",label:"Age",rubyMethod:"age"},{value:"grade",label:"Grade Level",rubyMethod:"grade"},{value:"has_student_number",label:"Has Student Number",rubyMethod:"has_student_number?"},{value:"custom",label:"Custom property..."}],HighSchool:[{value:"is_home_school",label:"Is Home School",rubyMethod:"is_home_school?"},{value:"is_non_partner",label:"Is Non-Partner",rubyMethod:"is_non_partner?(college)"},{value:"name",label:"Name",rubyMethod:"name"},{value:"type",label:"Type",rubyMethod:"type"},{value:"city",label:"City",rubyMethod:"city"},{value:"state",label:"State",rubyMethod:"state"},{value:"custom",label:"Custom property..."}],Instructor:[{value:"name",label:"Name",rubyMethod:"name"},{value:"email",label:"Email",rubyMethod:"email"},{value:"highest_degree",label:"Highest Degree",rubyMethod:"highest_degree"},{value:"custom",label:"Custom property..."}],Term:[{value:"name",label:"Name",rubyMethod:"name"},{value:"start_date",label:"Start Date",rubyMethod:"start_date"},{value:"end_date",label:"End Date",rubyMethod:"end_date"},{value:"custom",label:"Custom property..."}],College:[{value:"name",label:"Name",rubyMethod:"name"},{value:"city",label:"City",rubyMethod:"city"},{value:"state",label:"State",rubyMethod:"state"},{value:"custom",label:"Custom property..."}]},C=[{value:"",label:"-- Select a comparison --"},{value:"equals",label:"equals",rubyOperator:"=="},{value:"not-equals",label:"does not equal",rubyOperator:"!="},{value:"contains",label:"contains",rubyOperator:"include?"},{value:"not-contains",label:"does not contain",rubyOperator:"!include?"},{value:"greater-than",label:"greater than",rubyOperator:">"},{value:"less-than",label:"less than",rubyOperator:"<"},{value:"greater-than-or-equal",label:"greater than or equal to",rubyOperator:">="},{value:"less-than-or-equal",label:"less than or equal to",rubyOperator:"<="},{value:"present",label:"is present",rubyOperator:"present?"},{value:"blank",label:"is blank",rubyOperator:"blank?"}],T=["home_school","non_partner","has_prereqs","high_school","hs_student","parent_consent_required","parent_consent_provided","wish_list","requires_transcript","no_parent_email","sections_released","sections_released_yes"];fe.useEffect(()=>{if(a(n),n.entity&&n.property){const Q=!(_[n.entity]||[]).some(ce=>ce.value===n.property);f(Q),Q&&h(n.property)}},[n]);const w=U=>{const Q=U.target.value,ce={...u,entity:Q,property:""};a(ce),f(!1),h(""),i&&i(ce)},k=U=>{const Q=U.target.value;if(Q==="custom"){f(!0);const b={...u,property:""};a(b);return}f(!1),h("");const N=(_[u.entity]||[]).find(b=>b.value===Q),L={...u,property:Q,rubyMethod:N==null?void 0:N.rubyMethod};a(L),i&&i(L)},y=U=>{const Q=U.target.value;h(Q);const ce={...u,property:Q,rubyMethod:Q+(Q.endsWith("?"),"")};a(ce),i&&i(ce)},x=U=>{const{name:Q,value:ce}=U.target;let N={[Q]:ce};if(Q==="comparison"){const b=C.find(G=>G.value===ce);N.rubyOperator=b==null?void 0:b.rubyOperator}const L={...u,...N};a(L),i&&i(L)},j=U=>{const ce=U.target.value.split(",").map(L=>L.trim()).filter(L=>L!==""),N={...u,fields:ce};a(N),i&&i(N)},O=["present","blank"].includes(u.comparison),z=(()=>{if(!u.entity)return[{value:"",label:"-- Select entity first --"}];const U=_[u.entity]||[];return[{value:"",label:"-- Select property --"},...U]})(),M=()=>{var L,b,G;if(!u.entity&&!u.property)return"Set up your condition above";let U=((L=g.find(ye=>ye.value===u.entity))==null?void 0:L.label)||u.entity,Q="";u.entity&&u.property?c?Q=p:Q=((b=(_[u.entity]||[]).find(ee=>ee.value===u.property))==null?void 0:b.label)||u.property:u.property&&(Q=u.property);let ce=((G=C.find(ye=>ye.value===u.comparison))==null?void 0:G.label)||u.comparison,N=`When ${U}'s ${Q} ${ce}`;return!O&&u.value&&(N+=` "${u.value}"`),u.fields&&u.fields.length>0&&(N+=`, set field${u.fields.length>1?"s":""}: ${u.fields.join(", ")}`),N},K=()=>{var N;if(!u.entity||!u.property)return"";let U="";switch(u.entity){case"Student":U="student";break;case"HighSchool":U="student.high_school";break;case"Course":U="course";break;case"CourseSection":U="course_section";break;case"Instructor":U="instructor";break;case"Term":U="term";break;case"College":U="college";break;default:U=u.entity.toLowerCase()}let Q="";if(c)Q=p;else{const b=(_[u.entity]||[]).find(G=>G.value===u.property);Q=(b==null?void 0:b.rubyMethod)||u.property}let ce="";if(Q.endsWith("?"))u.comparison==="not-equals"||u.value==="false"||u.value===!1?ce=`!${U}.${Q}`:ce=`${U}.${Q}`;else{const L=((N=C.find(b=>b.value===u.comparison))==null?void 0:N.rubyOperator)||"==";if(L==="present?")ce=`${U}.${Q}.present?`;else if(L==="blank?")ce=`${U}.${Q}.blank?`;else if(L.includes("include?"))L.startsWith("!")?ce=`!${U}.${Q}.to_s.include?('${u.value}')`:ce=`${U}.${Q}.to_s.include?('${u.value}')`;else{const b=Number(u.value);!isNaN(b)&&b.toString()===String(u.value)?ce=`${U}.${Q} ${L} ${u.value}`:ce=`${U}.${Q} ${L} '${u.value}'`}}return ce},Z=()=>{if(!u.entity||!u.property)return[];const U=u.entity.toLowerCase(),Q=u.property.toLowerCase(),ce=[...T];return U==="highschool"&&Q.includes("home_school")?ce.push("home_school","parent_consent_provided"):U==="highschool"&&Q.includes("non_partner")?ce.push("non_partner","parent_consent_required"):U==="course"&&Q.includes("requisites")?ce.push("has_prereqs"):U==="coursesection"&&Q.includes("wish_list")&&ce.push("wish_list"),ce},ne=()=>{const U=Z();return U.length===0?null:l.jsxs("div",{className:"p-2",children:[l.jsx("p",{className:"font-semibold mb-1",children:"Common Field Names:"}),l.jsx("ul",{className:"text-xs",children:U.map(Q=>l.jsx("li",{className:"mb-1",children:l.jsx("button",{type:"button",className:"text-blue-600 hover:underline",onClick:()=>{const ce=u.fields||[];if(!ce.includes(Q)){const N=[...ce,Q],L={...u,fields:N};a(L),i&&i(L)}},children:Q})},Q))})]})};return l.jsxs("div",{className:"border border-gray-200 rounded-md bg-gray-50 mb-4",children:[l.jsx("div",{className:"mb-4 p-2 bg-blue-50 border-b border-blue-200 text-sm text-blue-800",children:M()}),l.jsxs("div",{className:"grid grid-cols-1 gap-3 p-4 pt-0",children:[l.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-3",children:[l.jsx(mt,{label:"Entity",name:"entity",type:"select",value:u.entity||"",onChange:w,options:g,placeholder:"Select entity type","data-testid":"scenario-condition-entity-select"}),l.jsxs("div",{children:[l.jsx(mt,{label:"Property",name:"property",type:"select",value:c?"custom":u.property||"",onChange:k,options:z,disabled:!u.entity,"data-testid":"scenario-condition-property-select"}),c&&l.jsx("div",{className:"mt-2",children:l.jsx("input",{type:"text",value:p,onChange:y,className:"w-full border border-gray-300 rounded-md px-3 py-2 text-sm",placeholder:"Enter custom property","data-testid":"scenario-condition-custom-property-input"})})]})]}),l.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-3",children:[l.jsx(mt,{label:"Comparison",name:"comparison",type:"select",value:u.comparison,onChange:x,options:C,"data-testid":"scenario-condition-comparison-select"}),l.jsx(mt,{label:"Value",name:"value",type:"text",value:u.value||"",onChange:x,disabled:O,placeholder:O?"Not needed":"e.g., High School, 18, 3.0",helpText:O?"Not needed for this comparison":null,"data-testid":"scenario-condition-value-input"})]}),l.jsx("div",{children:l.jsxs("div",{className:"flex items-start",children:[l.jsx("div",{className:"flex-grow",children:l.jsx(mt,{label:"Fields to Set (comma-separated)",name:"fieldsString",type:"text",value:u.fields?u.fields.join(", "):"",onChange:j,placeholder:"e.g., home_school, parent_consent_required","data-testid":"scenario-condition-fields-input"})}),l.jsx("div",{className:"ml-2 mt-6",children:l.jsxs("div",{className:"relative group",children:[l.jsx("button",{type:"button",className:"bg-gray-200 p-1 rounded-full text-gray-600 hover:bg-gray-300",children:l.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",viewBox:"0 0 20 20",fill:"currentColor",children:l.jsx("path",{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-8-3a1 1 0 00-.867.5 1 1 0 11-1.731-1A3 3 0 0113 8a3.001 3.001 0 01-2 2.83V11a1 1 0 11-2 0v-1a1 1 0 011-1 1 1 0 100-2zm0 8a1 1 0 100-2 1 1 0 000 2z",clipRule:"evenodd"})})}),l.jsx("div",{className:"absolute right-0 mt-1 w-64 bg-white shadow-lg rounded-md p-2 z-10 hidden group-hover:block",children:ne()})]})})]})}),l.jsxs("div",{className:"mt-2 p-2 bg-gray-100 rounded-md text-sm font-mono",children:[l.jsx("div",{className:"text-xs text-gray-500 mb-1",children:"Ruby code preview:"}),K()||l.jsx("span",{className:"text-gray-400",children:"Complete the form to see code preview"})]}),o&&l.jsx("div",{className:"text-right",children:l.jsx("button",{type:"button",onClick:o,className:"text-red-600 hover:text-red-800 text-sm","data-testid":"delete-condition-button",children:"Remove Condition"})})]})]})},ay=({isOpen:n,onClose:i,conditions:o={},onUpdate:u,initialCondition:a=null,title:c="Add New Condition"})=>{const[f,p]=fe.useState(""),[h,g]=fe.useState({entity:"",property:"",comparison:"",value:"",fields:[]});fe.useEffect(()=>{if(n&&a)if(g(a),a.entity&&a.property){const T=`${a.entity}_${a.property}`;p(T)}else a.method&&p(a.method);else n||(p(""),g({entity:"",property:"",comparison:"",value:"",fields:[]}))},[n,a]);const _=()=>{if(!f.trim()||!h)return;const T={...h,fields:[f.trim()]},w={...o,[f.trim()]:T};u(w),i()},C=f.trim()&&h.entity&&h.property&&h.comparison;return l.jsxs(No,{isOpen:n,onClose:i,title:c,size:"lg",children:[l.jsxs("div",{className:"p-4",children:[l.jsxs("div",{className:"mb-4",children:[l.jsx("label",{htmlFor:"conditionName",className:"block text-sm font-medium text-gray-700 mb-1",children:"Condition Name:"}),l.jsx("input",{type:"text",id:"conditionName",value:f,onChange:T=>p(T.target.value),className:"w-full border border-gray-300 rounded-md px-3 py-2 text-sm",placeholder:"e.g., student_above_18, high_school_payment_policy"}),l.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"This name will be used as the workflow field that gets set when the condition is true."})]}),l.jsx(sy,{condition:h,onUpdate:g})]}),l.jsxs("div",{className:"bg-gray-50 px-4 py-3 sm:px-6 sm:flex sm:flex-col rounded-b-lg border-t border-gray-200",children:[l.jsxs("div",{className:"sm:flex sm:flex-row-reverse",children:[l.jsx("button",{type:"button",onClick:T=>{T.preventDefault(),_()},className:`px-4 py-2 ${C?"bg-primary hover:bg-primary-600":"bg-gray-300 cursor-not-allowed"} text-white rounded-md text-sm ml-2`,disabled:!C,children:"Save Condition"}),l.jsx("button",{type:"button",onClick:i,className:"px-4 py-2 border border-gray-300 rounded-md text-sm text-gray-700 hover:bg-gray-50",children:"Cancel"})]}),!C&&l.jsxs("div",{className:"mt-2 text-xs text-red-600",children:[f.trim()?"":"Please provide a condition name. ",h.entity?"":"Please select an entity. ",h.property?"":"Please select a property. ",h.comparison?"":"Please select a comparison. "]})]})]})},ly=()=>{const[n,i]=fe.useState([]),[o,u]=fe.useState("New Workflow"),[a,c]=fe.useState({name:"",id:"",city:"",state:"",zip:"",phone:"",url:"",type:"Public: 2-year"});return{workflow:n,setWorkflow:i,workflowName:o,setWorkflowName:u,collegeInfo:a,setCollegeInfo:c}},uy=()=>{const[n,i]=fe.useState(!1),[o,u]=fe.useState(null),[a,c]=fe.useState(!1),[f,p]=fe.useState(!1);return{isAddingStep:n,setIsAddingStep:i,editingStep:o,setEditingStep:u,showSaveModal:a,setShowSaveModal:c,showNewWorkflowModal:f,setShowNewWorkflowModal:p}},cy=(n,i)=>{const o={id:n.id||Pa("step_"),...n};return i(u=>{const a=[...u];if(o.isFeedbackStep&&o.feedbackRelationship){const c=o.feedbackRelationship.parentStepId,f=a.findIndex(p=>p.id===c);if(f!==-1){let p=f+1;const h=a.filter(g=>g.isFeedbackStep&&g.feedbackRelationship&&g.feedbackRelationship.parentStepId===c);if(h.length>0){const g=h.map(_=>a.findIndex(C=>C.id===_.id));p=Math.max(...g)+1}return a.splice(p,0,o),a}}return[...a,o]}),o},dy=(n,i,o)=>{o(u=>{const a=u.find(f=>f.id===i);if(!a)return console.error("Step not found for update"),u;const c=u.map(f=>f.id===i?{...a,...n,id:f.id}:f);if(n.isFeedbackStep&&n.feedbackRelationship){const f=n.feedbackRelationship.parentStepId,p=n.feedbackRelationship.feedbackId,h=c.findIndex(g=>g.id===f);if(h!==-1){const g=c[h];if(g.feedbackLoops&&g.feedbackLoops[p]){const _={...g.feedbackLoops,[p]:{...g.feedbackLoops[p],recipient:n.role,nextStep:n.title}};c[h]={...g,feedbackLoops:_}}}}return n.feedbackLoops&&Object.keys(n.feedbackLoops).length>0?c.map(f=>f.isFeedbackStep&&f.feedbackRelationship&&f.feedbackRelationship.parentStepId===i?{...f,feedbackRelationship:{...f.feedbackRelationship,parentStepTitle:n.title||f.feedbackRelationship.parentStepTitle,requestingRole:n.role||f.feedbackRelationship.requestingRole}}:f):c})},fy=(n,i)=>{i(o=>{const u=o.find(a=>a.id===n);return u&&u.isFeedbackStep?py(n,i,o):u&&u.feedbackLoops&&Object.keys(u.feedbackLoops).length>0?o.filter(a=>a.id!==n&&!(a.isFeedbackStep&&a.feedbackRelationship&&a.feedbackRelationship.parentStepId===n)):o.filter(a=>a.id!==n)})},py=(n,i,o=null)=>{if(o){const u=o.find(a=>a.id===n);if(u&&u.isFeedbackStep&&u.feedbackRelationship){const a=u.feedbackRelationship.parentStepId,c=u.feedbackRelationship.feedbackId,f=o.filter(p=>p.id!==n);if(a&&c){const p=f.findIndex(h=>h.id===a);if(p!==-1){const h=f[p];if(h.feedbackLoops){const g={...h.feedbackLoops};delete g[c],f[p]={...h,feedbackLoops:g}}}}return f}return o.filter(a=>a.id!==n)}i(u=>{const a=u.find(c=>c.id===n);if(a&&a.isFeedbackStep&&a.feedbackRelationship){const c=a.feedbackRelationship.parentStepId,f=a.feedbackRelationship.feedbackId,p=u.filter(h=>h.id!==n);if(c&&f){const h=p.findIndex(g=>g.id===c);if(h!==-1){const g=p[h];if(g.feedbackLoops){const _={...g.feedbackLoops};delete _[f],p[h]={...g,feedbackLoops:_}}}}return p}return u.filter(c=>c.id!==n)})},hy=(n,i,o)=>{o(u=>{const a=[...u],c=a[n],f=a.filter(_=>_.feedbackRelationship&&_.feedbackRelationship.parentStepId===c.id);if(f.length===0){const[_]=a.splice(n,1);return a.splice(i,0,_),a}const p=a.filter(_=>_.id!==c.id&&!f.some(C=>C.id===_.id));let h=i;if(n<i){const _=f.length;h-=_}p.splice(h,0,c);const g=h+1;return p.splice(g,0,...f),p})},my="modulepreload",gy=function(n){return"/workflow-builder-UI/"+n},ed={},yy=function(i,o,u){let a=Promise.resolve();if(o&&o.length>0){document.getElementsByTagName("link");const f=document.querySelector("meta[property=csp-nonce]"),p=(f==null?void 0:f.nonce)||(f==null?void 0:f.getAttribute("nonce"));a=Promise.allSettled(o.map(h=>{if(h=gy(h),h in ed)return;ed[h]=!0;const g=h.endsWith(".css"),_=g?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${h}"]${_}`))return;const C=document.createElement("link");if(C.rel=g?"stylesheet":my,g||(C.as="script"),C.crossOrigin="",C.href=h,p&&C.setAttribute("nonce",p),document.head.appendChild(C),g)return new Promise((T,w)=>{C.addEventListener("load",T),C.addEventListener("error",()=>w(new Error(`Unable to preload CSS for ${h}`)))})}))}function c(f){const p=new Event("vite:preloadError",{cancelable:!0});if(p.payload=f,window.dispatchEvent(p),!p.defaultPrevented)throw f}return a.then(f=>{for(const p of f||[])p.status==="rejected"&&c(p.reason);return i().catch(c)})},vy=(n,i,o={},u={})=>{const a=JSON.stringify({name:n,workflow:i,conditions:o,collegeInfo:u},null,2),c=new Blob([a],{type:"application/json"}),f=URL.createObjectURL(c),p=document.createElement("a");return p.href=f,p.download=`${n.replace(/\s+/g,"-").toLowerCase()}.json`,document.body.appendChild(p),p.click(),document.body.removeChild(p),!0},_y=(n,i,o,u,a)=>new Promise((c,f)=>{if(!n){f(new Error("No file provided"));return}const p=new FileReader;p.onload=h=>{try{const g=JSON.parse(h.target.result);if(g.workflow)i(g.workflow);else if(g.scenarios){console.warn("Importing legacy scenario-based workflow format - converting to single workflow");const _=Od(g.scenarios);i(_)}else i(g);g.name?o(g.name):o(n.name.replace(".json","").replace(/-/g," ")),g.conditions&&u&&u(g.conditions),g.collegeInfo&&a&&a(g.collegeInfo),c(!0)}catch{f(new Error("Invalid workflow file"))}},p.readAsText(n)}),Od=n=>{const i=[];return n.main&&n.main.steps&&i.push(...n.main.steps),Object.entries(n).forEach(([o,u])=>{o!=="main"&&u.steps.forEach(a=>{!a.originalStepId&&!i.some(c=>c.id===a.id)&&i.push({...a,conditional:!0,workflowCondition:a.workflowCondition||[u.condition]})})}),i},wy=async(n,i,o,u,a)=>{try{let c;try{c=await yy(()=>import("./standard-recommended-workflow-BUORFVgz.js"),[])}catch{console.log("Direct import failed, falling back to fetch with base URL");const h=await fetch(`/workflow-builder-UI/templates/${n}.json`);if(!h.ok)throw new Error(`Failed to load template: ${h.statusText}`);c=await h.json()}if(c.workflow)i(c.workflow);else if(c.scenarios){console.warn("Loading legacy scenario-based template format - converting to single workflow");const f=Od(c.scenarios);i(f)}else i(c);return c.name?o(c.name):o("Template Workflow"),c.conditions&&u&&u(c.conditions),c.collegeInfo&&a&&a(c.collegeInfo),!0}catch(c){throw console.error("Error loading template:",c),c}},by=(n,i)=>`
# Always recreate CollegeStudentApplicationPage instances
CollegeStudentApplicationPage.where(owner_id: ${n}_id, owner_type: 'College').destroy_all

CollegeStudentApplicationPage.create!([
  {
    owner_id: ${n}_id,
    owner_type: 'College',
    kind: 'default',
    order: 1,
    internal_name: 'student_address',
    display_name: 'Student Information',
  },
  {
    owner_id: ${n}_id,
    owner_type: 'College',
    kind: 'default',
    order: 2,
    internal_name: 'student_demographics',
    display_name: 'Student Demographics',
  },
  {
    owner_id: ${n}_id,
    owner_type: 'College',
    kind: 'default',
    order: 3,
    internal_name: 'parent_information',
    display_name: 'Parent Information',
  },
  {
    owner_id: ${n}_id,
    owner_type: 'College',
    kind: 'default',
    order: 4,
    internal_name: 'high_school',
    display_name: 'High School',
  },
  {
    owner_id: ${n}_id,
    owner_type: 'College',
    kind: 'default',
    order: 5,
    internal_name: 'ferpa',
    display_name: 'FERPA Consent',
  },
  {
    owner_id: ${n}_id,
    owner_type: 'College',
    kind: 'default',
    order: 6,
    internal_name: 'programs',
    display_name: 'Programs',
    exclude_when_true_method: 'student_high_school_has_no_programs?',
  },
])

# Create standard field groups and fields
name_and_address_group = ApplicationFieldGroup.where({
  owner_id: ${n}_id,
  owner_type: 'College',
  name: 'name_and_address',
}).first_or_create

name_and_address_group.create_or_update_field({
  internal_name: 'street1',
  display_name: 'Street Address',
  field_type: 'text',
  ui_type: 'text_field',
  required: true,
  maximum_length: 30,
  display_size: 30,
})

name_and_address_group.create_or_update_field({
  internal_name: 'city',
  display_name: 'Town/City',
  field_type: 'text',
  ui_type: 'text_field',
  required: true,
  maximum_length: 25,
})

name_and_address_group.create_or_update_field({
  internal_name: 'cell_phone',
  display_name: 'Cell Phone',
  field_type: 'text',
  ui_type: 'text_field',
  required: true,
  include_in_dx: true,
  ui_validation_method: 'valid_cell_phone',
  backend_validation_method: 'valid_cell_phone',
  order: 9,
})

name_and_address_group.create_or_update_field({
  internal_name: 'email',
  display_name: 'Email',
  field_type: 'text',
  ui_type: 'text_field',
  ui_validation_method: 'valid_email',
  backend_validation_method: 'valid_email',
  required: true,
})

name_and_address_group.create_or_update_field({
  internal_name: 'gender',
  display_name: 'Gender',
  field_type: 'text',
  ui_type: 'drop_down',
  required: true,
  allowed_values: ['Female', 'Male'],
})

demographics_group = ApplicationFieldGroup.where({
  owner_id: ${n}_id,
  owner_type: 'College',
  name: 'citizenship',
}).first_or_create

demographics_group.create_or_update_field({
  internal_name: 'citizenship_country',
  display_name: 'Citizenship Country',
  field_type: 'text',
  ui_type: 'drop_down',
  allowed_values: 'countries',
  required: true,
})

high_school_group = ApplicationFieldGroup.where({
  owner_id: ${n}_id,
  owner_type: 'College',
  name: 'high_school',
}).first_or_create

high_school_group.create_or_update_field({
  internal_name: 'hs_current_grade',
  display_name: 'Grade Level (at time of applying)',
  field_type: 'text',
  ui_type: 'drop_down',
  allowed_values: ['9th', '10th', '11th', '12th'],
  required: true,
})

high_school_group.create_or_update_field({
  internal_name: 'hs_grad_date',
  display_name: 'Anticipated Graduation Date',
  field_type: 'text',
  ui_type: 'drop_down',
  allowed_values: 'high_school_grad_year',
  required: true,
})

ferpa_group = ApplicationFieldGroup.where({
  owner_id: ${n}_id,
  owner_type: 'College',
  name: 'ferpa',
}).first_or_create

ferpa_group.create_or_update_field({
  internal_name: 'ferpa_consent',
  display_name: '',
  field_type: 'text',
  ui_type: 'radio_button',
  allowed_values: {
    'true' =>  ' Authorize',
    'false' => ' Do Not Authorize',
  },
  include_in_dx: true,
  include_in_reports: true,
  required: true,
})

# Create a basic enrollment form
Form.where(college_id: ${n}_id).destroy_all

Form.create([
  {
    :college_id => ${n}_id,
    :name => "enrollment_form",
    :parts => "header,body,parent_heading,parent_accept,parent_signature,section_break,student_heading,student_accept,student_signature,footer",
    :header => "<h3>HIGH SCHOOL PARTNERSHIPS REGISTRATION & AUTHORIZATION FORM</h3>",
    :student_accept => "<i>I have read and understand the guidelines.</i>\\r\\n",
    :parent_accept => "<i>I have read and understand the guidelines.</i>\\r\\n",
    :body => "<table width='99%'>
<tr><td>Student Name: <b>&nbsp;&nbsp;{{ student.name }}&nbsp;&nbsp;</b></td><td>Date of Birth: <b>&nbsp;&nbsp;{{ student.birth_date }}&nbsp;&nbsp;</b></td></tr>
<tr><td>Address: <b>&nbsp;&nbsp;{{ student.street1 }}&nbsp;&nbsp;</b></td><td>High School: <b>&nbsp;&nbsp;{{ high_school.name }}&nbsp;&nbsp;</b></td></tr>
<tr><td>City/State/Zip: <b>&nbsp;&nbsp;{{ student.city_state_zip }}&nbsp;&nbsp;</b></td><td>Grad Date: <b>&nbsp;&nbsp;{{ student.hs_grad_date }}&nbsp;&nbsp;</b></td></tr>
<tr><td>Email: <b>&nbsp;&nbsp;{{ student.email }}&nbsp;&nbsp;</b></td><td>Gender: <b>&nbsp;&nbsp;{{ student.gender_str }}&nbsp;&nbsp;</b></td></tr>
<tr><td>Cell Phone: <b>&nbsp;&nbsp;{{ student.cell_phone }}&nbsp;&nbsp;</b></td><td>Course: <b>&nbsp;&nbsp;{{ course.title }}&nbsp;&nbsp;</b></td></tr>
</table>",
    :footer => "",
  },
])
`,xy=n=>{const i={college_student_application:[],student_term_academic_year:[],student_term:[],registration:[]};return n.forEach(o=>{if(!o.workflow_category){i.registration.push(o);return}switch(o.workflow_category.toLowerCase()){case"one time":i.college_student_application.push(o);break;case"per academic year":i.student_term_academic_year.push(o);break;case"per term":i.student_term.push(o);break;case"per course":case"drop/withdraw":default:i.registration.push(o);break}}),i},Sy=()=>({college_student_application:1,student_term_academic_year:1,student_term:1,registration:1}),Pd=n=>{console.log(`
==== DEBUG: identifyWorkflowCategories ====`),console.log("Input workflow steps:",n.length),n.forEach((a,c)=>{console.log(`Step ${c+1}: "${a.title}" - workflow_category = "${a.workflow_category}"`)});const i=[{name:"college_student_application",targetObject:"CollegeStudentApplication",category:"registration_one_time",displayName:"One Time Per-Student Parent Consent"},{name:"student_term_academic_year",targetObject:"StudentTerm",category:"registration_academic_year",displayName:"Academic Year Per-Student"},{name:"student_term",targetObject:"StudentTerm",category:"registration",displayName:"Per-Term Per-Student"},{name:"registration",targetObject:"StudentDeCourse",category:"registration",displayName:"Registration"}],o=new Set;o.add("registration"),console.log('Added default "registration" category'),n.forEach(a=>{if(a.workflow_category){console.log(`Processing step "${a.title}" with category "${a.workflow_category}"`);const c=a.workflow_category.toLowerCase();c==="one time"?(console.log('  -> Matched to "college_student_application"'),o.add("college_student_application")):c==="per academic year"?(console.log('  -> Matched to "student_term_academic_year"'),o.add("student_term_academic_year")):c==="per term"?(console.log('  -> Matched to "student_term"'),o.add("student_term")):c==="per course"||c==="drop/withdraw"?(console.log('  -> Matched to "registration"'),o.add("registration")):console.log(`  -> WARNING: Unknown category "${c}"`)}});const u=i.filter(a=>o.has(a.name));return console.log("Identified workflow categories:",u.map(a=>a.name)),console.log(`==== END DEBUG: identifyWorkflowCategories ====
`),u},ky=(n,i,o)=>`${n}_id = ${i}

${n}_college_student_application_active_flow_definition_version_number = ${o.college_student_application}
${n}_student_term_academic_year_active_flow_definition_version_number = ${o.student_term_academic_year}
${n}_student_term_active_flow_definition_version_number = ${o.student_term}
${n}_registration_active_flow_definition_version_number = ${o.registration}

`,Cy=(n,i)=>`# College attributes to override
college_always_update_attributes = {
  inst_name: "${i.name}",
  admission_application_url: nil,
  branded_host: '${n}',
}

# Update or create College
if College.exists?(id: ${n}_id)
  College.update(${n}_id, college_always_update_attributes)
else
  College.seed(:id,
    {
      # id will be set by seed-fu based on the first argument
      ope_id: "00000000",
      type_label: "${i.type||"Public: 2-year"}",
      type_level: 2, profit: false,
      city: "${i.city||"City"}",
      state: "${i.state||"ST"}",
      zip: "${i.zip||"00000"}",
      phone: "${i.phone||"0000000000"}",
      url: "${i.url||"www.example.edu"}",
      enrollment: 0,
    }.merge(college_always_update_attributes)
  )
end

College.find(${n}_id).set_local_option(LocalOption::College::USE_COLLEGE_STUDENT_APPLICATION, true)

`,jy=n=>{switch(n.stepType){case"Approval":return n.title==="Parent Consent"?"ProvideConsentStep":"ApprovalStep";case"Upload":return"UploadDocumentStep";case"Information":return"InfoStep";case"ProvideConsent":return"ProvideConsentStep";case"CheckHolds":return"CheckHoldsViaEthosApiStep";case"RegisterViaApi":return"RegisterViaEthosApiStep";case"ResolveIssue":return"ResolveIssueStep";case"ReviewFailedRegistration":return"ApprovalStep";case"Registration Failure":return"DeclineRegistrationStep";case"Successful Registration":return n.step_class||"CompleteRegistrationStep";case"PendingCompletionOfOneTimeSteps":return"WaitForSubordinateRegistrationActiveFlowCompletionStep";case"PendingCompletionOfPerTermSteps":return"WaitForSubordinateRegistrationActiveFlowCompletionStep";case"PendingCompletionOfPerYearSteps":return"WaitForSubordinateRegistrationActiveFlowCompletionStep";default:return n.step_class||"ApprovalStep"}},Ty=(n,i,o)=>{if(n.stepType==="system"||n.stepType==="initialization")return n.parameters&&Object.keys(n.parameters).length>0?Xc(n.parameters):"''";let u={};if(i&&(u.completion_state=i),n.isFeedbackStep&&n.feedbackRelationship&&(u.feedback_relationship={parentStepId:n.feedbackRelationship.parentStepId,feedbackId:n.feedbackRelationship.feedbackId,parentStepTitle:n.feedbackRelationship.parentStepTitle,requestingRole:n.feedbackRelationship.requestingRole}),n.stepType==="ReviewFailedRegistration"&&(u.clear_states_by_completion={yes:["college_declined_registration_comments","college_declined","college_resubmit_registration","college_resubmit_registration_yes","registration_response_no","registration_response","registration_xml_workflow_file_id","registration_via_ethos_api_processed","registration_via_colleague_api_processed"]}),n.stepType==="Upload"&&(u.document_class=n.documentClass||"StudentDocument",n.fileUploads&&n.fileUploads.length>0?u.kinds=n.fileUploads.map(a=>a.fileType):u.kinds=["other"],i))if(n.isFeedbackStep&&n.feedbackRelationship){const a=o.find(c=>c.id===n.feedbackRelationship.parentStepId);if(a){const c=ot(a),f=n.role&&n.role.toLowerCase()==="student"?"student_more_info":n.role&&n.role.toLowerCase()==="parent"?"parent_more_info":n.role&&(n.role.toLowerCase()==="high school"||n.role.toLowerCase()==="counselor")?"hs_more_info":n.role&&n.role.toLowerCase()==="approver"?"approver_more_info":"more_info";u.clear_states_by_completion={complete:[i,`${i}_complete`,c,`${c}_${f}`]}}else u.clear_states_by_completion={return:[i,`${i}_return`,`${i}_complete`]}}else u.clear_states_by_completion={return:[i,`${i}_return`,`${i}_complete`]};return n.stepType==="Approval"&&i&&n.feedbackLoops&&Object.keys(n.feedbackLoops).length>0&&(u.feedbackLoops={},Object.keys(n.feedbackLoops).forEach(a=>{const c=n.feedbackLoops[a];u.feedbackLoops[a]={recipient:c.recipient,nextStep:c.nextStep}}),u.clear_states_by_completion||(u.clear_states_by_completion={}),Object.keys(n.feedbackLoops).forEach(a=>{const c=n.feedbackLoops[a],f=c.recipient&&c.recipient.toLowerCase()==="student"?"student_more_info":c.recipient&&c.recipient.toLowerCase()==="parent"?"parent_more_info":c.recipient&&(c.recipient.toLowerCase()==="high school"||c.recipient.toLowerCase()==="counselor")?"hs_more_info":c.recipient&&c.recipient.toLowerCase()==="approver"?"approver_more_info":"more_info";u.clear_states_by_completion.yes||(u.clear_states_by_completion.yes=[]),u.clear_states_by_completion.yes.push(`${i}_${f}`)})),n.stepType==="ProvideConsent"&&(u.consent="all"),n.stepType==="CheckHolds"&&(u.hold_codes=n.holdCodes||"*any*",u.holds="has_holds",u.no_holds="no_holds"),(n.stepType==="WaitForCompletionOfOneTimeSteps"||n.stepType==="PendingCompletionOfOneTimeSteps")&&(u.inject_subordinate_registration_active_flow_fields=["esign_enrollment_form_parent_date","esign_enrollment_form_parent_name"],u.subordinate_registration_active_flow_target_object_type="CollegeStudentApplication",u.subordinate_registration_active_flow_category="registration_one_time",u.completion_state="one_time_workflow_complete"),n.stepType==="WaitForCompletionOfPerTermSteps"&&(u.inject_subordinate_registration_active_flow_fields=[],u.subordinate_registration_active_flow_target_object_type="StudentTerm",u.subordinate_registration_active_flow_category="registration",u.completion_state="student_term_complete"),n.updateAttributes&&Object.keys(n.updateAttributes).length>0&&(u.update_attributes=n.updateAttributes),n.actionOptions&&n.actionOptions.some(a=>a.requiresAdditionalInfo)&&(u.update_attributes||(u.update_attributes={}),n.actionOptions.forEach(a=>{a.requiresAdditionalInfo&&a.additionalInfoField&&a.additionalInfoModel&&(u.update_attributes[a.additionalInfoModel]||(u.update_attributes[a.additionalInfoModel]=[]),u.update_attributes[a.additionalInfoModel].includes(a.additionalInfoField)||u.update_attributes[a.additionalInfoModel].push(a.additionalInfoField))})),n.tableColumns&&n.tableColumns.some(a=>a.type==="input")&&(u.update_attributes||(u.update_attributes={}),n.tableColumns.forEach(a=>{if(a.type==="input"&&a.modelPath&&a.value&&a.value.startsWith("fields.")){const c=a.value.replace("fields.","");u.update_attributes[a.modelPath]||(u.update_attributes[a.modelPath]=[]),u.update_attributes[a.modelPath].includes(c)||u.update_attributes[a.modelPath].push(c)}})),Xc(u)},Ny=n=>{const i={},o=new Set;return n.forEach(a=>{a.conditional&&a.workflowCondition&&(Array.isArray(a.workflowCondition)?a.workflowCondition:[a.workflowCondition]).forEach(f=>o.add(f))}),n.some(a=>a.role==="High School"||a.role==="Counselor")&&(o.add("high_school"),console.log("Added implicit high_school condition based on High School role steps")),console.log("All conditions found in workflow:",Array.from(o)),o.forEach(a=>{i[a]||(i[a]={steps:[],completionStates:[]}),n.filter(f=>f.conditional&&f.workflowCondition&&(Array.isArray(f.workflowCondition)?f.workflowCondition:[f.workflowCondition]).includes(a)?!0:a==="high_school"&&(f.role==="High School"||f.role==="Counselor")?(console.log(`Treating step "${f.title}" as conditional on high_school due to High School role`),!0):!1).forEach(f=>{i[a].steps.some(h=>h.id===f.id)||i[a].steps.push(f);const p=ot(f);p&&!i[a].completionStates.includes(p)&&(i[a].completionStates.push(p),console.log(`Added completion state "${p}" for condition "${a}"`))})}),Object.keys(i).forEach(a=>{console.log(`Condition "${a}" leads to steps:`,i[a].steps.map(c=>c.title)),console.log(`Completion states for "${a}":`,i[a].completionStates)}),i},Ey=(n,i,o)=>{const u=[],a=Ny(o);return console.log(`Finding conditional completion states for step ${n.title} at index ${i}`),Object.keys(a).forEach(c=>{const f=n.conditional&&n.workflowCondition&&(Array.isArray(n.workflowCondition)?n.workflowCondition.includes(c):n.workflowCondition===c),p=(n.role==="High School"||n.role==="Counselor")&&c==="high_school";if(f||p){console.log(`Step ${n.title} is part of condition ${c}, skipping this condition`);return}let h=null,g=-1;const _=a[c].steps||[];console.log(`Condition ${c} has ${_.length} steps`),_.forEach(C=>{const T=o.findIndex(w=>w.id===C.id);T<i&&T>g&&(C.completion_state||ot(C))&&(g=T,h=C.completion_state||ot(C),C.stepType==="Approval"?h+="_yes":C.stepType==="Upload"&&(h+="_complete"),console.log(`Found completion state ${h} from step ${C.title} in condition ${c}`))}),h&&(u.push(h),console.log(`Added completion state ${h} from condition ${c} to step ${n.title}'s soft_required_fields`))}),u},Oy=(n,i,o)=>{if(n.stepType==="Registration Failure"||n.stepType==="Successful Registration")return n.soft_required_fields?n.soft_required_fields.join(", "):"";if(n.title==="Failed One-Time Workflow")return"";const u=[];if(n.stepType==="ReviewFailedRegistration")return u.push("registration_response_no"),u.map(h=>`'${h}'`).join(", ");if(n.isFeedbackStep&&n.feedbackRelationship){const h=n.feedbackRelationship.parentStepId,g=o.find(_=>_.id===h);if(g){const _=ot(g),C=n.role&&n.role.toLowerCase()==="student"?"student_more_info":n.role&&n.role.toLowerCase()==="parent"?"parent_more_info":n.role&&(n.role.toLowerCase()==="high school"||n.role.toLowerCase()==="counselor")?"hs_more_info":n.role&&n.role.toLowerCase()==="approver"?"approver_more_info":"more_info",T=`${_}_${C}`;return u.push(T),u.map(w=>`'${w}'`).join(", ")}}if((n.stepType==="system"||n.stepClass==="CompleteRegistrationStep")&&(n.title&&n.title.toLowerCase().includes("complete")||n.name&&n.name.toLowerCase().includes("complete")))return u.push("registration_response_yes"),u.map(h=>`'${h}'`).join(", ");n.conditional&&n.workflowCondition&&(Array.isArray(n.workflowCondition)?n.workflowCondition:[n.workflowCondition]).forEach(g=>{u.push(Lt(g))}),(n.role==="High School"||n.role==="Counselor")&&(u.includes("high_school")||u.push("high_school"));const a=Ey(n,i,o);u.push(...a);let c=o[i-1];if(console.log("FINDING PREVIOUS STEP FOR DEPENDENCY"),console.log(`Current step: ${n.title}`),console.log(n),c&&c.conditional&&c.workflowCondition[0]!==n.workflowCondition[0]){let h=!1,g=i-1;for(;!h&&g>0;){const _=o[g];_.conditional&&_.workflowCondition[0]!==n.workflowCondition[0]?g--:(h=!0,c=_)}}if(c&&c.isFeedbackStep&&c.feedbackRelationship){let h=!1,g=i-1;for(;!h&&g>0;){const _=o[g];_.isFeedbackStep&&_.feedbackRelationship||_.condition&&_.workflowCondition[0]!==n.workflowCondition[0]?g--:(h=!0,c=_)}}if(c)if(console.log(`Previous step: ${c.title}`),console.log(c),c.parameters&&c.parameters.completion_state)u.push(c.parameters.completion_state);else{const h=hg(c);c.stepType==="Approval"&&c.title==="Parent Consent"?u.push("parent_consent_provided"):c.stepType==="Approval"&&h.includes(`${ot(c)}_yes`)?u.push(`${ot(c)}_yes`):c.stepType==="Upload"&&h.includes(`${ot(c)}_complete`)?u.push(`${ot(c)}_complete`):c.stepType==="CheckHolds"?n.title&&n.title.toLowerCase().includes("resolve")?u.push(`${ot(c)}_has_holds`):u.push(`${ot(c)}_no_holds`):h.length>0&&u.push(h[0])}if(n.addedAfterStepId){const h=o.find(g=>g.id===n.addedAfterStepId);if(h){const g=ot(h);g&&(h.stepType==="Approval"?u.push(`${g}_yes`):h.stepType==="Upload"?u.push(`${g}_complete`):u.push(g))}}return u.length===0&&n.stepType!=="Initialization"&&u.push("initialization_complete"),(Ma(n)==="hs"||n.role==="High School"||n.role==="Counselor")&&(u.includes("high_school")||u.push("high_school")),[...new Set(u)].map(h=>`'${h}'`).join(", ")},Py=n=>(n.parameters&&n.parameters.completion_state&&(n.parameters.completion_state==="onetime_workflow_complete"?n.parameters.completion_state="one_time_workflow_complete":n.parameters.completion_state==="complete_onetime_workflow"?n.parameters.completion_state="complete_one_time_workflow":n.parameters.completion_state==="failed_onetime_workflow"&&(n.parameters.completion_state="failed_one_time_workflow")),n.soft_required_fields&&(n.soft_required_fields=n.soft_required_fields.map(i=>i==="onetime_workflow_complete"?"one_time_workflow_complete":i==="complete_onetime_workflow"?"complete_one_time_workflow":i)),n),Iy=n=>(n.participant==="Parent/Guardian"&&(n.participant="Parent"),n.participant_role==="parent/guardian"&&(n.participant_role="parent"),n),Ry=(n,i,o,u)=>{if(o!=="registration")return[];const a=[],c=new Set;return n.forEach(f=>{if(!(f.participant_role==="system"||!f.actionOptions)&&f.stepType==="Approval"){const p=f.actionOptions.filter(h=>{var g;return(h.terminates_workflow||h.canTerminate)&&(h.value==="no"||((g=h.value)==null?void 0:g.includes("decline")))});p.length>0&&p.forEach(h=>{const g=ot(f),_=h.value.replace("decline-","");let C;if(h.value.includes("_")?C=h.value:C=`${g}_${_}`,!c.has(C)){c.add(C);const T={name:"Registration Failure",stepType:"Registration Failure",title:"Registration Failure",version:`${i}_${o}_active_flow_definition_version_number`,participant:"Processing",step_class:"DeclineRegistrationStep",view_name_override:"",parameters:{mailer_signatures:[[":failure",{override_roles:["student"],subject:"Registration Could Not Be Completed",template:"student_registration_failure"}]]},participant_role:"system",soft_required_fields:[`'${C}'`]};a.push(T)}})}}),a.push({name:"Registration Failure",stepType:"Registration Failure",title:"Registration Failure",version:`${i}_${o}_active_flow_definition_version_number`,participant:"Processing",step_class:"DeclineRegistrationStep",view_name_override:"",parameters:{mailer_signatures:[[":failure",{override_roles:["student"],subject:"Registration Could Not Be Completed",template:"student_registration_failure"}]]},participant_role:"system",soft_required_fields:[]}),a},Dy=(n,i,o,u)=>{if(o!=="registration")return[];const a=[],c=n.some(p=>p.stepType==="RegisterViaApi"||p.step_class==="RegisterViaEthosApiStep"||p.title&&(p.title.includes("Register Via")||p.title.includes("Registration Submission")||p.title.includes("Registration XML"))),f=n.some(p=>p.stepType==="ReviewFailedRegistration"||p.title&&(p.title.includes("Review Failed Registration")||p.title.includes("Review Declined Registration")));return c&&a.push({name:"Successful Registration",stepType:"Successful Registration",title:"Successful Registration",version:`${i}_${o}_active_flow_definition_version_number`,participant:"Processing",step_class:"CompleteRegistrationStep",view_name_override:"",parameters:{completion_state:"successful_registration"},participant_role:"system",soft_required_fields:["'registration_response_yes'"]}),f&&a.push({name:"Successful Registration",stepType:"Successful Registration",title:"Successful Registration",version:`${i}_${o}_active_flow_definition_version_number`,participant:"Processing",step_class:"CompleteRegistrationStep",view_name_override:"",parameters:{completion_state:"successful_registration"},participant_role:"system",soft_required_fields:["'college_resubmit_registration_complete'"]}),!c&&!f&&n.filter(h=>{var g;return h.stepType==="Approval"&&((g=h.actionOptions)==null?void 0:g.some(_=>{var C,T;return(_.terminates_workflow||_.canTerminate)&&(_.value==="approve-yes"||((C=_.value)==null?void 0:C.includes("approve"))||((T=_.value)==null?void 0:T.includes("yes")))}))}).forEach(h=>{const g=ot(h);if(h.actionOptions.find(C=>{var T,w;return(C.terminates_workflow||C.canTerminate)&&(C.value==="approve-yes"||((T=C.value)==null?void 0:T.includes("approve"))||((w=C.value)==null?void 0:w.includes("yes")))})){let C=`${g}_yes`;a.push({name:"Successful Registration",stepType:"Successful Registration",title:"Successful Registration",version:`${i}_${o}_active_flow_definition_version_number`,participant:"Processing",step_class:"CompleteRegistrationStep",view_name_override:"",parameters:{completion_state:"successful_registration"},participant_role:"system",soft_required_fields:[`'${C}'`]})}}),a},$y=(n,i)=>{const o=`${n}_`;return i.replace(o,"").replace("_active_flow_definition","")},Ay=(n,i,o,u,a)=>{const c=$y(i,o);n=Py(n),n=Iy(n);const f=ot(n),p=jy(n);let h="";n.stepType==="ProvideConsent"?h="":h=Nd(n);const g=Ty(n,f,a);let _=mg(n),C=Ma(n);const T=Oy(n,u,a);return`
      {
        active_flow_definitions: [${o}],
        name: '${n.title||"Step "+(u+1)}',
        version: ${i}_${c}_active_flow_definition_version_number,
        description: '',
        participant: '${_}',
        step_class: '${p}',
        view_name_override: '${h}',
        parameters: ${g},
        participant_role: '${C}',
        soft_required_fields: [${T}]
      },
`},Ly=n=>n.stepType==="Initialization"||n.title&&n.title.toLowerCase().includes("initialization"),zy=n=>{var i,o,u,a,c,f;return((i=n.stepType)==null?void 0:i.toLowerCase().includes("waitfor"))||((o=n.stepType)==null?void 0:o.toLowerCase().includes("pending"))||((u=n.stepType)==null?void 0:u.toLowerCase().includes("completion of"))||n.title&&(n.title.toLowerCase().includes("completion of")||n.title.toLowerCase().includes("pending completion")||n.title.toLowerCase().includes("wait for"))||n.step_class&&(((a=n.step_class)==null?void 0:a.toLowerCase().includes("waitfor"))||((c=n.step_class)==null?void 0:c.toLowerCase().includes("pendingcompletion"))||((f=n.step_class)==null?void 0:f.toLowerCase().includes("waitforsubordinate")))},Fy=(n,i)=>{const o=i.name==="registration"?"CourseRegistration":i.targetObject;return{stepType:"Initialization",title:`${i.displayName} Initialization`,version:`${n}_${i.name}_active_flow_definition_version_number`,participant:"Processing",step_class:`Initialize${n.charAt(0).toUpperCase()+n.slice(1)}${o}Step`,view_name_override:"",parameters:"",participant_role:"system",soft_required_fields:[]}},td=(n,i)=>({stepType:"PendingCompletionOfOneTimeSteps",title:"Pending Completion of One-Time Steps",version:`${n}_${i.name}_active_flow_definition_version_number`,participant:"Pending",step_class:"WaitForSubordinateRegistrationActiveFlowCompletionStep",view_name_override:"",parameters:{inject_subordinate_registration_active_flow_fields:["esign_enrollment_form_parent_date","esign_enrollment_form_parent_name"],subordinate_registration_active_flow_target_object_type:"CollegeStudentApplication",subordinate_registration_active_flow_category:"registration_one_time",completion_state:"one_time_workflow_complete"},participant_role:"system",soft_required_fields:["initialization_complete"]}),My=(n,i)=>({stepType:"PendingCompletionOfPerTermSteps",title:"Pending Completion of Per Term Steps",version:`${n}_${i.name}_active_flow_definition_version_number`,participant:"Pending",step_class:"WaitForSubordinateRegistrationActiveFlowCompletionStep",view_name_override:"",parameters:{inject_subordinate_registration_active_flow_fields:[],subordinate_registration_active_flow_target_object_type:"StudentTerm",subordinate_registration_active_flow_category:"registration",completion_state:"student_term_complete"},participant_role:"system",soft_required_fields:["one_time_workflow_complete"]}),Uy=(n,i)=>({stepType:"CompleteOneTimeWorkflow",title:"Complete One-Time Workflow",version:`${n}_${i.name}_active_flow_definition_version_number`,participant:"Processing",step_class:"CompleteSubordinateRegistrationActiveFlowStep",view_name_override:"",parameters:{subordinate_registration_active_flow_target_object_type:"CollegeStudentApplication",subordinate_registration_active_flow_category:"registration_one_time"},participant_role:"system",soft_required_fields:[]}),By=(n,i)=>({stepType:"FailedOneTimeWorkflow",title:"Failed One-Time Workflow",version:`${n}_${i.name}_active_flow_definition_version_number`,participant:"Processing",step_class:"DeclineSubordinateRegistrationActiveFlowStep",view_name_override:"",parameters:{},participant_role:"system",soft_required_fields:[]}),nd=(n,i,o)=>({stepType:"CompletePerTermWorkflow",title:"Complete Per Term Workflow",version:`${n}_${i.name}_active_flow_definition_version_number`,participant:"Processing",step_class:"CompleteSubordinateRegistrationActiveFlowStep",view_name_override:"",parameters:{subordinate_registration_active_flow_target_object_type:"StudentTerm",subordinate_registration_active_flow_category:"registration"},participant_role:"system",soft_required_fields:["parent_consent_provided",o]}),Hy=(n,i)=>({stepType:"DeclinePerTermWorkflow",title:"Decline Per Term Workflow",version:`${n}_${i.name}_active_flow_definition_version_number`,participant:"Processing",step_class:"DeclineStudentTermStep",view_name_override:"",parameters:{mailer_signatures:[["failure",{override_roles:"student",template:"student_college_rejection"}]]},participant_role:"system",soft_required_fields:[]}),Wy=(n,i,o,u)=>{const a=o[i.name],c=`${n}_${i.name}_active_flow_definition`;let f=`# ${n.charAt(0).toUpperCase()+n.slice(1)} ActiveFlowDefinition for ${i.targetObject} (${i.category}).
afd = ActiveFlowDefinition.where(owner_id: ${n}_id, owner_type: 'College', target_object_type: '${i.targetObject}', category: '${i.category}')
if afd.present? && afd.first.version_number < ${n}_${i.name}_active_flow_definition_version_number
  afd_id = afd.first.id
  afd.first.destroy
  afd = nil
end

if afd.blank?
  ${c} = ActiveFlowDefinition.create({
    name: '${n.charAt(0).toUpperCase()+n.slice(1)} ${i.displayName}',
    version_number: ${n}_${i.name}_active_flow_definition_version_number,
    description: '${n.charAt(0).toUpperCase()+n.slice(1)} ${i.targetObject} ActiveFlowDefinition',
    category: '${i.category}',
    target_object_type: '${i.targetObject}',
    owner_type: 'College',
    owner_id: ${n}_id
  })
  if ${c}.persisted?

    ActiveFlowStepTrigger.create([
`;return f+=qy(n,i,a,u),f+=`    ])
  end
end

`,f},qy=(n,i,o,u)=>{let a="";const c=`${n}_${i.name}_active_flow_definition`;console.log(`

==== DEBUG START: generateStepsForCategory ====`),console.log(`Processing category: ${i.name} (${i.targetObject})`);const f=[];console.log("Using global workflow categories info:"),console.log("- hasOneTimeWorkflow (global):",window.hasOneTimeWorkflow),console.log("- hasPerTermWorkflow (global):",window.hasPerTermWorkflow),console.log("Input category steps with categories:"),u.forEach(g=>{g.workflow_category&&console.log(`  - "${g.title}": workflow_category = "${g.workflow_category}"`)});const p=Fy(n,i);if(f.push(p),console.log("Added initialization step:",p.title),i.name==="registration"){if(console.log("Processing registration workflow steps"),window.hasOneTimeWorkflow){console.log("Adding one-time completion step to registration workflow");const g=td(n,i);console.log("One-time step created:",g),f.push(g)}else console.log("Skipped one-time completion step - no one-time workflow found");if(window.hasPerTermWorkflow){console.log("Adding per-term completion step to registration workflow");const g=My(n,i);f.push(g)}else console.log("Skipped per-term completion step - no per-term workflow found")}if(i.name==="student_term"&&window.hasOneTimeWorkflow){console.log("Adding one-time completion step to student_term workflow");const g=td(n,i);f.push(g)}console.log("Adding user-defined steps...");const h=u.filter(g=>!Ly(g)&&!zy(g));if(console.log(`Found ${h.length} user-defined steps`),h.forEach(g=>console.log(`  - "${g.title}": ${g.stepType}`)),f.push(...h),i.name==="college_student_application"?(f.push(Uy(n,i)),f.push(By(n,i))):i.name==="student_term"&&(f.push(nd(n,i,"holds_checked_via_ethos_api_no_holds")),f.push(nd(n,i,"review_student_record_yes")),f.push(Hy(n,i))),i.name==="registration"){const g=Ry(u,n,i.name),_=Dy(u,n,i.name);f.push(...g),f.push(..._)}return console.log(`
Final steps in order:`),f.forEach((g,_)=>console.log(`${_+1}. ${g.title} (${g.stepType})`)),f.forEach((g,_)=>{a+=Ay(g,n,c,_,f)}),console.log(`==== DEBUG END: generateStepsForCategory ====

`),a},Id=(n,i,o={})=>{const u=i.name.toLowerCase().replace(/[^a-z0-9]/g,""),a=n.workflow||[],c=Sy();let f=ky(u,i.id,c);const p=a.filter(_=>_.workflow_category);console.log("All workflow steps with categories:",p.length);const h=Pd(p);console.log("Global workflow categories:",h.map(_=>_.name)),window.globalWorkflowCategories=h,window.hasOneTimeWorkflow=h.some(_=>_.name==="college_student_application"),window.hasPerTermWorkflow=h.some(_=>_.name==="student_term"),f+=Cy(u,i),o.includeApplicationFields&&(f+=by(u,i.id));const g=xy(a);return h.sort((_,C)=>_.name==="college_student_application"?-1:C.name==="college_student_application"?1:_.name==="student_term"?-1:C.name==="student_term"?1:0).forEach(_=>{const C=g[_.name]||[];f+=Wy(u,_,c,C)}),f};function vo(n){throw new Error('Could not dynamically require "'+n+'". Please configure the dynamicRequireTargets or/and ignoreDynamicRequires option of @rollup/plugin-commonjs appropriately for this require call to work.')}var ka={exports:{}};/*!

JSZip v3.10.1 - A JavaScript class for generating and reading zip files
<http://stuartk.com/jszip>

(c) 2009-2016 Stuart Knightley <stuart [at] stuartk.com>
Dual licenced under the MIT license or GPLv3. See https://raw.github.com/Stuk/jszip/main/LICENSE.markdown.

JSZip uses the library pako released under the MIT license :
https://github.com/nodeca/pako/blob/main/LICENSE
*/var rd;function Vy(){return rd||(rd=1,function(n,i){(function(o){n.exports=o()})(function(){return function o(u,a,c){function f(g,_){if(!a[g]){if(!u[g]){var C=typeof vo=="function"&&vo;if(!_&&C)return C(g,!0);if(p)return p(g,!0);var T=new Error("Cannot find module '"+g+"'");throw T.code="MODULE_NOT_FOUND",T}var w=a[g]={exports:{}};u[g][0].call(w.exports,function(k){var y=u[g][1][k];return f(y||k)},w,w.exports,o,u,a,c)}return a[g].exports}for(var p=typeof vo=="function"&&vo,h=0;h<c.length;h++)f(c[h]);return f}({1:[function(o,u,a){var c=o("./utils"),f=o("./support"),p="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";a.encode=function(h){for(var g,_,C,T,w,k,y,x=[],j=0,O=h.length,R=O,z=c.getTypeOf(h)!=="string";j<h.length;)R=O-j,C=z?(g=h[j++],_=j<O?h[j++]:0,j<O?h[j++]:0):(g=h.charCodeAt(j++),_=j<O?h.charCodeAt(j++):0,j<O?h.charCodeAt(j++):0),T=g>>2,w=(3&g)<<4|_>>4,k=1<R?(15&_)<<2|C>>6:64,y=2<R?63&C:64,x.push(p.charAt(T)+p.charAt(w)+p.charAt(k)+p.charAt(y));return x.join("")},a.decode=function(h){var g,_,C,T,w,k,y=0,x=0,j="data:";if(h.substr(0,j.length)===j)throw new Error("Invalid base64 input, it looks like a data url.");var O,R=3*(h=h.replace(/[^A-Za-z0-9+/=]/g,"")).length/4;if(h.charAt(h.length-1)===p.charAt(64)&&R--,h.charAt(h.length-2)===p.charAt(64)&&R--,R%1!=0)throw new Error("Invalid base64 input, bad content length.");for(O=f.uint8array?new Uint8Array(0|R):new Array(0|R);y<h.length;)g=p.indexOf(h.charAt(y++))<<2|(T=p.indexOf(h.charAt(y++)))>>4,_=(15&T)<<4|(w=p.indexOf(h.charAt(y++)))>>2,C=(3&w)<<6|(k=p.indexOf(h.charAt(y++))),O[x++]=g,w!==64&&(O[x++]=_),k!==64&&(O[x++]=C);return O}},{"./support":30,"./utils":32}],2:[function(o,u,a){var c=o("./external"),f=o("./stream/DataWorker"),p=o("./stream/Crc32Probe"),h=o("./stream/DataLengthProbe");function g(_,C,T,w,k){this.compressedSize=_,this.uncompressedSize=C,this.crc32=T,this.compression=w,this.compressedContent=k}g.prototype={getContentWorker:function(){var _=new f(c.Promise.resolve(this.compressedContent)).pipe(this.compression.uncompressWorker()).pipe(new h("data_length")),C=this;return _.on("end",function(){if(this.streamInfo.data_length!==C.uncompressedSize)throw new Error("Bug : uncompressed data size mismatch")}),_},getCompressedWorker:function(){return new f(c.Promise.resolve(this.compressedContent)).withStreamInfo("compressedSize",this.compressedSize).withStreamInfo("uncompressedSize",this.uncompressedSize).withStreamInfo("crc32",this.crc32).withStreamInfo("compression",this.compression)}},g.createWorkerFrom=function(_,C,T){return _.pipe(new p).pipe(new h("uncompressedSize")).pipe(C.compressWorker(T)).pipe(new h("compressedSize")).withStreamInfo("compression",C)},u.exports=g},{"./external":6,"./stream/Crc32Probe":25,"./stream/DataLengthProbe":26,"./stream/DataWorker":27}],3:[function(o,u,a){var c=o("./stream/GenericWorker");a.STORE={magic:"\0\0",compressWorker:function(){return new c("STORE compression")},uncompressWorker:function(){return new c("STORE decompression")}},a.DEFLATE=o("./flate")},{"./flate":7,"./stream/GenericWorker":28}],4:[function(o,u,a){var c=o("./utils"),f=function(){for(var p,h=[],g=0;g<256;g++){p=g;for(var _=0;_<8;_++)p=1&p?3988292384^p>>>1:p>>>1;h[g]=p}return h}();u.exports=function(p,h){return p!==void 0&&p.length?c.getTypeOf(p)!=="string"?function(g,_,C,T){var w=f,k=T+C;g^=-1;for(var y=T;y<k;y++)g=g>>>8^w[255&(g^_[y])];return-1^g}(0|h,p,p.length,0):function(g,_,C,T){var w=f,k=T+C;g^=-1;for(var y=T;y<k;y++)g=g>>>8^w[255&(g^_.charCodeAt(y))];return-1^g}(0|h,p,p.length,0):0}},{"./utils":32}],5:[function(o,u,a){a.base64=!1,a.binary=!1,a.dir=!1,a.createFolders=!0,a.date=null,a.compression=null,a.compressionOptions=null,a.comment=null,a.unixPermissions=null,a.dosPermissions=null},{}],6:[function(o,u,a){var c=null;c=typeof Promise<"u"?Promise:o("lie"),u.exports={Promise:c}},{lie:37}],7:[function(o,u,a){var c=typeof Uint8Array<"u"&&typeof Uint16Array<"u"&&typeof Uint32Array<"u",f=o("pako"),p=o("./utils"),h=o("./stream/GenericWorker"),g=c?"uint8array":"array";function _(C,T){h.call(this,"FlateWorker/"+C),this._pako=null,this._pakoAction=C,this._pakoOptions=T,this.meta={}}a.magic="\b\0",p.inherits(_,h),_.prototype.processChunk=function(C){this.meta=C.meta,this._pako===null&&this._createPako(),this._pako.push(p.transformTo(g,C.data),!1)},_.prototype.flush=function(){h.prototype.flush.call(this),this._pako===null&&this._createPako(),this._pako.push([],!0)},_.prototype.cleanUp=function(){h.prototype.cleanUp.call(this),this._pako=null},_.prototype._createPako=function(){this._pako=new f[this._pakoAction]({raw:!0,level:this._pakoOptions.level||-1});var C=this;this._pako.onData=function(T){C.push({data:T,meta:C.meta})}},a.compressWorker=function(C){return new _("Deflate",C)},a.uncompressWorker=function(){return new _("Inflate",{})}},{"./stream/GenericWorker":28,"./utils":32,pako:38}],8:[function(o,u,a){function c(w,k){var y,x="";for(y=0;y<k;y++)x+=String.fromCharCode(255&w),w>>>=8;return x}function f(w,k,y,x,j,O){var R,z,M=w.file,K=w.compression,Z=O!==g.utf8encode,ne=p.transformTo("string",O(M.name)),U=p.transformTo("string",g.utf8encode(M.name)),Q=M.comment,ce=p.transformTo("string",O(Q)),N=p.transformTo("string",g.utf8encode(Q)),L=U.length!==M.name.length,b=N.length!==Q.length,G="",ye="",ee="",te=M.dir,H=M.date,J={crc32:0,compressedSize:0,uncompressedSize:0};k&&!y||(J.crc32=w.crc32,J.compressedSize=w.compressedSize,J.uncompressedSize=w.uncompressedSize);var E=0;k&&(E|=8),Z||!L&&!b||(E|=2048);var P=0,pe=0;te&&(P|=16),j==="UNIX"?(pe=798,P|=function(re,Te){var Pe=re;return re||(Pe=Te?16893:33204),(65535&Pe)<<16}(M.unixPermissions,te)):(pe=20,P|=function(re){return 63&(re||0)}(M.dosPermissions)),R=H.getUTCHours(),R<<=6,R|=H.getUTCMinutes(),R<<=5,R|=H.getUTCSeconds()/2,z=H.getUTCFullYear()-1980,z<<=4,z|=H.getUTCMonth()+1,z<<=5,z|=H.getUTCDate(),L&&(ye=c(1,1)+c(_(ne),4)+U,G+="up"+c(ye.length,2)+ye),b&&(ee=c(1,1)+c(_(ce),4)+N,G+="uc"+c(ee.length,2)+ee);var se="";return se+=`
\0`,se+=c(E,2),se+=K.magic,se+=c(R,2),se+=c(z,2),se+=c(J.crc32,4),se+=c(J.compressedSize,4),se+=c(J.uncompressedSize,4),se+=c(ne.length,2),se+=c(G.length,2),{fileRecord:C.LOCAL_FILE_HEADER+se+ne+G,dirRecord:C.CENTRAL_FILE_HEADER+c(pe,2)+se+c(ce.length,2)+"\0\0\0\0"+c(P,4)+c(x,4)+ne+G+ce}}var p=o("../utils"),h=o("../stream/GenericWorker"),g=o("../utf8"),_=o("../crc32"),C=o("../signature");function T(w,k,y,x){h.call(this,"ZipFileWorker"),this.bytesWritten=0,this.zipComment=k,this.zipPlatform=y,this.encodeFileName=x,this.streamFiles=w,this.accumulate=!1,this.contentBuffer=[],this.dirRecords=[],this.currentSourceOffset=0,this.entriesCount=0,this.currentFile=null,this._sources=[]}p.inherits(T,h),T.prototype.push=function(w){var k=w.meta.percent||0,y=this.entriesCount,x=this._sources.length;this.accumulate?this.contentBuffer.push(w):(this.bytesWritten+=w.data.length,h.prototype.push.call(this,{data:w.data,meta:{currentFile:this.currentFile,percent:y?(k+100*(y-x-1))/y:100}}))},T.prototype.openedSource=function(w){this.currentSourceOffset=this.bytesWritten,this.currentFile=w.file.name;var k=this.streamFiles&&!w.file.dir;if(k){var y=f(w,k,!1,this.currentSourceOffset,this.zipPlatform,this.encodeFileName);this.push({data:y.fileRecord,meta:{percent:0}})}else this.accumulate=!0},T.prototype.closedSource=function(w){this.accumulate=!1;var k=this.streamFiles&&!w.file.dir,y=f(w,k,!0,this.currentSourceOffset,this.zipPlatform,this.encodeFileName);if(this.dirRecords.push(y.dirRecord),k)this.push({data:function(x){return C.DATA_DESCRIPTOR+c(x.crc32,4)+c(x.compressedSize,4)+c(x.uncompressedSize,4)}(w),meta:{percent:100}});else for(this.push({data:y.fileRecord,meta:{percent:0}});this.contentBuffer.length;)this.push(this.contentBuffer.shift());this.currentFile=null},T.prototype.flush=function(){for(var w=this.bytesWritten,k=0;k<this.dirRecords.length;k++)this.push({data:this.dirRecords[k],meta:{percent:100}});var y=this.bytesWritten-w,x=function(j,O,R,z,M){var K=p.transformTo("string",M(z));return C.CENTRAL_DIRECTORY_END+"\0\0\0\0"+c(j,2)+c(j,2)+c(O,4)+c(R,4)+c(K.length,2)+K}(this.dirRecords.length,y,w,this.zipComment,this.encodeFileName);this.push({data:x,meta:{percent:100}})},T.prototype.prepareNextSource=function(){this.previous=this._sources.shift(),this.openedSource(this.previous.streamInfo),this.isPaused?this.previous.pause():this.previous.resume()},T.prototype.registerPrevious=function(w){this._sources.push(w);var k=this;return w.on("data",function(y){k.processChunk(y)}),w.on("end",function(){k.closedSource(k.previous.streamInfo),k._sources.length?k.prepareNextSource():k.end()}),w.on("error",function(y){k.error(y)}),this},T.prototype.resume=function(){return!!h.prototype.resume.call(this)&&(!this.previous&&this._sources.length?(this.prepareNextSource(),!0):this.previous||this._sources.length||this.generatedError?void 0:(this.end(),!0))},T.prototype.error=function(w){var k=this._sources;if(!h.prototype.error.call(this,w))return!1;for(var y=0;y<k.length;y++)try{k[y].error(w)}catch{}return!0},T.prototype.lock=function(){h.prototype.lock.call(this);for(var w=this._sources,k=0;k<w.length;k++)w[k].lock()},u.exports=T},{"../crc32":4,"../signature":23,"../stream/GenericWorker":28,"../utf8":31,"../utils":32}],9:[function(o,u,a){var c=o("../compressions"),f=o("./ZipFileWorker");a.generateWorker=function(p,h,g){var _=new f(h.streamFiles,g,h.platform,h.encodeFileName),C=0;try{p.forEach(function(T,w){C++;var k=function(O,R){var z=O||R,M=c[z];if(!M)throw new Error(z+" is not a valid compression method !");return M}(w.options.compression,h.compression),y=w.options.compressionOptions||h.compressionOptions||{},x=w.dir,j=w.date;w._compressWorker(k,y).withStreamInfo("file",{name:T,dir:x,date:j,comment:w.comment||"",unixPermissions:w.unixPermissions,dosPermissions:w.dosPermissions}).pipe(_)}),_.entriesCount=C}catch(T){_.error(T)}return _}},{"../compressions":3,"./ZipFileWorker":8}],10:[function(o,u,a){function c(){if(!(this instanceof c))return new c;if(arguments.length)throw new Error("The constructor with parameters has been removed in JSZip 3.0, please check the upgrade guide.");this.files=Object.create(null),this.comment=null,this.root="",this.clone=function(){var f=new c;for(var p in this)typeof this[p]!="function"&&(f[p]=this[p]);return f}}(c.prototype=o("./object")).loadAsync=o("./load"),c.support=o("./support"),c.defaults=o("./defaults"),c.version="3.10.1",c.loadAsync=function(f,p){return new c().loadAsync(f,p)},c.external=o("./external"),u.exports=c},{"./defaults":5,"./external":6,"./load":11,"./object":15,"./support":30}],11:[function(o,u,a){var c=o("./utils"),f=o("./external"),p=o("./utf8"),h=o("./zipEntries"),g=o("./stream/Crc32Probe"),_=o("./nodejsUtils");function C(T){return new f.Promise(function(w,k){var y=T.decompressed.getContentWorker().pipe(new g);y.on("error",function(x){k(x)}).on("end",function(){y.streamInfo.crc32!==T.decompressed.crc32?k(new Error("Corrupted zip : CRC32 mismatch")):w()}).resume()})}u.exports=function(T,w){var k=this;return w=c.extend(w||{},{base64:!1,checkCRC32:!1,optimizedBinaryString:!1,createFolders:!1,decodeFileName:p.utf8decode}),_.isNode&&_.isStream(T)?f.Promise.reject(new Error("JSZip can't accept a stream when loading a zip file.")):c.prepareContent("the loaded zip file",T,!0,w.optimizedBinaryString,w.base64).then(function(y){var x=new h(w);return x.load(y),x}).then(function(y){var x=[f.Promise.resolve(y)],j=y.files;if(w.checkCRC32)for(var O=0;O<j.length;O++)x.push(C(j[O]));return f.Promise.all(x)}).then(function(y){for(var x=y.shift(),j=x.files,O=0;O<j.length;O++){var R=j[O],z=R.fileNameStr,M=c.resolve(R.fileNameStr);k.file(M,R.decompressed,{binary:!0,optimizedBinaryString:!0,date:R.date,dir:R.dir,comment:R.fileCommentStr.length?R.fileCommentStr:null,unixPermissions:R.unixPermissions,dosPermissions:R.dosPermissions,createFolders:w.createFolders}),R.dir||(k.file(M).unsafeOriginalName=z)}return x.zipComment.length&&(k.comment=x.zipComment),k})}},{"./external":6,"./nodejsUtils":14,"./stream/Crc32Probe":25,"./utf8":31,"./utils":32,"./zipEntries":33}],12:[function(o,u,a){var c=o("../utils"),f=o("../stream/GenericWorker");function p(h,g){f.call(this,"Nodejs stream input adapter for "+h),this._upstreamEnded=!1,this._bindStream(g)}c.inherits(p,f),p.prototype._bindStream=function(h){var g=this;(this._stream=h).pause(),h.on("data",function(_){g.push({data:_,meta:{percent:0}})}).on("error",function(_){g.isPaused?this.generatedError=_:g.error(_)}).on("end",function(){g.isPaused?g._upstreamEnded=!0:g.end()})},p.prototype.pause=function(){return!!f.prototype.pause.call(this)&&(this._stream.pause(),!0)},p.prototype.resume=function(){return!!f.prototype.resume.call(this)&&(this._upstreamEnded?this.end():this._stream.resume(),!0)},u.exports=p},{"../stream/GenericWorker":28,"../utils":32}],13:[function(o,u,a){var c=o("readable-stream").Readable;function f(p,h,g){c.call(this,h),this._helper=p;var _=this;p.on("data",function(C,T){_.push(C)||_._helper.pause(),g&&g(T)}).on("error",function(C){_.emit("error",C)}).on("end",function(){_.push(null)})}o("../utils").inherits(f,c),f.prototype._read=function(){this._helper.resume()},u.exports=f},{"../utils":32,"readable-stream":16}],14:[function(o,u,a){u.exports={isNode:typeof Buffer<"u",newBufferFrom:function(c,f){if(Buffer.from&&Buffer.from!==Uint8Array.from)return Buffer.from(c,f);if(typeof c=="number")throw new Error('The "data" argument must not be a number');return new Buffer(c,f)},allocBuffer:function(c){if(Buffer.alloc)return Buffer.alloc(c);var f=new Buffer(c);return f.fill(0),f},isBuffer:function(c){return Buffer.isBuffer(c)},isStream:function(c){return c&&typeof c.on=="function"&&typeof c.pause=="function"&&typeof c.resume=="function"}}},{}],15:[function(o,u,a){function c(M,K,Z){var ne,U=p.getTypeOf(K),Q=p.extend(Z||{},_);Q.date=Q.date||new Date,Q.compression!==null&&(Q.compression=Q.compression.toUpperCase()),typeof Q.unixPermissions=="string"&&(Q.unixPermissions=parseInt(Q.unixPermissions,8)),Q.unixPermissions&&16384&Q.unixPermissions&&(Q.dir=!0),Q.dosPermissions&&16&Q.dosPermissions&&(Q.dir=!0),Q.dir&&(M=j(M)),Q.createFolders&&(ne=x(M))&&O.call(this,ne,!0);var ce=U==="string"&&Q.binary===!1&&Q.base64===!1;Z&&Z.binary!==void 0||(Q.binary=!ce),(K instanceof C&&K.uncompressedSize===0||Q.dir||!K||K.length===0)&&(Q.base64=!1,Q.binary=!0,K="",Q.compression="STORE",U="string");var N=null;N=K instanceof C||K instanceof h?K:k.isNode&&k.isStream(K)?new y(M,K):p.prepareContent(M,K,Q.binary,Q.optimizedBinaryString,Q.base64);var L=new T(M,N,Q);this.files[M]=L}var f=o("./utf8"),p=o("./utils"),h=o("./stream/GenericWorker"),g=o("./stream/StreamHelper"),_=o("./defaults"),C=o("./compressedObject"),T=o("./zipObject"),w=o("./generate"),k=o("./nodejsUtils"),y=o("./nodejs/NodejsStreamInputAdapter"),x=function(M){M.slice(-1)==="/"&&(M=M.substring(0,M.length-1));var K=M.lastIndexOf("/");return 0<K?M.substring(0,K):""},j=function(M){return M.slice(-1)!=="/"&&(M+="/"),M},O=function(M,K){return K=K!==void 0?K:_.createFolders,M=j(M),this.files[M]||c.call(this,M,null,{dir:!0,createFolders:K}),this.files[M]};function R(M){return Object.prototype.toString.call(M)==="[object RegExp]"}var z={load:function(){throw new Error("This method has been removed in JSZip 3.0, please check the upgrade guide.")},forEach:function(M){var K,Z,ne;for(K in this.files)ne=this.files[K],(Z=K.slice(this.root.length,K.length))&&K.slice(0,this.root.length)===this.root&&M(Z,ne)},filter:function(M){var K=[];return this.forEach(function(Z,ne){M(Z,ne)&&K.push(ne)}),K},file:function(M,K,Z){if(arguments.length!==1)return M=this.root+M,c.call(this,M,K,Z),this;if(R(M)){var ne=M;return this.filter(function(Q,ce){return!ce.dir&&ne.test(Q)})}var U=this.files[this.root+M];return U&&!U.dir?U:null},folder:function(M){if(!M)return this;if(R(M))return this.filter(function(U,Q){return Q.dir&&M.test(U)});var K=this.root+M,Z=O.call(this,K),ne=this.clone();return ne.root=Z.name,ne},remove:function(M){M=this.root+M;var K=this.files[M];if(K||(M.slice(-1)!=="/"&&(M+="/"),K=this.files[M]),K&&!K.dir)delete this.files[M];else for(var Z=this.filter(function(U,Q){return Q.name.slice(0,M.length)===M}),ne=0;ne<Z.length;ne++)delete this.files[Z[ne].name];return this},generate:function(){throw new Error("This method has been removed in JSZip 3.0, please check the upgrade guide.")},generateInternalStream:function(M){var K,Z={};try{if((Z=p.extend(M||{},{streamFiles:!1,compression:"STORE",compressionOptions:null,type:"",platform:"DOS",comment:null,mimeType:"application/zip",encodeFileName:f.utf8encode})).type=Z.type.toLowerCase(),Z.compression=Z.compression.toUpperCase(),Z.type==="binarystring"&&(Z.type="string"),!Z.type)throw new Error("No output type specified.");p.checkSupport(Z.type),Z.platform!=="darwin"&&Z.platform!=="freebsd"&&Z.platform!=="linux"&&Z.platform!=="sunos"||(Z.platform="UNIX"),Z.platform==="win32"&&(Z.platform="DOS");var ne=Z.comment||this.comment||"";K=w.generateWorker(this,Z,ne)}catch(U){(K=new h("error")).error(U)}return new g(K,Z.type||"string",Z.mimeType)},generateAsync:function(M,K){return this.generateInternalStream(M).accumulate(K)},generateNodeStream:function(M,K){return(M=M||{}).type||(M.type="nodebuffer"),this.generateInternalStream(M).toNodejsStream(K)}};u.exports=z},{"./compressedObject":2,"./defaults":5,"./generate":9,"./nodejs/NodejsStreamInputAdapter":12,"./nodejsUtils":14,"./stream/GenericWorker":28,"./stream/StreamHelper":29,"./utf8":31,"./utils":32,"./zipObject":35}],16:[function(o,u,a){u.exports=o("stream")},{stream:void 0}],17:[function(o,u,a){var c=o("./DataReader");function f(p){c.call(this,p);for(var h=0;h<this.data.length;h++)p[h]=255&p[h]}o("../utils").inherits(f,c),f.prototype.byteAt=function(p){return this.data[this.zero+p]},f.prototype.lastIndexOfSignature=function(p){for(var h=p.charCodeAt(0),g=p.charCodeAt(1),_=p.charCodeAt(2),C=p.charCodeAt(3),T=this.length-4;0<=T;--T)if(this.data[T]===h&&this.data[T+1]===g&&this.data[T+2]===_&&this.data[T+3]===C)return T-this.zero;return-1},f.prototype.readAndCheckSignature=function(p){var h=p.charCodeAt(0),g=p.charCodeAt(1),_=p.charCodeAt(2),C=p.charCodeAt(3),T=this.readData(4);return h===T[0]&&g===T[1]&&_===T[2]&&C===T[3]},f.prototype.readData=function(p){if(this.checkOffset(p),p===0)return[];var h=this.data.slice(this.zero+this.index,this.zero+this.index+p);return this.index+=p,h},u.exports=f},{"../utils":32,"./DataReader":18}],18:[function(o,u,a){var c=o("../utils");function f(p){this.data=p,this.length=p.length,this.index=0,this.zero=0}f.prototype={checkOffset:function(p){this.checkIndex(this.index+p)},checkIndex:function(p){if(this.length<this.zero+p||p<0)throw new Error("End of data reached (data length = "+this.length+", asked index = "+p+"). Corrupted zip ?")},setIndex:function(p){this.checkIndex(p),this.index=p},skip:function(p){this.setIndex(this.index+p)},byteAt:function(){},readInt:function(p){var h,g=0;for(this.checkOffset(p),h=this.index+p-1;h>=this.index;h--)g=(g<<8)+this.byteAt(h);return this.index+=p,g},readString:function(p){return c.transformTo("string",this.readData(p))},readData:function(){},lastIndexOfSignature:function(){},readAndCheckSignature:function(){},readDate:function(){var p=this.readInt(4);return new Date(Date.UTC(1980+(p>>25&127),(p>>21&15)-1,p>>16&31,p>>11&31,p>>5&63,(31&p)<<1))}},u.exports=f},{"../utils":32}],19:[function(o,u,a){var c=o("./Uint8ArrayReader");function f(p){c.call(this,p)}o("../utils").inherits(f,c),f.prototype.readData=function(p){this.checkOffset(p);var h=this.data.slice(this.zero+this.index,this.zero+this.index+p);return this.index+=p,h},u.exports=f},{"../utils":32,"./Uint8ArrayReader":21}],20:[function(o,u,a){var c=o("./DataReader");function f(p){c.call(this,p)}o("../utils").inherits(f,c),f.prototype.byteAt=function(p){return this.data.charCodeAt(this.zero+p)},f.prototype.lastIndexOfSignature=function(p){return this.data.lastIndexOf(p)-this.zero},f.prototype.readAndCheckSignature=function(p){return p===this.readData(4)},f.prototype.readData=function(p){this.checkOffset(p);var h=this.data.slice(this.zero+this.index,this.zero+this.index+p);return this.index+=p,h},u.exports=f},{"../utils":32,"./DataReader":18}],21:[function(o,u,a){var c=o("./ArrayReader");function f(p){c.call(this,p)}o("../utils").inherits(f,c),f.prototype.readData=function(p){if(this.checkOffset(p),p===0)return new Uint8Array(0);var h=this.data.subarray(this.zero+this.index,this.zero+this.index+p);return this.index+=p,h},u.exports=f},{"../utils":32,"./ArrayReader":17}],22:[function(o,u,a){var c=o("../utils"),f=o("../support"),p=o("./ArrayReader"),h=o("./StringReader"),g=o("./NodeBufferReader"),_=o("./Uint8ArrayReader");u.exports=function(C){var T=c.getTypeOf(C);return c.checkSupport(T),T!=="string"||f.uint8array?T==="nodebuffer"?new g(C):f.uint8array?new _(c.transformTo("uint8array",C)):new p(c.transformTo("array",C)):new h(C)}},{"../support":30,"../utils":32,"./ArrayReader":17,"./NodeBufferReader":19,"./StringReader":20,"./Uint8ArrayReader":21}],23:[function(o,u,a){a.LOCAL_FILE_HEADER="PK",a.CENTRAL_FILE_HEADER="PK",a.CENTRAL_DIRECTORY_END="PK",a.ZIP64_CENTRAL_DIRECTORY_LOCATOR="PK\x07",a.ZIP64_CENTRAL_DIRECTORY_END="PK",a.DATA_DESCRIPTOR="PK\x07\b"},{}],24:[function(o,u,a){var c=o("./GenericWorker"),f=o("../utils");function p(h){c.call(this,"ConvertWorker to "+h),this.destType=h}f.inherits(p,c),p.prototype.processChunk=function(h){this.push({data:f.transformTo(this.destType,h.data),meta:h.meta})},u.exports=p},{"../utils":32,"./GenericWorker":28}],25:[function(o,u,a){var c=o("./GenericWorker"),f=o("../crc32");function p(){c.call(this,"Crc32Probe"),this.withStreamInfo("crc32",0)}o("../utils").inherits(p,c),p.prototype.processChunk=function(h){this.streamInfo.crc32=f(h.data,this.streamInfo.crc32||0),this.push(h)},u.exports=p},{"../crc32":4,"../utils":32,"./GenericWorker":28}],26:[function(o,u,a){var c=o("../utils"),f=o("./GenericWorker");function p(h){f.call(this,"DataLengthProbe for "+h),this.propName=h,this.withStreamInfo(h,0)}c.inherits(p,f),p.prototype.processChunk=function(h){if(h){var g=this.streamInfo[this.propName]||0;this.streamInfo[this.propName]=g+h.data.length}f.prototype.processChunk.call(this,h)},u.exports=p},{"../utils":32,"./GenericWorker":28}],27:[function(o,u,a){var c=o("../utils"),f=o("./GenericWorker");function p(h){f.call(this,"DataWorker");var g=this;this.dataIsReady=!1,this.index=0,this.max=0,this.data=null,this.type="",this._tickScheduled=!1,h.then(function(_){g.dataIsReady=!0,g.data=_,g.max=_&&_.length||0,g.type=c.getTypeOf(_),g.isPaused||g._tickAndRepeat()},function(_){g.error(_)})}c.inherits(p,f),p.prototype.cleanUp=function(){f.prototype.cleanUp.call(this),this.data=null},p.prototype.resume=function(){return!!f.prototype.resume.call(this)&&(!this._tickScheduled&&this.dataIsReady&&(this._tickScheduled=!0,c.delay(this._tickAndRepeat,[],this)),!0)},p.prototype._tickAndRepeat=function(){this._tickScheduled=!1,this.isPaused||this.isFinished||(this._tick(),this.isFinished||(c.delay(this._tickAndRepeat,[],this),this._tickScheduled=!0))},p.prototype._tick=function(){if(this.isPaused||this.isFinished)return!1;var h=null,g=Math.min(this.max,this.index+16384);if(this.index>=this.max)return this.end();switch(this.type){case"string":h=this.data.substring(this.index,g);break;case"uint8array":h=this.data.subarray(this.index,g);break;case"array":case"nodebuffer":h=this.data.slice(this.index,g)}return this.index=g,this.push({data:h,meta:{percent:this.max?this.index/this.max*100:0}})},u.exports=p},{"../utils":32,"./GenericWorker":28}],28:[function(o,u,a){function c(f){this.name=f||"default",this.streamInfo={},this.generatedError=null,this.extraStreamInfo={},this.isPaused=!0,this.isFinished=!1,this.isLocked=!1,this._listeners={data:[],end:[],error:[]},this.previous=null}c.prototype={push:function(f){this.emit("data",f)},end:function(){if(this.isFinished)return!1;this.flush();try{this.emit("end"),this.cleanUp(),this.isFinished=!0}catch(f){this.emit("error",f)}return!0},error:function(f){return!this.isFinished&&(this.isPaused?this.generatedError=f:(this.isFinished=!0,this.emit("error",f),this.previous&&this.previous.error(f),this.cleanUp()),!0)},on:function(f,p){return this._listeners[f].push(p),this},cleanUp:function(){this.streamInfo=this.generatedError=this.extraStreamInfo=null,this._listeners=[]},emit:function(f,p){if(this._listeners[f])for(var h=0;h<this._listeners[f].length;h++)this._listeners[f][h].call(this,p)},pipe:function(f){return f.registerPrevious(this)},registerPrevious:function(f){if(this.isLocked)throw new Error("The stream '"+this+"' has already been used.");this.streamInfo=f.streamInfo,this.mergeStreamInfo(),this.previous=f;var p=this;return f.on("data",function(h){p.processChunk(h)}),f.on("end",function(){p.end()}),f.on("error",function(h){p.error(h)}),this},pause:function(){return!this.isPaused&&!this.isFinished&&(this.isPaused=!0,this.previous&&this.previous.pause(),!0)},resume:function(){if(!this.isPaused||this.isFinished)return!1;var f=this.isPaused=!1;return this.generatedError&&(this.error(this.generatedError),f=!0),this.previous&&this.previous.resume(),!f},flush:function(){},processChunk:function(f){this.push(f)},withStreamInfo:function(f,p){return this.extraStreamInfo[f]=p,this.mergeStreamInfo(),this},mergeStreamInfo:function(){for(var f in this.extraStreamInfo)Object.prototype.hasOwnProperty.call(this.extraStreamInfo,f)&&(this.streamInfo[f]=this.extraStreamInfo[f])},lock:function(){if(this.isLocked)throw new Error("The stream '"+this+"' has already been used.");this.isLocked=!0,this.previous&&this.previous.lock()},toString:function(){var f="Worker "+this.name;return this.previous?this.previous+" -> "+f:f}},u.exports=c},{}],29:[function(o,u,a){var c=o("../utils"),f=o("./ConvertWorker"),p=o("./GenericWorker"),h=o("../base64"),g=o("../support"),_=o("../external"),C=null;if(g.nodestream)try{C=o("../nodejs/NodejsStreamOutputAdapter")}catch{}function T(k,y){return new _.Promise(function(x,j){var O=[],R=k._internalType,z=k._outputType,M=k._mimeType;k.on("data",function(K,Z){O.push(K),y&&y(Z)}).on("error",function(K){O=[],j(K)}).on("end",function(){try{var K=function(Z,ne,U){switch(Z){case"blob":return c.newBlob(c.transformTo("arraybuffer",ne),U);case"base64":return h.encode(ne);default:return c.transformTo(Z,ne)}}(z,function(Z,ne){var U,Q=0,ce=null,N=0;for(U=0;U<ne.length;U++)N+=ne[U].length;switch(Z){case"string":return ne.join("");case"array":return Array.prototype.concat.apply([],ne);case"uint8array":for(ce=new Uint8Array(N),U=0;U<ne.length;U++)ce.set(ne[U],Q),Q+=ne[U].length;return ce;case"nodebuffer":return Buffer.concat(ne);default:throw new Error("concat : unsupported type '"+Z+"'")}}(R,O),M);x(K)}catch(Z){j(Z)}O=[]}).resume()})}function w(k,y,x){var j=y;switch(y){case"blob":case"arraybuffer":j="uint8array";break;case"base64":j="string"}try{this._internalType=j,this._outputType=y,this._mimeType=x,c.checkSupport(j),this._worker=k.pipe(new f(j)),k.lock()}catch(O){this._worker=new p("error"),this._worker.error(O)}}w.prototype={accumulate:function(k){return T(this,k)},on:function(k,y){var x=this;return k==="data"?this._worker.on(k,function(j){y.call(x,j.data,j.meta)}):this._worker.on(k,function(){c.delay(y,arguments,x)}),this},resume:function(){return c.delay(this._worker.resume,[],this._worker),this},pause:function(){return this._worker.pause(),this},toNodejsStream:function(k){if(c.checkSupport("nodestream"),this._outputType!=="nodebuffer")throw new Error(this._outputType+" is not supported by this method");return new C(this,{objectMode:this._outputType!=="nodebuffer"},k)}},u.exports=w},{"../base64":1,"../external":6,"../nodejs/NodejsStreamOutputAdapter":13,"../support":30,"../utils":32,"./ConvertWorker":24,"./GenericWorker":28}],30:[function(o,u,a){if(a.base64=!0,a.array=!0,a.string=!0,a.arraybuffer=typeof ArrayBuffer<"u"&&typeof Uint8Array<"u",a.nodebuffer=typeof Buffer<"u",a.uint8array=typeof Uint8Array<"u",typeof ArrayBuffer>"u")a.blob=!1;else{var c=new ArrayBuffer(0);try{a.blob=new Blob([c],{type:"application/zip"}).size===0}catch{try{var f=new(self.BlobBuilder||self.WebKitBlobBuilder||self.MozBlobBuilder||self.MSBlobBuilder);f.append(c),a.blob=f.getBlob("application/zip").size===0}catch{a.blob=!1}}}try{a.nodestream=!!o("readable-stream").Readable}catch{a.nodestream=!1}},{"readable-stream":16}],31:[function(o,u,a){for(var c=o("./utils"),f=o("./support"),p=o("./nodejsUtils"),h=o("./stream/GenericWorker"),g=new Array(256),_=0;_<256;_++)g[_]=252<=_?6:248<=_?5:240<=_?4:224<=_?3:192<=_?2:1;g[254]=g[254]=1;function C(){h.call(this,"utf-8 decode"),this.leftOver=null}function T(){h.call(this,"utf-8 encode")}a.utf8encode=function(w){return f.nodebuffer?p.newBufferFrom(w,"utf-8"):function(k){var y,x,j,O,R,z=k.length,M=0;for(O=0;O<z;O++)(64512&(x=k.charCodeAt(O)))==55296&&O+1<z&&(64512&(j=k.charCodeAt(O+1)))==56320&&(x=65536+(x-55296<<10)+(j-56320),O++),M+=x<128?1:x<2048?2:x<65536?3:4;for(y=f.uint8array?new Uint8Array(M):new Array(M),O=R=0;R<M;O++)(64512&(x=k.charCodeAt(O)))==55296&&O+1<z&&(64512&(j=k.charCodeAt(O+1)))==56320&&(x=65536+(x-55296<<10)+(j-56320),O++),x<128?y[R++]=x:(x<2048?y[R++]=192|x>>>6:(x<65536?y[R++]=224|x>>>12:(y[R++]=240|x>>>18,y[R++]=128|x>>>12&63),y[R++]=128|x>>>6&63),y[R++]=128|63&x);return y}(w)},a.utf8decode=function(w){return f.nodebuffer?c.transformTo("nodebuffer",w).toString("utf-8"):function(k){var y,x,j,O,R=k.length,z=new Array(2*R);for(y=x=0;y<R;)if((j=k[y++])<128)z[x++]=j;else if(4<(O=g[j]))z[x++]=65533,y+=O-1;else{for(j&=O===2?31:O===3?15:7;1<O&&y<R;)j=j<<6|63&k[y++],O--;1<O?z[x++]=65533:j<65536?z[x++]=j:(j-=65536,z[x++]=55296|j>>10&1023,z[x++]=56320|1023&j)}return z.length!==x&&(z.subarray?z=z.subarray(0,x):z.length=x),c.applyFromCharCode(z)}(w=c.transformTo(f.uint8array?"uint8array":"array",w))},c.inherits(C,h),C.prototype.processChunk=function(w){var k=c.transformTo(f.uint8array?"uint8array":"array",w.data);if(this.leftOver&&this.leftOver.length){if(f.uint8array){var y=k;(k=new Uint8Array(y.length+this.leftOver.length)).set(this.leftOver,0),k.set(y,this.leftOver.length)}else k=this.leftOver.concat(k);this.leftOver=null}var x=function(O,R){var z;for((R=R||O.length)>O.length&&(R=O.length),z=R-1;0<=z&&(192&O[z])==128;)z--;return z<0||z===0?R:z+g[O[z]]>R?z:R}(k),j=k;x!==k.length&&(f.uint8array?(j=k.subarray(0,x),this.leftOver=k.subarray(x,k.length)):(j=k.slice(0,x),this.leftOver=k.slice(x,k.length))),this.push({data:a.utf8decode(j),meta:w.meta})},C.prototype.flush=function(){this.leftOver&&this.leftOver.length&&(this.push({data:a.utf8decode(this.leftOver),meta:{}}),this.leftOver=null)},a.Utf8DecodeWorker=C,c.inherits(T,h),T.prototype.processChunk=function(w){this.push({data:a.utf8encode(w.data),meta:w.meta})},a.Utf8EncodeWorker=T},{"./nodejsUtils":14,"./stream/GenericWorker":28,"./support":30,"./utils":32}],32:[function(o,u,a){var c=o("./support"),f=o("./base64"),p=o("./nodejsUtils"),h=o("./external");function g(y){return y}function _(y,x){for(var j=0;j<y.length;++j)x[j]=255&y.charCodeAt(j);return x}o("setimmediate"),a.newBlob=function(y,x){a.checkSupport("blob");try{return new Blob([y],{type:x})}catch{try{var j=new(self.BlobBuilder||self.WebKitBlobBuilder||self.MozBlobBuilder||self.MSBlobBuilder);return j.append(y),j.getBlob(x)}catch{throw new Error("Bug : can't construct the Blob.")}}};var C={stringifyByChunk:function(y,x,j){var O=[],R=0,z=y.length;if(z<=j)return String.fromCharCode.apply(null,y);for(;R<z;)x==="array"||x==="nodebuffer"?O.push(String.fromCharCode.apply(null,y.slice(R,Math.min(R+j,z)))):O.push(String.fromCharCode.apply(null,y.subarray(R,Math.min(R+j,z)))),R+=j;return O.join("")},stringifyByChar:function(y){for(var x="",j=0;j<y.length;j++)x+=String.fromCharCode(y[j]);return x},applyCanBeUsed:{uint8array:function(){try{return c.uint8array&&String.fromCharCode.apply(null,new Uint8Array(1)).length===1}catch{return!1}}(),nodebuffer:function(){try{return c.nodebuffer&&String.fromCharCode.apply(null,p.allocBuffer(1)).length===1}catch{return!1}}()}};function T(y){var x=65536,j=a.getTypeOf(y),O=!0;if(j==="uint8array"?O=C.applyCanBeUsed.uint8array:j==="nodebuffer"&&(O=C.applyCanBeUsed.nodebuffer),O)for(;1<x;)try{return C.stringifyByChunk(y,j,x)}catch{x=Math.floor(x/2)}return C.stringifyByChar(y)}function w(y,x){for(var j=0;j<y.length;j++)x[j]=y[j];return x}a.applyFromCharCode=T;var k={};k.string={string:g,array:function(y){return _(y,new Array(y.length))},arraybuffer:function(y){return k.string.uint8array(y).buffer},uint8array:function(y){return _(y,new Uint8Array(y.length))},nodebuffer:function(y){return _(y,p.allocBuffer(y.length))}},k.array={string:T,array:g,arraybuffer:function(y){return new Uint8Array(y).buffer},uint8array:function(y){return new Uint8Array(y)},nodebuffer:function(y){return p.newBufferFrom(y)}},k.arraybuffer={string:function(y){return T(new Uint8Array(y))},array:function(y){return w(new Uint8Array(y),new Array(y.byteLength))},arraybuffer:g,uint8array:function(y){return new Uint8Array(y)},nodebuffer:function(y){return p.newBufferFrom(new Uint8Array(y))}},k.uint8array={string:T,array:function(y){return w(y,new Array(y.length))},arraybuffer:function(y){return y.buffer},uint8array:g,nodebuffer:function(y){return p.newBufferFrom(y)}},k.nodebuffer={string:T,array:function(y){return w(y,new Array(y.length))},arraybuffer:function(y){return k.nodebuffer.uint8array(y).buffer},uint8array:function(y){return w(y,new Uint8Array(y.length))},nodebuffer:g},a.transformTo=function(y,x){if(x=x||"",!y)return x;a.checkSupport(y);var j=a.getTypeOf(x);return k[j][y](x)},a.resolve=function(y){for(var x=y.split("/"),j=[],O=0;O<x.length;O++){var R=x[O];R==="."||R===""&&O!==0&&O!==x.length-1||(R===".."?j.pop():j.push(R))}return j.join("/")},a.getTypeOf=function(y){return typeof y=="string"?"string":Object.prototype.toString.call(y)==="[object Array]"?"array":c.nodebuffer&&p.isBuffer(y)?"nodebuffer":c.uint8array&&y instanceof Uint8Array?"uint8array":c.arraybuffer&&y instanceof ArrayBuffer?"arraybuffer":void 0},a.checkSupport=function(y){if(!c[y.toLowerCase()])throw new Error(y+" is not supported by this platform")},a.MAX_VALUE_16BITS=65535,a.MAX_VALUE_32BITS=-1,a.pretty=function(y){var x,j,O="";for(j=0;j<(y||"").length;j++)O+="\\x"+((x=y.charCodeAt(j))<16?"0":"")+x.toString(16).toUpperCase();return O},a.delay=function(y,x,j){setImmediate(function(){y.apply(j||null,x||[])})},a.inherits=function(y,x){function j(){}j.prototype=x.prototype,y.prototype=new j},a.extend=function(){var y,x,j={};for(y=0;y<arguments.length;y++)for(x in arguments[y])Object.prototype.hasOwnProperty.call(arguments[y],x)&&j[x]===void 0&&(j[x]=arguments[y][x]);return j},a.prepareContent=function(y,x,j,O,R){return h.Promise.resolve(x).then(function(z){return c.blob&&(z instanceof Blob||["[object File]","[object Blob]"].indexOf(Object.prototype.toString.call(z))!==-1)&&typeof FileReader<"u"?new h.Promise(function(M,K){var Z=new FileReader;Z.onload=function(ne){M(ne.target.result)},Z.onerror=function(ne){K(ne.target.error)},Z.readAsArrayBuffer(z)}):z}).then(function(z){var M=a.getTypeOf(z);return M?(M==="arraybuffer"?z=a.transformTo("uint8array",z):M==="string"&&(R?z=f.decode(z):j&&O!==!0&&(z=function(K){return _(K,c.uint8array?new Uint8Array(K.length):new Array(K.length))}(z))),z):h.Promise.reject(new Error("Can't read the data of '"+y+"'. Is it in a supported JavaScript type (String, Blob, ArrayBuffer, etc) ?"))})}},{"./base64":1,"./external":6,"./nodejsUtils":14,"./support":30,setimmediate:54}],33:[function(o,u,a){var c=o("./reader/readerFor"),f=o("./utils"),p=o("./signature"),h=o("./zipEntry"),g=o("./support");function _(C){this.files=[],this.loadOptions=C}_.prototype={checkSignature:function(C){if(!this.reader.readAndCheckSignature(C)){this.reader.index-=4;var T=this.reader.readString(4);throw new Error("Corrupted zip or bug: unexpected signature ("+f.pretty(T)+", expected "+f.pretty(C)+")")}},isSignature:function(C,T){var w=this.reader.index;this.reader.setIndex(C);var k=this.reader.readString(4)===T;return this.reader.setIndex(w),k},readBlockEndOfCentral:function(){this.diskNumber=this.reader.readInt(2),this.diskWithCentralDirStart=this.reader.readInt(2),this.centralDirRecordsOnThisDisk=this.reader.readInt(2),this.centralDirRecords=this.reader.readInt(2),this.centralDirSize=this.reader.readInt(4),this.centralDirOffset=this.reader.readInt(4),this.zipCommentLength=this.reader.readInt(2);var C=this.reader.readData(this.zipCommentLength),T=g.uint8array?"uint8array":"array",w=f.transformTo(T,C);this.zipComment=this.loadOptions.decodeFileName(w)},readBlockZip64EndOfCentral:function(){this.zip64EndOfCentralSize=this.reader.readInt(8),this.reader.skip(4),this.diskNumber=this.reader.readInt(4),this.diskWithCentralDirStart=this.reader.readInt(4),this.centralDirRecordsOnThisDisk=this.reader.readInt(8),this.centralDirRecords=this.reader.readInt(8),this.centralDirSize=this.reader.readInt(8),this.centralDirOffset=this.reader.readInt(8),this.zip64ExtensibleData={};for(var C,T,w,k=this.zip64EndOfCentralSize-44;0<k;)C=this.reader.readInt(2),T=this.reader.readInt(4),w=this.reader.readData(T),this.zip64ExtensibleData[C]={id:C,length:T,value:w}},readBlockZip64EndOfCentralLocator:function(){if(this.diskWithZip64CentralDirStart=this.reader.readInt(4),this.relativeOffsetEndOfZip64CentralDir=this.reader.readInt(8),this.disksCount=this.reader.readInt(4),1<this.disksCount)throw new Error("Multi-volumes zip are not supported")},readLocalFiles:function(){var C,T;for(C=0;C<this.files.length;C++)T=this.files[C],this.reader.setIndex(T.localHeaderOffset),this.checkSignature(p.LOCAL_FILE_HEADER),T.readLocalPart(this.reader),T.handleUTF8(),T.processAttributes()},readCentralDir:function(){var C;for(this.reader.setIndex(this.centralDirOffset);this.reader.readAndCheckSignature(p.CENTRAL_FILE_HEADER);)(C=new h({zip64:this.zip64},this.loadOptions)).readCentralPart(this.reader),this.files.push(C);if(this.centralDirRecords!==this.files.length&&this.centralDirRecords!==0&&this.files.length===0)throw new Error("Corrupted zip or bug: expected "+this.centralDirRecords+" records in central dir, got "+this.files.length)},readEndOfCentral:function(){var C=this.reader.lastIndexOfSignature(p.CENTRAL_DIRECTORY_END);if(C<0)throw this.isSignature(0,p.LOCAL_FILE_HEADER)?new Error("Corrupted zip: can't find end of central directory"):new Error("Can't find end of central directory : is this a zip file ? If it is, see https://stuk.github.io/jszip/documentation/howto/read_zip.html");this.reader.setIndex(C);var T=C;if(this.checkSignature(p.CENTRAL_DIRECTORY_END),this.readBlockEndOfCentral(),this.diskNumber===f.MAX_VALUE_16BITS||this.diskWithCentralDirStart===f.MAX_VALUE_16BITS||this.centralDirRecordsOnThisDisk===f.MAX_VALUE_16BITS||this.centralDirRecords===f.MAX_VALUE_16BITS||this.centralDirSize===f.MAX_VALUE_32BITS||this.centralDirOffset===f.MAX_VALUE_32BITS){if(this.zip64=!0,(C=this.reader.lastIndexOfSignature(p.ZIP64_CENTRAL_DIRECTORY_LOCATOR))<0)throw new Error("Corrupted zip: can't find the ZIP64 end of central directory locator");if(this.reader.setIndex(C),this.checkSignature(p.ZIP64_CENTRAL_DIRECTORY_LOCATOR),this.readBlockZip64EndOfCentralLocator(),!this.isSignature(this.relativeOffsetEndOfZip64CentralDir,p.ZIP64_CENTRAL_DIRECTORY_END)&&(this.relativeOffsetEndOfZip64CentralDir=this.reader.lastIndexOfSignature(p.ZIP64_CENTRAL_DIRECTORY_END),this.relativeOffsetEndOfZip64CentralDir<0))throw new Error("Corrupted zip: can't find the ZIP64 end of central directory");this.reader.setIndex(this.relativeOffsetEndOfZip64CentralDir),this.checkSignature(p.ZIP64_CENTRAL_DIRECTORY_END),this.readBlockZip64EndOfCentral()}var w=this.centralDirOffset+this.centralDirSize;this.zip64&&(w+=20,w+=12+this.zip64EndOfCentralSize);var k=T-w;if(0<k)this.isSignature(T,p.CENTRAL_FILE_HEADER)||(this.reader.zero=k);else if(k<0)throw new Error("Corrupted zip: missing "+Math.abs(k)+" bytes.")},prepareReader:function(C){this.reader=c(C)},load:function(C){this.prepareReader(C),this.readEndOfCentral(),this.readCentralDir(),this.readLocalFiles()}},u.exports=_},{"./reader/readerFor":22,"./signature":23,"./support":30,"./utils":32,"./zipEntry":34}],34:[function(o,u,a){var c=o("./reader/readerFor"),f=o("./utils"),p=o("./compressedObject"),h=o("./crc32"),g=o("./utf8"),_=o("./compressions"),C=o("./support");function T(w,k){this.options=w,this.loadOptions=k}T.prototype={isEncrypted:function(){return(1&this.bitFlag)==1},useUTF8:function(){return(2048&this.bitFlag)==2048},readLocalPart:function(w){var k,y;if(w.skip(22),this.fileNameLength=w.readInt(2),y=w.readInt(2),this.fileName=w.readData(this.fileNameLength),w.skip(y),this.compressedSize===-1||this.uncompressedSize===-1)throw new Error("Bug or corrupted zip : didn't get enough information from the central directory (compressedSize === -1 || uncompressedSize === -1)");if((k=function(x){for(var j in _)if(Object.prototype.hasOwnProperty.call(_,j)&&_[j].magic===x)return _[j];return null}(this.compressionMethod))===null)throw new Error("Corrupted zip : compression "+f.pretty(this.compressionMethod)+" unknown (inner file : "+f.transformTo("string",this.fileName)+")");this.decompressed=new p(this.compressedSize,this.uncompressedSize,this.crc32,k,w.readData(this.compressedSize))},readCentralPart:function(w){this.versionMadeBy=w.readInt(2),w.skip(2),this.bitFlag=w.readInt(2),this.compressionMethod=w.readString(2),this.date=w.readDate(),this.crc32=w.readInt(4),this.compressedSize=w.readInt(4),this.uncompressedSize=w.readInt(4);var k=w.readInt(2);if(this.extraFieldsLength=w.readInt(2),this.fileCommentLength=w.readInt(2),this.diskNumberStart=w.readInt(2),this.internalFileAttributes=w.readInt(2),this.externalFileAttributes=w.readInt(4),this.localHeaderOffset=w.readInt(4),this.isEncrypted())throw new Error("Encrypted zip are not supported");w.skip(k),this.readExtraFields(w),this.parseZIP64ExtraField(w),this.fileComment=w.readData(this.fileCommentLength)},processAttributes:function(){this.unixPermissions=null,this.dosPermissions=null;var w=this.versionMadeBy>>8;this.dir=!!(16&this.externalFileAttributes),w==0&&(this.dosPermissions=63&this.externalFileAttributes),w==3&&(this.unixPermissions=this.externalFileAttributes>>16&65535),this.dir||this.fileNameStr.slice(-1)!=="/"||(this.dir=!0)},parseZIP64ExtraField:function(){if(this.extraFields[1]){var w=c(this.extraFields[1].value);this.uncompressedSize===f.MAX_VALUE_32BITS&&(this.uncompressedSize=w.readInt(8)),this.compressedSize===f.MAX_VALUE_32BITS&&(this.compressedSize=w.readInt(8)),this.localHeaderOffset===f.MAX_VALUE_32BITS&&(this.localHeaderOffset=w.readInt(8)),this.diskNumberStart===f.MAX_VALUE_32BITS&&(this.diskNumberStart=w.readInt(4))}},readExtraFields:function(w){var k,y,x,j=w.index+this.extraFieldsLength;for(this.extraFields||(this.extraFields={});w.index+4<j;)k=w.readInt(2),y=w.readInt(2),x=w.readData(y),this.extraFields[k]={id:k,length:y,value:x};w.setIndex(j)},handleUTF8:function(){var w=C.uint8array?"uint8array":"array";if(this.useUTF8())this.fileNameStr=g.utf8decode(this.fileName),this.fileCommentStr=g.utf8decode(this.fileComment);else{var k=this.findExtraFieldUnicodePath();if(k!==null)this.fileNameStr=k;else{var y=f.transformTo(w,this.fileName);this.fileNameStr=this.loadOptions.decodeFileName(y)}var x=this.findExtraFieldUnicodeComment();if(x!==null)this.fileCommentStr=x;else{var j=f.transformTo(w,this.fileComment);this.fileCommentStr=this.loadOptions.decodeFileName(j)}}},findExtraFieldUnicodePath:function(){var w=this.extraFields[28789];if(w){var k=c(w.value);return k.readInt(1)!==1||h(this.fileName)!==k.readInt(4)?null:g.utf8decode(k.readData(w.length-5))}return null},findExtraFieldUnicodeComment:function(){var w=this.extraFields[25461];if(w){var k=c(w.value);return k.readInt(1)!==1||h(this.fileComment)!==k.readInt(4)?null:g.utf8decode(k.readData(w.length-5))}return null}},u.exports=T},{"./compressedObject":2,"./compressions":3,"./crc32":4,"./reader/readerFor":22,"./support":30,"./utf8":31,"./utils":32}],35:[function(o,u,a){function c(k,y,x){this.name=k,this.dir=x.dir,this.date=x.date,this.comment=x.comment,this.unixPermissions=x.unixPermissions,this.dosPermissions=x.dosPermissions,this._data=y,this._dataBinary=x.binary,this.options={compression:x.compression,compressionOptions:x.compressionOptions}}var f=o("./stream/StreamHelper"),p=o("./stream/DataWorker"),h=o("./utf8"),g=o("./compressedObject"),_=o("./stream/GenericWorker");c.prototype={internalStream:function(k){var y=null,x="string";try{if(!k)throw new Error("No output type specified.");var j=(x=k.toLowerCase())==="string"||x==="text";x!=="binarystring"&&x!=="text"||(x="string"),y=this._decompressWorker();var O=!this._dataBinary;O&&!j&&(y=y.pipe(new h.Utf8EncodeWorker)),!O&&j&&(y=y.pipe(new h.Utf8DecodeWorker))}catch(R){(y=new _("error")).error(R)}return new f(y,x,"")},async:function(k,y){return this.internalStream(k).accumulate(y)},nodeStream:function(k,y){return this.internalStream(k||"nodebuffer").toNodejsStream(y)},_compressWorker:function(k,y){if(this._data instanceof g&&this._data.compression.magic===k.magic)return this._data.getCompressedWorker();var x=this._decompressWorker();return this._dataBinary||(x=x.pipe(new h.Utf8EncodeWorker)),g.createWorkerFrom(x,k,y)},_decompressWorker:function(){return this._data instanceof g?this._data.getContentWorker():this._data instanceof _?this._data:new p(this._data)}};for(var C=["asText","asBinary","asNodeBuffer","asUint8Array","asArrayBuffer"],T=function(){throw new Error("This method has been removed in JSZip 3.0, please check the upgrade guide.")},w=0;w<C.length;w++)c.prototype[C[w]]=T;u.exports=c},{"./compressedObject":2,"./stream/DataWorker":27,"./stream/GenericWorker":28,"./stream/StreamHelper":29,"./utf8":31}],36:[function(o,u,a){(function(c){var f,p,h=c.MutationObserver||c.WebKitMutationObserver;if(h){var g=0,_=new h(k),C=c.document.createTextNode("");_.observe(C,{characterData:!0}),f=function(){C.data=g=++g%2}}else if(c.setImmediate||c.MessageChannel===void 0)f="document"in c&&"onreadystatechange"in c.document.createElement("script")?function(){var y=c.document.createElement("script");y.onreadystatechange=function(){k(),y.onreadystatechange=null,y.parentNode.removeChild(y),y=null},c.document.documentElement.appendChild(y)}:function(){setTimeout(k,0)};else{var T=new c.MessageChannel;T.port1.onmessage=k,f=function(){T.port2.postMessage(0)}}var w=[];function k(){var y,x;p=!0;for(var j=w.length;j;){for(x=w,w=[],y=-1;++y<j;)x[y]();j=w.length}p=!1}u.exports=function(y){w.push(y)!==1||p||f()}}).call(this,typeof Tn<"u"?Tn:typeof self<"u"?self:typeof window<"u"?window:{})},{}],37:[function(o,u,a){var c=o("immediate");function f(){}var p={},h=["REJECTED"],g=["FULFILLED"],_=["PENDING"];function C(j){if(typeof j!="function")throw new TypeError("resolver must be a function");this.state=_,this.queue=[],this.outcome=void 0,j!==f&&y(this,j)}function T(j,O,R){this.promise=j,typeof O=="function"&&(this.onFulfilled=O,this.callFulfilled=this.otherCallFulfilled),typeof R=="function"&&(this.onRejected=R,this.callRejected=this.otherCallRejected)}function w(j,O,R){c(function(){var z;try{z=O(R)}catch(M){return p.reject(j,M)}z===j?p.reject(j,new TypeError("Cannot resolve promise with itself")):p.resolve(j,z)})}function k(j){var O=j&&j.then;if(j&&(typeof j=="object"||typeof j=="function")&&typeof O=="function")return function(){O.apply(j,arguments)}}function y(j,O){var R=!1;function z(Z){R||(R=!0,p.reject(j,Z))}function M(Z){R||(R=!0,p.resolve(j,Z))}var K=x(function(){O(M,z)});K.status==="error"&&z(K.value)}function x(j,O){var R={};try{R.value=j(O),R.status="success"}catch(z){R.status="error",R.value=z}return R}(u.exports=C).prototype.finally=function(j){if(typeof j!="function")return this;var O=this.constructor;return this.then(function(R){return O.resolve(j()).then(function(){return R})},function(R){return O.resolve(j()).then(function(){throw R})})},C.prototype.catch=function(j){return this.then(null,j)},C.prototype.then=function(j,O){if(typeof j!="function"&&this.state===g||typeof O!="function"&&this.state===h)return this;var R=new this.constructor(f);return this.state!==_?w(R,this.state===g?j:O,this.outcome):this.queue.push(new T(R,j,O)),R},T.prototype.callFulfilled=function(j){p.resolve(this.promise,j)},T.prototype.otherCallFulfilled=function(j){w(this.promise,this.onFulfilled,j)},T.prototype.callRejected=function(j){p.reject(this.promise,j)},T.prototype.otherCallRejected=function(j){w(this.promise,this.onRejected,j)},p.resolve=function(j,O){var R=x(k,O);if(R.status==="error")return p.reject(j,R.value);var z=R.value;if(z)y(j,z);else{j.state=g,j.outcome=O;for(var M=-1,K=j.queue.length;++M<K;)j.queue[M].callFulfilled(O)}return j},p.reject=function(j,O){j.state=h,j.outcome=O;for(var R=-1,z=j.queue.length;++R<z;)j.queue[R].callRejected(O);return j},C.resolve=function(j){return j instanceof this?j:p.resolve(new this(f),j)},C.reject=function(j){var O=new this(f);return p.reject(O,j)},C.all=function(j){var O=this;if(Object.prototype.toString.call(j)!=="[object Array]")return this.reject(new TypeError("must be an array"));var R=j.length,z=!1;if(!R)return this.resolve([]);for(var M=new Array(R),K=0,Z=-1,ne=new this(f);++Z<R;)U(j[Z],Z);return ne;function U(Q,ce){O.resolve(Q).then(function(N){M[ce]=N,++K!==R||z||(z=!0,p.resolve(ne,M))},function(N){z||(z=!0,p.reject(ne,N))})}},C.race=function(j){var O=this;if(Object.prototype.toString.call(j)!=="[object Array]")return this.reject(new TypeError("must be an array"));var R=j.length,z=!1;if(!R)return this.resolve([]);for(var M=-1,K=new this(f);++M<R;)Z=j[M],O.resolve(Z).then(function(ne){z||(z=!0,p.resolve(K,ne))},function(ne){z||(z=!0,p.reject(K,ne))});var Z;return K}},{immediate:36}],38:[function(o,u,a){var c={};(0,o("./lib/utils/common").assign)(c,o("./lib/deflate"),o("./lib/inflate"),o("./lib/zlib/constants")),u.exports=c},{"./lib/deflate":39,"./lib/inflate":40,"./lib/utils/common":41,"./lib/zlib/constants":44}],39:[function(o,u,a){var c=o("./zlib/deflate"),f=o("./utils/common"),p=o("./utils/strings"),h=o("./zlib/messages"),g=o("./zlib/zstream"),_=Object.prototype.toString,C=0,T=-1,w=0,k=8;function y(j){if(!(this instanceof y))return new y(j);this.options=f.assign({level:T,method:k,chunkSize:16384,windowBits:15,memLevel:8,strategy:w,to:""},j||{});var O=this.options;O.raw&&0<O.windowBits?O.windowBits=-O.windowBits:O.gzip&&0<O.windowBits&&O.windowBits<16&&(O.windowBits+=16),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new g,this.strm.avail_out=0;var R=c.deflateInit2(this.strm,O.level,O.method,O.windowBits,O.memLevel,O.strategy);if(R!==C)throw new Error(h[R]);if(O.header&&c.deflateSetHeader(this.strm,O.header),O.dictionary){var z;if(z=typeof O.dictionary=="string"?p.string2buf(O.dictionary):_.call(O.dictionary)==="[object ArrayBuffer]"?new Uint8Array(O.dictionary):O.dictionary,(R=c.deflateSetDictionary(this.strm,z))!==C)throw new Error(h[R]);this._dict_set=!0}}function x(j,O){var R=new y(O);if(R.push(j,!0),R.err)throw R.msg||h[R.err];return R.result}y.prototype.push=function(j,O){var R,z,M=this.strm,K=this.options.chunkSize;if(this.ended)return!1;z=O===~~O?O:O===!0?4:0,typeof j=="string"?M.input=p.string2buf(j):_.call(j)==="[object ArrayBuffer]"?M.input=new Uint8Array(j):M.input=j,M.next_in=0,M.avail_in=M.input.length;do{if(M.avail_out===0&&(M.output=new f.Buf8(K),M.next_out=0,M.avail_out=K),(R=c.deflate(M,z))!==1&&R!==C)return this.onEnd(R),!(this.ended=!0);M.avail_out!==0&&(M.avail_in!==0||z!==4&&z!==2)||(this.options.to==="string"?this.onData(p.buf2binstring(f.shrinkBuf(M.output,M.next_out))):this.onData(f.shrinkBuf(M.output,M.next_out)))}while((0<M.avail_in||M.avail_out===0)&&R!==1);return z===4?(R=c.deflateEnd(this.strm),this.onEnd(R),this.ended=!0,R===C):z!==2||(this.onEnd(C),!(M.avail_out=0))},y.prototype.onData=function(j){this.chunks.push(j)},y.prototype.onEnd=function(j){j===C&&(this.options.to==="string"?this.result=this.chunks.join(""):this.result=f.flattenChunks(this.chunks)),this.chunks=[],this.err=j,this.msg=this.strm.msg},a.Deflate=y,a.deflate=x,a.deflateRaw=function(j,O){return(O=O||{}).raw=!0,x(j,O)},a.gzip=function(j,O){return(O=O||{}).gzip=!0,x(j,O)}},{"./utils/common":41,"./utils/strings":42,"./zlib/deflate":46,"./zlib/messages":51,"./zlib/zstream":53}],40:[function(o,u,a){var c=o("./zlib/inflate"),f=o("./utils/common"),p=o("./utils/strings"),h=o("./zlib/constants"),g=o("./zlib/messages"),_=o("./zlib/zstream"),C=o("./zlib/gzheader"),T=Object.prototype.toString;function w(y){if(!(this instanceof w))return new w(y);this.options=f.assign({chunkSize:16384,windowBits:0,to:""},y||{});var x=this.options;x.raw&&0<=x.windowBits&&x.windowBits<16&&(x.windowBits=-x.windowBits,x.windowBits===0&&(x.windowBits=-15)),!(0<=x.windowBits&&x.windowBits<16)||y&&y.windowBits||(x.windowBits+=32),15<x.windowBits&&x.windowBits<48&&(15&x.windowBits)==0&&(x.windowBits|=15),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new _,this.strm.avail_out=0;var j=c.inflateInit2(this.strm,x.windowBits);if(j!==h.Z_OK)throw new Error(g[j]);this.header=new C,c.inflateGetHeader(this.strm,this.header)}function k(y,x){var j=new w(x);if(j.push(y,!0),j.err)throw j.msg||g[j.err];return j.result}w.prototype.push=function(y,x){var j,O,R,z,M,K,Z=this.strm,ne=this.options.chunkSize,U=this.options.dictionary,Q=!1;if(this.ended)return!1;O=x===~~x?x:x===!0?h.Z_FINISH:h.Z_NO_FLUSH,typeof y=="string"?Z.input=p.binstring2buf(y):T.call(y)==="[object ArrayBuffer]"?Z.input=new Uint8Array(y):Z.input=y,Z.next_in=0,Z.avail_in=Z.input.length;do{if(Z.avail_out===0&&(Z.output=new f.Buf8(ne),Z.next_out=0,Z.avail_out=ne),(j=c.inflate(Z,h.Z_NO_FLUSH))===h.Z_NEED_DICT&&U&&(K=typeof U=="string"?p.string2buf(U):T.call(U)==="[object ArrayBuffer]"?new Uint8Array(U):U,j=c.inflateSetDictionary(this.strm,K)),j===h.Z_BUF_ERROR&&Q===!0&&(j=h.Z_OK,Q=!1),j!==h.Z_STREAM_END&&j!==h.Z_OK)return this.onEnd(j),!(this.ended=!0);Z.next_out&&(Z.avail_out!==0&&j!==h.Z_STREAM_END&&(Z.avail_in!==0||O!==h.Z_FINISH&&O!==h.Z_SYNC_FLUSH)||(this.options.to==="string"?(R=p.utf8border(Z.output,Z.next_out),z=Z.next_out-R,M=p.buf2string(Z.output,R),Z.next_out=z,Z.avail_out=ne-z,z&&f.arraySet(Z.output,Z.output,R,z,0),this.onData(M)):this.onData(f.shrinkBuf(Z.output,Z.next_out)))),Z.avail_in===0&&Z.avail_out===0&&(Q=!0)}while((0<Z.avail_in||Z.avail_out===0)&&j!==h.Z_STREAM_END);return j===h.Z_STREAM_END&&(O=h.Z_FINISH),O===h.Z_FINISH?(j=c.inflateEnd(this.strm),this.onEnd(j),this.ended=!0,j===h.Z_OK):O!==h.Z_SYNC_FLUSH||(this.onEnd(h.Z_OK),!(Z.avail_out=0))},w.prototype.onData=function(y){this.chunks.push(y)},w.prototype.onEnd=function(y){y===h.Z_OK&&(this.options.to==="string"?this.result=this.chunks.join(""):this.result=f.flattenChunks(this.chunks)),this.chunks=[],this.err=y,this.msg=this.strm.msg},a.Inflate=w,a.inflate=k,a.inflateRaw=function(y,x){return(x=x||{}).raw=!0,k(y,x)},a.ungzip=k},{"./utils/common":41,"./utils/strings":42,"./zlib/constants":44,"./zlib/gzheader":47,"./zlib/inflate":49,"./zlib/messages":51,"./zlib/zstream":53}],41:[function(o,u,a){var c=typeof Uint8Array<"u"&&typeof Uint16Array<"u"&&typeof Int32Array<"u";a.assign=function(h){for(var g=Array.prototype.slice.call(arguments,1);g.length;){var _=g.shift();if(_){if(typeof _!="object")throw new TypeError(_+"must be non-object");for(var C in _)_.hasOwnProperty(C)&&(h[C]=_[C])}}return h},a.shrinkBuf=function(h,g){return h.length===g?h:h.subarray?h.subarray(0,g):(h.length=g,h)};var f={arraySet:function(h,g,_,C,T){if(g.subarray&&h.subarray)h.set(g.subarray(_,_+C),T);else for(var w=0;w<C;w++)h[T+w]=g[_+w]},flattenChunks:function(h){var g,_,C,T,w,k;for(g=C=0,_=h.length;g<_;g++)C+=h[g].length;for(k=new Uint8Array(C),g=T=0,_=h.length;g<_;g++)w=h[g],k.set(w,T),T+=w.length;return k}},p={arraySet:function(h,g,_,C,T){for(var w=0;w<C;w++)h[T+w]=g[_+w]},flattenChunks:function(h){return[].concat.apply([],h)}};a.setTyped=function(h){h?(a.Buf8=Uint8Array,a.Buf16=Uint16Array,a.Buf32=Int32Array,a.assign(a,f)):(a.Buf8=Array,a.Buf16=Array,a.Buf32=Array,a.assign(a,p))},a.setTyped(c)},{}],42:[function(o,u,a){var c=o("./common"),f=!0,p=!0;try{String.fromCharCode.apply(null,[0])}catch{f=!1}try{String.fromCharCode.apply(null,new Uint8Array(1))}catch{p=!1}for(var h=new c.Buf8(256),g=0;g<256;g++)h[g]=252<=g?6:248<=g?5:240<=g?4:224<=g?3:192<=g?2:1;function _(C,T){if(T<65537&&(C.subarray&&p||!C.subarray&&f))return String.fromCharCode.apply(null,c.shrinkBuf(C,T));for(var w="",k=0;k<T;k++)w+=String.fromCharCode(C[k]);return w}h[254]=h[254]=1,a.string2buf=function(C){var T,w,k,y,x,j=C.length,O=0;for(y=0;y<j;y++)(64512&(w=C.charCodeAt(y)))==55296&&y+1<j&&(64512&(k=C.charCodeAt(y+1)))==56320&&(w=65536+(w-55296<<10)+(k-56320),y++),O+=w<128?1:w<2048?2:w<65536?3:4;for(T=new c.Buf8(O),y=x=0;x<O;y++)(64512&(w=C.charCodeAt(y)))==55296&&y+1<j&&(64512&(k=C.charCodeAt(y+1)))==56320&&(w=65536+(w-55296<<10)+(k-56320),y++),w<128?T[x++]=w:(w<2048?T[x++]=192|w>>>6:(w<65536?T[x++]=224|w>>>12:(T[x++]=240|w>>>18,T[x++]=128|w>>>12&63),T[x++]=128|w>>>6&63),T[x++]=128|63&w);return T},a.buf2binstring=function(C){return _(C,C.length)},a.binstring2buf=function(C){for(var T=new c.Buf8(C.length),w=0,k=T.length;w<k;w++)T[w]=C.charCodeAt(w);return T},a.buf2string=function(C,T){var w,k,y,x,j=T||C.length,O=new Array(2*j);for(w=k=0;w<j;)if((y=C[w++])<128)O[k++]=y;else if(4<(x=h[y]))O[k++]=65533,w+=x-1;else{for(y&=x===2?31:x===3?15:7;1<x&&w<j;)y=y<<6|63&C[w++],x--;1<x?O[k++]=65533:y<65536?O[k++]=y:(y-=65536,O[k++]=55296|y>>10&1023,O[k++]=56320|1023&y)}return _(O,k)},a.utf8border=function(C,T){var w;for((T=T||C.length)>C.length&&(T=C.length),w=T-1;0<=w&&(192&C[w])==128;)w--;return w<0||w===0?T:w+h[C[w]]>T?w:T}},{"./common":41}],43:[function(o,u,a){u.exports=function(c,f,p,h){for(var g=65535&c|0,_=c>>>16&65535|0,C=0;p!==0;){for(p-=C=2e3<p?2e3:p;_=_+(g=g+f[h++]|0)|0,--C;);g%=65521,_%=65521}return g|_<<16|0}},{}],44:[function(o,u,a){u.exports={Z_NO_FLUSH:0,Z_PARTIAL_FLUSH:1,Z_SYNC_FLUSH:2,Z_FULL_FLUSH:3,Z_FINISH:4,Z_BLOCK:5,Z_TREES:6,Z_OK:0,Z_STREAM_END:1,Z_NEED_DICT:2,Z_ERRNO:-1,Z_STREAM_ERROR:-2,Z_DATA_ERROR:-3,Z_BUF_ERROR:-5,Z_NO_COMPRESSION:0,Z_BEST_SPEED:1,Z_BEST_COMPRESSION:9,Z_DEFAULT_COMPRESSION:-1,Z_FILTERED:1,Z_HUFFMAN_ONLY:2,Z_RLE:3,Z_FIXED:4,Z_DEFAULT_STRATEGY:0,Z_BINARY:0,Z_TEXT:1,Z_UNKNOWN:2,Z_DEFLATED:8}},{}],45:[function(o,u,a){var c=function(){for(var f,p=[],h=0;h<256;h++){f=h;for(var g=0;g<8;g++)f=1&f?3988292384^f>>>1:f>>>1;p[h]=f}return p}();u.exports=function(f,p,h,g){var _=c,C=g+h;f^=-1;for(var T=g;T<C;T++)f=f>>>8^_[255&(f^p[T])];return-1^f}},{}],46:[function(o,u,a){var c,f=o("../utils/common"),p=o("./trees"),h=o("./adler32"),g=o("./crc32"),_=o("./messages"),C=0,T=4,w=0,k=-2,y=-1,x=4,j=2,O=8,R=9,z=286,M=30,K=19,Z=2*z+1,ne=15,U=3,Q=258,ce=Q+U+1,N=42,L=113,b=1,G=2,ye=3,ee=4;function te(v,ie){return v.msg=_[ie],ie}function H(v){return(v<<1)-(4<v?9:0)}function J(v){for(var ie=v.length;0<=--ie;)v[ie]=0}function E(v){var ie=v.state,X=ie.pending;X>v.avail_out&&(X=v.avail_out),X!==0&&(f.arraySet(v.output,ie.pending_buf,ie.pending_out,X,v.next_out),v.next_out+=X,ie.pending_out+=X,v.total_out+=X,v.avail_out-=X,ie.pending-=X,ie.pending===0&&(ie.pending_out=0))}function P(v,ie){p._tr_flush_block(v,0<=v.block_start?v.block_start:-1,v.strstart-v.block_start,ie),v.block_start=v.strstart,E(v.strm)}function pe(v,ie){v.pending_buf[v.pending++]=ie}function se(v,ie){v.pending_buf[v.pending++]=ie>>>8&255,v.pending_buf[v.pending++]=255&ie}function re(v,ie){var X,$,I=v.max_chain_length,B=v.strstart,oe=v.prev_length,ae=v.nice_match,V=v.strstart>v.w_size-ce?v.strstart-(v.w_size-ce):0,he=v.window,_e=v.w_mask,ge=v.prev,je=v.strstart+Q,ze=he[B+oe-1],Re=he[B+oe];v.prev_length>=v.good_match&&(I>>=2),ae>v.lookahead&&(ae=v.lookahead);do if(he[(X=ie)+oe]===Re&&he[X+oe-1]===ze&&he[X]===he[B]&&he[++X]===he[B+1]){B+=2,X++;do;while(he[++B]===he[++X]&&he[++B]===he[++X]&&he[++B]===he[++X]&&he[++B]===he[++X]&&he[++B]===he[++X]&&he[++B]===he[++X]&&he[++B]===he[++X]&&he[++B]===he[++X]&&B<je);if($=Q-(je-B),B=je-Q,oe<$){if(v.match_start=ie,ae<=(oe=$))break;ze=he[B+oe-1],Re=he[B+oe]}}while((ie=ge[ie&_e])>V&&--I!=0);return oe<=v.lookahead?oe:v.lookahead}function Te(v){var ie,X,$,I,B,oe,ae,V,he,_e,ge=v.w_size;do{if(I=v.window_size-v.lookahead-v.strstart,v.strstart>=ge+(ge-ce)){for(f.arraySet(v.window,v.window,ge,ge,0),v.match_start-=ge,v.strstart-=ge,v.block_start-=ge,ie=X=v.hash_size;$=v.head[--ie],v.head[ie]=ge<=$?$-ge:0,--X;);for(ie=X=ge;$=v.prev[--ie],v.prev[ie]=ge<=$?$-ge:0,--X;);I+=ge}if(v.strm.avail_in===0)break;if(oe=v.strm,ae=v.window,V=v.strstart+v.lookahead,he=I,_e=void 0,_e=oe.avail_in,he<_e&&(_e=he),X=_e===0?0:(oe.avail_in-=_e,f.arraySet(ae,oe.input,oe.next_in,_e,V),oe.state.wrap===1?oe.adler=h(oe.adler,ae,_e,V):oe.state.wrap===2&&(oe.adler=g(oe.adler,ae,_e,V)),oe.next_in+=_e,oe.total_in+=_e,_e),v.lookahead+=X,v.lookahead+v.insert>=U)for(B=v.strstart-v.insert,v.ins_h=v.window[B],v.ins_h=(v.ins_h<<v.hash_shift^v.window[B+1])&v.hash_mask;v.insert&&(v.ins_h=(v.ins_h<<v.hash_shift^v.window[B+U-1])&v.hash_mask,v.prev[B&v.w_mask]=v.head[v.ins_h],v.head[v.ins_h]=B,B++,v.insert--,!(v.lookahead+v.insert<U)););}while(v.lookahead<ce&&v.strm.avail_in!==0)}function Pe(v,ie){for(var X,$;;){if(v.lookahead<ce){if(Te(v),v.lookahead<ce&&ie===C)return b;if(v.lookahead===0)break}if(X=0,v.lookahead>=U&&(v.ins_h=(v.ins_h<<v.hash_shift^v.window[v.strstart+U-1])&v.hash_mask,X=v.prev[v.strstart&v.w_mask]=v.head[v.ins_h],v.head[v.ins_h]=v.strstart),X!==0&&v.strstart-X<=v.w_size-ce&&(v.match_length=re(v,X)),v.match_length>=U)if($=p._tr_tally(v,v.strstart-v.match_start,v.match_length-U),v.lookahead-=v.match_length,v.match_length<=v.max_lazy_match&&v.lookahead>=U){for(v.match_length--;v.strstart++,v.ins_h=(v.ins_h<<v.hash_shift^v.window[v.strstart+U-1])&v.hash_mask,X=v.prev[v.strstart&v.w_mask]=v.head[v.ins_h],v.head[v.ins_h]=v.strstart,--v.match_length!=0;);v.strstart++}else v.strstart+=v.match_length,v.match_length=0,v.ins_h=v.window[v.strstart],v.ins_h=(v.ins_h<<v.hash_shift^v.window[v.strstart+1])&v.hash_mask;else $=p._tr_tally(v,0,v.window[v.strstart]),v.lookahead--,v.strstart++;if($&&(P(v,!1),v.strm.avail_out===0))return b}return v.insert=v.strstart<U-1?v.strstart:U-1,ie===T?(P(v,!0),v.strm.avail_out===0?ye:ee):v.last_lit&&(P(v,!1),v.strm.avail_out===0)?b:G}function be(v,ie){for(var X,$,I;;){if(v.lookahead<ce){if(Te(v),v.lookahead<ce&&ie===C)return b;if(v.lookahead===0)break}if(X=0,v.lookahead>=U&&(v.ins_h=(v.ins_h<<v.hash_shift^v.window[v.strstart+U-1])&v.hash_mask,X=v.prev[v.strstart&v.w_mask]=v.head[v.ins_h],v.head[v.ins_h]=v.strstart),v.prev_length=v.match_length,v.prev_match=v.match_start,v.match_length=U-1,X!==0&&v.prev_length<v.max_lazy_match&&v.strstart-X<=v.w_size-ce&&(v.match_length=re(v,X),v.match_length<=5&&(v.strategy===1||v.match_length===U&&4096<v.strstart-v.match_start)&&(v.match_length=U-1)),v.prev_length>=U&&v.match_length<=v.prev_length){for(I=v.strstart+v.lookahead-U,$=p._tr_tally(v,v.strstart-1-v.prev_match,v.prev_length-U),v.lookahead-=v.prev_length-1,v.prev_length-=2;++v.strstart<=I&&(v.ins_h=(v.ins_h<<v.hash_shift^v.window[v.strstart+U-1])&v.hash_mask,X=v.prev[v.strstart&v.w_mask]=v.head[v.ins_h],v.head[v.ins_h]=v.strstart),--v.prev_length!=0;);if(v.match_available=0,v.match_length=U-1,v.strstart++,$&&(P(v,!1),v.strm.avail_out===0))return b}else if(v.match_available){if(($=p._tr_tally(v,0,v.window[v.strstart-1]))&&P(v,!1),v.strstart++,v.lookahead--,v.strm.avail_out===0)return b}else v.match_available=1,v.strstart++,v.lookahead--}return v.match_available&&($=p._tr_tally(v,0,v.window[v.strstart-1]),v.match_available=0),v.insert=v.strstart<U-1?v.strstart:U-1,ie===T?(P(v,!0),v.strm.avail_out===0?ye:ee):v.last_lit&&(P(v,!1),v.strm.avail_out===0)?b:G}function Ce(v,ie,X,$,I){this.good_length=v,this.max_lazy=ie,this.nice_length=X,this.max_chain=$,this.func=I}function Ae(){this.strm=null,this.status=0,this.pending_buf=null,this.pending_buf_size=0,this.pending_out=0,this.pending=0,this.wrap=0,this.gzhead=null,this.gzindex=0,this.method=O,this.last_flush=-1,this.w_size=0,this.w_bits=0,this.w_mask=0,this.window=null,this.window_size=0,this.prev=null,this.head=null,this.ins_h=0,this.hash_size=0,this.hash_bits=0,this.hash_mask=0,this.hash_shift=0,this.block_start=0,this.match_length=0,this.prev_match=0,this.match_available=0,this.strstart=0,this.match_start=0,this.lookahead=0,this.prev_length=0,this.max_chain_length=0,this.max_lazy_match=0,this.level=0,this.strategy=0,this.good_match=0,this.nice_match=0,this.dyn_ltree=new f.Buf16(2*Z),this.dyn_dtree=new f.Buf16(2*(2*M+1)),this.bl_tree=new f.Buf16(2*(2*K+1)),J(this.dyn_ltree),J(this.dyn_dtree),J(this.bl_tree),this.l_desc=null,this.d_desc=null,this.bl_desc=null,this.bl_count=new f.Buf16(ne+1),this.heap=new f.Buf16(2*z+1),J(this.heap),this.heap_len=0,this.heap_max=0,this.depth=new f.Buf16(2*z+1),J(this.depth),this.l_buf=0,this.lit_bufsize=0,this.last_lit=0,this.d_buf=0,this.opt_len=0,this.static_len=0,this.matches=0,this.insert=0,this.bi_buf=0,this.bi_valid=0}function Me(v){var ie;return v&&v.state?(v.total_in=v.total_out=0,v.data_type=j,(ie=v.state).pending=0,ie.pending_out=0,ie.wrap<0&&(ie.wrap=-ie.wrap),ie.status=ie.wrap?N:L,v.adler=ie.wrap===2?0:1,ie.last_flush=C,p._tr_init(ie),w):te(v,k)}function xt(v){var ie=Me(v);return ie===w&&function(X){X.window_size=2*X.w_size,J(X.head),X.max_lazy_match=c[X.level].max_lazy,X.good_match=c[X.level].good_length,X.nice_match=c[X.level].nice_length,X.max_chain_length=c[X.level].max_chain,X.strstart=0,X.block_start=0,X.lookahead=0,X.insert=0,X.match_length=X.prev_length=U-1,X.match_available=0,X.ins_h=0}(v.state),ie}function st(v,ie,X,$,I,B){if(!v)return k;var oe=1;if(ie===y&&(ie=6),$<0?(oe=0,$=-$):15<$&&(oe=2,$-=16),I<1||R<I||X!==O||$<8||15<$||ie<0||9<ie||B<0||x<B)return te(v,k);$===8&&($=9);var ae=new Ae;return(v.state=ae).strm=v,ae.wrap=oe,ae.gzhead=null,ae.w_bits=$,ae.w_size=1<<ae.w_bits,ae.w_mask=ae.w_size-1,ae.hash_bits=I+7,ae.hash_size=1<<ae.hash_bits,ae.hash_mask=ae.hash_size-1,ae.hash_shift=~~((ae.hash_bits+U-1)/U),ae.window=new f.Buf8(2*ae.w_size),ae.head=new f.Buf16(ae.hash_size),ae.prev=new f.Buf16(ae.w_size),ae.lit_bufsize=1<<I+6,ae.pending_buf_size=4*ae.lit_bufsize,ae.pending_buf=new f.Buf8(ae.pending_buf_size),ae.d_buf=1*ae.lit_bufsize,ae.l_buf=3*ae.lit_bufsize,ae.level=ie,ae.strategy=B,ae.method=X,xt(v)}c=[new Ce(0,0,0,0,function(v,ie){var X=65535;for(X>v.pending_buf_size-5&&(X=v.pending_buf_size-5);;){if(v.lookahead<=1){if(Te(v),v.lookahead===0&&ie===C)return b;if(v.lookahead===0)break}v.strstart+=v.lookahead,v.lookahead=0;var $=v.block_start+X;if((v.strstart===0||v.strstart>=$)&&(v.lookahead=v.strstart-$,v.strstart=$,P(v,!1),v.strm.avail_out===0)||v.strstart-v.block_start>=v.w_size-ce&&(P(v,!1),v.strm.avail_out===0))return b}return v.insert=0,ie===T?(P(v,!0),v.strm.avail_out===0?ye:ee):(v.strstart>v.block_start&&(P(v,!1),v.strm.avail_out),b)}),new Ce(4,4,8,4,Pe),new Ce(4,5,16,8,Pe),new Ce(4,6,32,32,Pe),new Ce(4,4,16,16,be),new Ce(8,16,32,32,be),new Ce(8,16,128,128,be),new Ce(8,32,128,256,be),new Ce(32,128,258,1024,be),new Ce(32,258,258,4096,be)],a.deflateInit=function(v,ie){return st(v,ie,O,15,8,0)},a.deflateInit2=st,a.deflateReset=xt,a.deflateResetKeep=Me,a.deflateSetHeader=function(v,ie){return v&&v.state?v.state.wrap!==2?k:(v.state.gzhead=ie,w):k},a.deflate=function(v,ie){var X,$,I,B;if(!v||!v.state||5<ie||ie<0)return v?te(v,k):k;if($=v.state,!v.output||!v.input&&v.avail_in!==0||$.status===666&&ie!==T)return te(v,v.avail_out===0?-5:k);if($.strm=v,X=$.last_flush,$.last_flush=ie,$.status===N)if($.wrap===2)v.adler=0,pe($,31),pe($,139),pe($,8),$.gzhead?(pe($,($.gzhead.text?1:0)+($.gzhead.hcrc?2:0)+($.gzhead.extra?4:0)+($.gzhead.name?8:0)+($.gzhead.comment?16:0)),pe($,255&$.gzhead.time),pe($,$.gzhead.time>>8&255),pe($,$.gzhead.time>>16&255),pe($,$.gzhead.time>>24&255),pe($,$.level===9?2:2<=$.strategy||$.level<2?4:0),pe($,255&$.gzhead.os),$.gzhead.extra&&$.gzhead.extra.length&&(pe($,255&$.gzhead.extra.length),pe($,$.gzhead.extra.length>>8&255)),$.gzhead.hcrc&&(v.adler=g(v.adler,$.pending_buf,$.pending,0)),$.gzindex=0,$.status=69):(pe($,0),pe($,0),pe($,0),pe($,0),pe($,0),pe($,$.level===9?2:2<=$.strategy||$.level<2?4:0),pe($,3),$.status=L);else{var oe=O+($.w_bits-8<<4)<<8;oe|=(2<=$.strategy||$.level<2?0:$.level<6?1:$.level===6?2:3)<<6,$.strstart!==0&&(oe|=32),oe+=31-oe%31,$.status=L,se($,oe),$.strstart!==0&&(se($,v.adler>>>16),se($,65535&v.adler)),v.adler=1}if($.status===69)if($.gzhead.extra){for(I=$.pending;$.gzindex<(65535&$.gzhead.extra.length)&&($.pending!==$.pending_buf_size||($.gzhead.hcrc&&$.pending>I&&(v.adler=g(v.adler,$.pending_buf,$.pending-I,I)),E(v),I=$.pending,$.pending!==$.pending_buf_size));)pe($,255&$.gzhead.extra[$.gzindex]),$.gzindex++;$.gzhead.hcrc&&$.pending>I&&(v.adler=g(v.adler,$.pending_buf,$.pending-I,I)),$.gzindex===$.gzhead.extra.length&&($.gzindex=0,$.status=73)}else $.status=73;if($.status===73)if($.gzhead.name){I=$.pending;do{if($.pending===$.pending_buf_size&&($.gzhead.hcrc&&$.pending>I&&(v.adler=g(v.adler,$.pending_buf,$.pending-I,I)),E(v),I=$.pending,$.pending===$.pending_buf_size)){B=1;break}B=$.gzindex<$.gzhead.name.length?255&$.gzhead.name.charCodeAt($.gzindex++):0,pe($,B)}while(B!==0);$.gzhead.hcrc&&$.pending>I&&(v.adler=g(v.adler,$.pending_buf,$.pending-I,I)),B===0&&($.gzindex=0,$.status=91)}else $.status=91;if($.status===91)if($.gzhead.comment){I=$.pending;do{if($.pending===$.pending_buf_size&&($.gzhead.hcrc&&$.pending>I&&(v.adler=g(v.adler,$.pending_buf,$.pending-I,I)),E(v),I=$.pending,$.pending===$.pending_buf_size)){B=1;break}B=$.gzindex<$.gzhead.comment.length?255&$.gzhead.comment.charCodeAt($.gzindex++):0,pe($,B)}while(B!==0);$.gzhead.hcrc&&$.pending>I&&(v.adler=g(v.adler,$.pending_buf,$.pending-I,I)),B===0&&($.status=103)}else $.status=103;if($.status===103&&($.gzhead.hcrc?($.pending+2>$.pending_buf_size&&E(v),$.pending+2<=$.pending_buf_size&&(pe($,255&v.adler),pe($,v.adler>>8&255),v.adler=0,$.status=L)):$.status=L),$.pending!==0){if(E(v),v.avail_out===0)return $.last_flush=-1,w}else if(v.avail_in===0&&H(ie)<=H(X)&&ie!==T)return te(v,-5);if($.status===666&&v.avail_in!==0)return te(v,-5);if(v.avail_in!==0||$.lookahead!==0||ie!==C&&$.status!==666){var ae=$.strategy===2?function(V,he){for(var _e;;){if(V.lookahead===0&&(Te(V),V.lookahead===0)){if(he===C)return b;break}if(V.match_length=0,_e=p._tr_tally(V,0,V.window[V.strstart]),V.lookahead--,V.strstart++,_e&&(P(V,!1),V.strm.avail_out===0))return b}return V.insert=0,he===T?(P(V,!0),V.strm.avail_out===0?ye:ee):V.last_lit&&(P(V,!1),V.strm.avail_out===0)?b:G}($,ie):$.strategy===3?function(V,he){for(var _e,ge,je,ze,Re=V.window;;){if(V.lookahead<=Q){if(Te(V),V.lookahead<=Q&&he===C)return b;if(V.lookahead===0)break}if(V.match_length=0,V.lookahead>=U&&0<V.strstart&&(ge=Re[je=V.strstart-1])===Re[++je]&&ge===Re[++je]&&ge===Re[++je]){ze=V.strstart+Q;do;while(ge===Re[++je]&&ge===Re[++je]&&ge===Re[++je]&&ge===Re[++je]&&ge===Re[++je]&&ge===Re[++je]&&ge===Re[++je]&&ge===Re[++je]&&je<ze);V.match_length=Q-(ze-je),V.match_length>V.lookahead&&(V.match_length=V.lookahead)}if(V.match_length>=U?(_e=p._tr_tally(V,1,V.match_length-U),V.lookahead-=V.match_length,V.strstart+=V.match_length,V.match_length=0):(_e=p._tr_tally(V,0,V.window[V.strstart]),V.lookahead--,V.strstart++),_e&&(P(V,!1),V.strm.avail_out===0))return b}return V.insert=0,he===T?(P(V,!0),V.strm.avail_out===0?ye:ee):V.last_lit&&(P(V,!1),V.strm.avail_out===0)?b:G}($,ie):c[$.level].func($,ie);if(ae!==ye&&ae!==ee||($.status=666),ae===b||ae===ye)return v.avail_out===0&&($.last_flush=-1),w;if(ae===G&&(ie===1?p._tr_align($):ie!==5&&(p._tr_stored_block($,0,0,!1),ie===3&&(J($.head),$.lookahead===0&&($.strstart=0,$.block_start=0,$.insert=0))),E(v),v.avail_out===0))return $.last_flush=-1,w}return ie!==T?w:$.wrap<=0?1:($.wrap===2?(pe($,255&v.adler),pe($,v.adler>>8&255),pe($,v.adler>>16&255),pe($,v.adler>>24&255),pe($,255&v.total_in),pe($,v.total_in>>8&255),pe($,v.total_in>>16&255),pe($,v.total_in>>24&255)):(se($,v.adler>>>16),se($,65535&v.adler)),E(v),0<$.wrap&&($.wrap=-$.wrap),$.pending!==0?w:1)},a.deflateEnd=function(v){var ie;return v&&v.state?(ie=v.state.status)!==N&&ie!==69&&ie!==73&&ie!==91&&ie!==103&&ie!==L&&ie!==666?te(v,k):(v.state=null,ie===L?te(v,-3):w):k},a.deflateSetDictionary=function(v,ie){var X,$,I,B,oe,ae,V,he,_e=ie.length;if(!v||!v.state||(B=(X=v.state).wrap)===2||B===1&&X.status!==N||X.lookahead)return k;for(B===1&&(v.adler=h(v.adler,ie,_e,0)),X.wrap=0,_e>=X.w_size&&(B===0&&(J(X.head),X.strstart=0,X.block_start=0,X.insert=0),he=new f.Buf8(X.w_size),f.arraySet(he,ie,_e-X.w_size,X.w_size,0),ie=he,_e=X.w_size),oe=v.avail_in,ae=v.next_in,V=v.input,v.avail_in=_e,v.next_in=0,v.input=ie,Te(X);X.lookahead>=U;){for($=X.strstart,I=X.lookahead-(U-1);X.ins_h=(X.ins_h<<X.hash_shift^X.window[$+U-1])&X.hash_mask,X.prev[$&X.w_mask]=X.head[X.ins_h],X.head[X.ins_h]=$,$++,--I;);X.strstart=$,X.lookahead=U-1,Te(X)}return X.strstart+=X.lookahead,X.block_start=X.strstart,X.insert=X.lookahead,X.lookahead=0,X.match_length=X.prev_length=U-1,X.match_available=0,v.next_in=ae,v.input=V,v.avail_in=oe,X.wrap=B,w},a.deflateInfo="pako deflate (from Nodeca project)"},{"../utils/common":41,"./adler32":43,"./crc32":45,"./messages":51,"./trees":52}],47:[function(o,u,a){u.exports=function(){this.text=0,this.time=0,this.xflags=0,this.os=0,this.extra=null,this.extra_len=0,this.name="",this.comment="",this.hcrc=0,this.done=!1}},{}],48:[function(o,u,a){u.exports=function(c,f){var p,h,g,_,C,T,w,k,y,x,j,O,R,z,M,K,Z,ne,U,Q,ce,N,L,b,G;p=c.state,h=c.next_in,b=c.input,g=h+(c.avail_in-5),_=c.next_out,G=c.output,C=_-(f-c.avail_out),T=_+(c.avail_out-257),w=p.dmax,k=p.wsize,y=p.whave,x=p.wnext,j=p.window,O=p.hold,R=p.bits,z=p.lencode,M=p.distcode,K=(1<<p.lenbits)-1,Z=(1<<p.distbits)-1;e:do{R<15&&(O+=b[h++]<<R,R+=8,O+=b[h++]<<R,R+=8),ne=z[O&K];t:for(;;){if(O>>>=U=ne>>>24,R-=U,(U=ne>>>16&255)===0)G[_++]=65535&ne;else{if(!(16&U)){if((64&U)==0){ne=z[(65535&ne)+(O&(1<<U)-1)];continue t}if(32&U){p.mode=12;break e}c.msg="invalid literal/length code",p.mode=30;break e}Q=65535&ne,(U&=15)&&(R<U&&(O+=b[h++]<<R,R+=8),Q+=O&(1<<U)-1,O>>>=U,R-=U),R<15&&(O+=b[h++]<<R,R+=8,O+=b[h++]<<R,R+=8),ne=M[O&Z];n:for(;;){if(O>>>=U=ne>>>24,R-=U,!(16&(U=ne>>>16&255))){if((64&U)==0){ne=M[(65535&ne)+(O&(1<<U)-1)];continue n}c.msg="invalid distance code",p.mode=30;break e}if(ce=65535&ne,R<(U&=15)&&(O+=b[h++]<<R,(R+=8)<U&&(O+=b[h++]<<R,R+=8)),w<(ce+=O&(1<<U)-1)){c.msg="invalid distance too far back",p.mode=30;break e}if(O>>>=U,R-=U,(U=_-C)<ce){if(y<(U=ce-U)&&p.sane){c.msg="invalid distance too far back",p.mode=30;break e}if(L=j,(N=0)===x){if(N+=k-U,U<Q){for(Q-=U;G[_++]=j[N++],--U;);N=_-ce,L=G}}else if(x<U){if(N+=k+x-U,(U-=x)<Q){for(Q-=U;G[_++]=j[N++],--U;);if(N=0,x<Q){for(Q-=U=x;G[_++]=j[N++],--U;);N=_-ce,L=G}}}else if(N+=x-U,U<Q){for(Q-=U;G[_++]=j[N++],--U;);N=_-ce,L=G}for(;2<Q;)G[_++]=L[N++],G[_++]=L[N++],G[_++]=L[N++],Q-=3;Q&&(G[_++]=L[N++],1<Q&&(G[_++]=L[N++]))}else{for(N=_-ce;G[_++]=G[N++],G[_++]=G[N++],G[_++]=G[N++],2<(Q-=3););Q&&(G[_++]=G[N++],1<Q&&(G[_++]=G[N++]))}break}}break}}while(h<g&&_<T);h-=Q=R>>3,O&=(1<<(R-=Q<<3))-1,c.next_in=h,c.next_out=_,c.avail_in=h<g?g-h+5:5-(h-g),c.avail_out=_<T?T-_+257:257-(_-T),p.hold=O,p.bits=R}},{}],49:[function(o,u,a){var c=o("../utils/common"),f=o("./adler32"),p=o("./crc32"),h=o("./inffast"),g=o("./inftrees"),_=1,C=2,T=0,w=-2,k=1,y=852,x=592;function j(N){return(N>>>24&255)+(N>>>8&65280)+((65280&N)<<8)+((255&N)<<24)}function O(){this.mode=0,this.last=!1,this.wrap=0,this.havedict=!1,this.flags=0,this.dmax=0,this.check=0,this.total=0,this.head=null,this.wbits=0,this.wsize=0,this.whave=0,this.wnext=0,this.window=null,this.hold=0,this.bits=0,this.length=0,this.offset=0,this.extra=0,this.lencode=null,this.distcode=null,this.lenbits=0,this.distbits=0,this.ncode=0,this.nlen=0,this.ndist=0,this.have=0,this.next=null,this.lens=new c.Buf16(320),this.work=new c.Buf16(288),this.lendyn=null,this.distdyn=null,this.sane=0,this.back=0,this.was=0}function R(N){var L;return N&&N.state?(L=N.state,N.total_in=N.total_out=L.total=0,N.msg="",L.wrap&&(N.adler=1&L.wrap),L.mode=k,L.last=0,L.havedict=0,L.dmax=32768,L.head=null,L.hold=0,L.bits=0,L.lencode=L.lendyn=new c.Buf32(y),L.distcode=L.distdyn=new c.Buf32(x),L.sane=1,L.back=-1,T):w}function z(N){var L;return N&&N.state?((L=N.state).wsize=0,L.whave=0,L.wnext=0,R(N)):w}function M(N,L){var b,G;return N&&N.state?(G=N.state,L<0?(b=0,L=-L):(b=1+(L>>4),L<48&&(L&=15)),L&&(L<8||15<L)?w:(G.window!==null&&G.wbits!==L&&(G.window=null),G.wrap=b,G.wbits=L,z(N))):w}function K(N,L){var b,G;return N?(G=new O,(N.state=G).window=null,(b=M(N,L))!==T&&(N.state=null),b):w}var Z,ne,U=!0;function Q(N){if(U){var L;for(Z=new c.Buf32(512),ne=new c.Buf32(32),L=0;L<144;)N.lens[L++]=8;for(;L<256;)N.lens[L++]=9;for(;L<280;)N.lens[L++]=7;for(;L<288;)N.lens[L++]=8;for(g(_,N.lens,0,288,Z,0,N.work,{bits:9}),L=0;L<32;)N.lens[L++]=5;g(C,N.lens,0,32,ne,0,N.work,{bits:5}),U=!1}N.lencode=Z,N.lenbits=9,N.distcode=ne,N.distbits=5}function ce(N,L,b,G){var ye,ee=N.state;return ee.window===null&&(ee.wsize=1<<ee.wbits,ee.wnext=0,ee.whave=0,ee.window=new c.Buf8(ee.wsize)),G>=ee.wsize?(c.arraySet(ee.window,L,b-ee.wsize,ee.wsize,0),ee.wnext=0,ee.whave=ee.wsize):(G<(ye=ee.wsize-ee.wnext)&&(ye=G),c.arraySet(ee.window,L,b-G,ye,ee.wnext),(G-=ye)?(c.arraySet(ee.window,L,b-G,G,0),ee.wnext=G,ee.whave=ee.wsize):(ee.wnext+=ye,ee.wnext===ee.wsize&&(ee.wnext=0),ee.whave<ee.wsize&&(ee.whave+=ye))),0}a.inflateReset=z,a.inflateReset2=M,a.inflateResetKeep=R,a.inflateInit=function(N){return K(N,15)},a.inflateInit2=K,a.inflate=function(N,L){var b,G,ye,ee,te,H,J,E,P,pe,se,re,Te,Pe,be,Ce,Ae,Me,xt,st,v,ie,X,$,I=0,B=new c.Buf8(4),oe=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15];if(!N||!N.state||!N.output||!N.input&&N.avail_in!==0)return w;(b=N.state).mode===12&&(b.mode=13),te=N.next_out,ye=N.output,J=N.avail_out,ee=N.next_in,G=N.input,H=N.avail_in,E=b.hold,P=b.bits,pe=H,se=J,ie=T;e:for(;;)switch(b.mode){case k:if(b.wrap===0){b.mode=13;break}for(;P<16;){if(H===0)break e;H--,E+=G[ee++]<<P,P+=8}if(2&b.wrap&&E===35615){B[b.check=0]=255&E,B[1]=E>>>8&255,b.check=p(b.check,B,2,0),P=E=0,b.mode=2;break}if(b.flags=0,b.head&&(b.head.done=!1),!(1&b.wrap)||(((255&E)<<8)+(E>>8))%31){N.msg="incorrect header check",b.mode=30;break}if((15&E)!=8){N.msg="unknown compression method",b.mode=30;break}if(P-=4,v=8+(15&(E>>>=4)),b.wbits===0)b.wbits=v;else if(v>b.wbits){N.msg="invalid window size",b.mode=30;break}b.dmax=1<<v,N.adler=b.check=1,b.mode=512&E?10:12,P=E=0;break;case 2:for(;P<16;){if(H===0)break e;H--,E+=G[ee++]<<P,P+=8}if(b.flags=E,(255&b.flags)!=8){N.msg="unknown compression method",b.mode=30;break}if(57344&b.flags){N.msg="unknown header flags set",b.mode=30;break}b.head&&(b.head.text=E>>8&1),512&b.flags&&(B[0]=255&E,B[1]=E>>>8&255,b.check=p(b.check,B,2,0)),P=E=0,b.mode=3;case 3:for(;P<32;){if(H===0)break e;H--,E+=G[ee++]<<P,P+=8}b.head&&(b.head.time=E),512&b.flags&&(B[0]=255&E,B[1]=E>>>8&255,B[2]=E>>>16&255,B[3]=E>>>24&255,b.check=p(b.check,B,4,0)),P=E=0,b.mode=4;case 4:for(;P<16;){if(H===0)break e;H--,E+=G[ee++]<<P,P+=8}b.head&&(b.head.xflags=255&E,b.head.os=E>>8),512&b.flags&&(B[0]=255&E,B[1]=E>>>8&255,b.check=p(b.check,B,2,0)),P=E=0,b.mode=5;case 5:if(1024&b.flags){for(;P<16;){if(H===0)break e;H--,E+=G[ee++]<<P,P+=8}b.length=E,b.head&&(b.head.extra_len=E),512&b.flags&&(B[0]=255&E,B[1]=E>>>8&255,b.check=p(b.check,B,2,0)),P=E=0}else b.head&&(b.head.extra=null);b.mode=6;case 6:if(1024&b.flags&&(H<(re=b.length)&&(re=H),re&&(b.head&&(v=b.head.extra_len-b.length,b.head.extra||(b.head.extra=new Array(b.head.extra_len)),c.arraySet(b.head.extra,G,ee,re,v)),512&b.flags&&(b.check=p(b.check,G,re,ee)),H-=re,ee+=re,b.length-=re),b.length))break e;b.length=0,b.mode=7;case 7:if(2048&b.flags){if(H===0)break e;for(re=0;v=G[ee+re++],b.head&&v&&b.length<65536&&(b.head.name+=String.fromCharCode(v)),v&&re<H;);if(512&b.flags&&(b.check=p(b.check,G,re,ee)),H-=re,ee+=re,v)break e}else b.head&&(b.head.name=null);b.length=0,b.mode=8;case 8:if(4096&b.flags){if(H===0)break e;for(re=0;v=G[ee+re++],b.head&&v&&b.length<65536&&(b.head.comment+=String.fromCharCode(v)),v&&re<H;);if(512&b.flags&&(b.check=p(b.check,G,re,ee)),H-=re,ee+=re,v)break e}else b.head&&(b.head.comment=null);b.mode=9;case 9:if(512&b.flags){for(;P<16;){if(H===0)break e;H--,E+=G[ee++]<<P,P+=8}if(E!==(65535&b.check)){N.msg="header crc mismatch",b.mode=30;break}P=E=0}b.head&&(b.head.hcrc=b.flags>>9&1,b.head.done=!0),N.adler=b.check=0,b.mode=12;break;case 10:for(;P<32;){if(H===0)break e;H--,E+=G[ee++]<<P,P+=8}N.adler=b.check=j(E),P=E=0,b.mode=11;case 11:if(b.havedict===0)return N.next_out=te,N.avail_out=J,N.next_in=ee,N.avail_in=H,b.hold=E,b.bits=P,2;N.adler=b.check=1,b.mode=12;case 12:if(L===5||L===6)break e;case 13:if(b.last){E>>>=7&P,P-=7&P,b.mode=27;break}for(;P<3;){if(H===0)break e;H--,E+=G[ee++]<<P,P+=8}switch(b.last=1&E,P-=1,3&(E>>>=1)){case 0:b.mode=14;break;case 1:if(Q(b),b.mode=20,L!==6)break;E>>>=2,P-=2;break e;case 2:b.mode=17;break;case 3:N.msg="invalid block type",b.mode=30}E>>>=2,P-=2;break;case 14:for(E>>>=7&P,P-=7&P;P<32;){if(H===0)break e;H--,E+=G[ee++]<<P,P+=8}if((65535&E)!=(E>>>16^65535)){N.msg="invalid stored block lengths",b.mode=30;break}if(b.length=65535&E,P=E=0,b.mode=15,L===6)break e;case 15:b.mode=16;case 16:if(re=b.length){if(H<re&&(re=H),J<re&&(re=J),re===0)break e;c.arraySet(ye,G,ee,re,te),H-=re,ee+=re,J-=re,te+=re,b.length-=re;break}b.mode=12;break;case 17:for(;P<14;){if(H===0)break e;H--,E+=G[ee++]<<P,P+=8}if(b.nlen=257+(31&E),E>>>=5,P-=5,b.ndist=1+(31&E),E>>>=5,P-=5,b.ncode=4+(15&E),E>>>=4,P-=4,286<b.nlen||30<b.ndist){N.msg="too many length or distance symbols",b.mode=30;break}b.have=0,b.mode=18;case 18:for(;b.have<b.ncode;){for(;P<3;){if(H===0)break e;H--,E+=G[ee++]<<P,P+=8}b.lens[oe[b.have++]]=7&E,E>>>=3,P-=3}for(;b.have<19;)b.lens[oe[b.have++]]=0;if(b.lencode=b.lendyn,b.lenbits=7,X={bits:b.lenbits},ie=g(0,b.lens,0,19,b.lencode,0,b.work,X),b.lenbits=X.bits,ie){N.msg="invalid code lengths set",b.mode=30;break}b.have=0,b.mode=19;case 19:for(;b.have<b.nlen+b.ndist;){for(;Ce=(I=b.lencode[E&(1<<b.lenbits)-1])>>>16&255,Ae=65535&I,!((be=I>>>24)<=P);){if(H===0)break e;H--,E+=G[ee++]<<P,P+=8}if(Ae<16)E>>>=be,P-=be,b.lens[b.have++]=Ae;else{if(Ae===16){for($=be+2;P<$;){if(H===0)break e;H--,E+=G[ee++]<<P,P+=8}if(E>>>=be,P-=be,b.have===0){N.msg="invalid bit length repeat",b.mode=30;break}v=b.lens[b.have-1],re=3+(3&E),E>>>=2,P-=2}else if(Ae===17){for($=be+3;P<$;){if(H===0)break e;H--,E+=G[ee++]<<P,P+=8}P-=be,v=0,re=3+(7&(E>>>=be)),E>>>=3,P-=3}else{for($=be+7;P<$;){if(H===0)break e;H--,E+=G[ee++]<<P,P+=8}P-=be,v=0,re=11+(127&(E>>>=be)),E>>>=7,P-=7}if(b.have+re>b.nlen+b.ndist){N.msg="invalid bit length repeat",b.mode=30;break}for(;re--;)b.lens[b.have++]=v}}if(b.mode===30)break;if(b.lens[256]===0){N.msg="invalid code -- missing end-of-block",b.mode=30;break}if(b.lenbits=9,X={bits:b.lenbits},ie=g(_,b.lens,0,b.nlen,b.lencode,0,b.work,X),b.lenbits=X.bits,ie){N.msg="invalid literal/lengths set",b.mode=30;break}if(b.distbits=6,b.distcode=b.distdyn,X={bits:b.distbits},ie=g(C,b.lens,b.nlen,b.ndist,b.distcode,0,b.work,X),b.distbits=X.bits,ie){N.msg="invalid distances set",b.mode=30;break}if(b.mode=20,L===6)break e;case 20:b.mode=21;case 21:if(6<=H&&258<=J){N.next_out=te,N.avail_out=J,N.next_in=ee,N.avail_in=H,b.hold=E,b.bits=P,h(N,se),te=N.next_out,ye=N.output,J=N.avail_out,ee=N.next_in,G=N.input,H=N.avail_in,E=b.hold,P=b.bits,b.mode===12&&(b.back=-1);break}for(b.back=0;Ce=(I=b.lencode[E&(1<<b.lenbits)-1])>>>16&255,Ae=65535&I,!((be=I>>>24)<=P);){if(H===0)break e;H--,E+=G[ee++]<<P,P+=8}if(Ce&&(240&Ce)==0){for(Me=be,xt=Ce,st=Ae;Ce=(I=b.lencode[st+((E&(1<<Me+xt)-1)>>Me)])>>>16&255,Ae=65535&I,!(Me+(be=I>>>24)<=P);){if(H===0)break e;H--,E+=G[ee++]<<P,P+=8}E>>>=Me,P-=Me,b.back+=Me}if(E>>>=be,P-=be,b.back+=be,b.length=Ae,Ce===0){b.mode=26;break}if(32&Ce){b.back=-1,b.mode=12;break}if(64&Ce){N.msg="invalid literal/length code",b.mode=30;break}b.extra=15&Ce,b.mode=22;case 22:if(b.extra){for($=b.extra;P<$;){if(H===0)break e;H--,E+=G[ee++]<<P,P+=8}b.length+=E&(1<<b.extra)-1,E>>>=b.extra,P-=b.extra,b.back+=b.extra}b.was=b.length,b.mode=23;case 23:for(;Ce=(I=b.distcode[E&(1<<b.distbits)-1])>>>16&255,Ae=65535&I,!((be=I>>>24)<=P);){if(H===0)break e;H--,E+=G[ee++]<<P,P+=8}if((240&Ce)==0){for(Me=be,xt=Ce,st=Ae;Ce=(I=b.distcode[st+((E&(1<<Me+xt)-1)>>Me)])>>>16&255,Ae=65535&I,!(Me+(be=I>>>24)<=P);){if(H===0)break e;H--,E+=G[ee++]<<P,P+=8}E>>>=Me,P-=Me,b.back+=Me}if(E>>>=be,P-=be,b.back+=be,64&Ce){N.msg="invalid distance code",b.mode=30;break}b.offset=Ae,b.extra=15&Ce,b.mode=24;case 24:if(b.extra){for($=b.extra;P<$;){if(H===0)break e;H--,E+=G[ee++]<<P,P+=8}b.offset+=E&(1<<b.extra)-1,E>>>=b.extra,P-=b.extra,b.back+=b.extra}if(b.offset>b.dmax){N.msg="invalid distance too far back",b.mode=30;break}b.mode=25;case 25:if(J===0)break e;if(re=se-J,b.offset>re){if((re=b.offset-re)>b.whave&&b.sane){N.msg="invalid distance too far back",b.mode=30;break}Te=re>b.wnext?(re-=b.wnext,b.wsize-re):b.wnext-re,re>b.length&&(re=b.length),Pe=b.window}else Pe=ye,Te=te-b.offset,re=b.length;for(J<re&&(re=J),J-=re,b.length-=re;ye[te++]=Pe[Te++],--re;);b.length===0&&(b.mode=21);break;case 26:if(J===0)break e;ye[te++]=b.length,J--,b.mode=21;break;case 27:if(b.wrap){for(;P<32;){if(H===0)break e;H--,E|=G[ee++]<<P,P+=8}if(se-=J,N.total_out+=se,b.total+=se,se&&(N.adler=b.check=b.flags?p(b.check,ye,se,te-se):f(b.check,ye,se,te-se)),se=J,(b.flags?E:j(E))!==b.check){N.msg="incorrect data check",b.mode=30;break}P=E=0}b.mode=28;case 28:if(b.wrap&&b.flags){for(;P<32;){if(H===0)break e;H--,E+=G[ee++]<<P,P+=8}if(E!==(4294967295&b.total)){N.msg="incorrect length check",b.mode=30;break}P=E=0}b.mode=29;case 29:ie=1;break e;case 30:ie=-3;break e;case 31:return-4;case 32:default:return w}return N.next_out=te,N.avail_out=J,N.next_in=ee,N.avail_in=H,b.hold=E,b.bits=P,(b.wsize||se!==N.avail_out&&b.mode<30&&(b.mode<27||L!==4))&&ce(N,N.output,N.next_out,se-N.avail_out)?(b.mode=31,-4):(pe-=N.avail_in,se-=N.avail_out,N.total_in+=pe,N.total_out+=se,b.total+=se,b.wrap&&se&&(N.adler=b.check=b.flags?p(b.check,ye,se,N.next_out-se):f(b.check,ye,se,N.next_out-se)),N.data_type=b.bits+(b.last?64:0)+(b.mode===12?128:0)+(b.mode===20||b.mode===15?256:0),(pe==0&&se===0||L===4)&&ie===T&&(ie=-5),ie)},a.inflateEnd=function(N){if(!N||!N.state)return w;var L=N.state;return L.window&&(L.window=null),N.state=null,T},a.inflateGetHeader=function(N,L){var b;return N&&N.state?(2&(b=N.state).wrap)==0?w:((b.head=L).done=!1,T):w},a.inflateSetDictionary=function(N,L){var b,G=L.length;return N&&N.state?(b=N.state).wrap!==0&&b.mode!==11?w:b.mode===11&&f(1,L,G,0)!==b.check?-3:ce(N,L,G,G)?(b.mode=31,-4):(b.havedict=1,T):w},a.inflateInfo="pako inflate (from Nodeca project)"},{"../utils/common":41,"./adler32":43,"./crc32":45,"./inffast":48,"./inftrees":50}],50:[function(o,u,a){var c=o("../utils/common"),f=[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,0,0],p=[16,16,16,16,16,16,16,16,17,17,17,17,18,18,18,18,19,19,19,19,20,20,20,20,21,21,21,21,16,72,78],h=[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,0,0],g=[16,16,16,16,17,17,18,18,19,19,20,20,21,21,22,22,23,23,24,24,25,25,26,26,27,27,28,28,29,29,64,64];u.exports=function(_,C,T,w,k,y,x,j){var O,R,z,M,K,Z,ne,U,Q,ce=j.bits,N=0,L=0,b=0,G=0,ye=0,ee=0,te=0,H=0,J=0,E=0,P=null,pe=0,se=new c.Buf16(16),re=new c.Buf16(16),Te=null,Pe=0;for(N=0;N<=15;N++)se[N]=0;for(L=0;L<w;L++)se[C[T+L]]++;for(ye=ce,G=15;1<=G&&se[G]===0;G--);if(G<ye&&(ye=G),G===0)return k[y++]=20971520,k[y++]=20971520,j.bits=1,0;for(b=1;b<G&&se[b]===0;b++);for(ye<b&&(ye=b),N=H=1;N<=15;N++)if(H<<=1,(H-=se[N])<0)return-1;if(0<H&&(_===0||G!==1))return-1;for(re[1]=0,N=1;N<15;N++)re[N+1]=re[N]+se[N];for(L=0;L<w;L++)C[T+L]!==0&&(x[re[C[T+L]]++]=L);if(Z=_===0?(P=Te=x,19):_===1?(P=f,pe-=257,Te=p,Pe-=257,256):(P=h,Te=g,-1),N=b,K=y,te=L=E=0,z=-1,M=(J=1<<(ee=ye))-1,_===1&&852<J||_===2&&592<J)return 1;for(;;){for(ne=N-te,Q=x[L]<Z?(U=0,x[L]):x[L]>Z?(U=Te[Pe+x[L]],P[pe+x[L]]):(U=96,0),O=1<<N-te,b=R=1<<ee;k[K+(E>>te)+(R-=O)]=ne<<24|U<<16|Q|0,R!==0;);for(O=1<<N-1;E&O;)O>>=1;if(O!==0?(E&=O-1,E+=O):E=0,L++,--se[N]==0){if(N===G)break;N=C[T+x[L]]}if(ye<N&&(E&M)!==z){for(te===0&&(te=ye),K+=b,H=1<<(ee=N-te);ee+te<G&&!((H-=se[ee+te])<=0);)ee++,H<<=1;if(J+=1<<ee,_===1&&852<J||_===2&&592<J)return 1;k[z=E&M]=ye<<24|ee<<16|K-y|0}}return E!==0&&(k[K+E]=N-te<<24|64<<16|0),j.bits=ye,0}},{"../utils/common":41}],51:[function(o,u,a){u.exports={2:"need dictionary",1:"stream end",0:"","-1":"file error","-2":"stream error","-3":"data error","-4":"insufficient memory","-5":"buffer error","-6":"incompatible version"}},{}],52:[function(o,u,a){var c=o("../utils/common"),f=0,p=1;function h(I){for(var B=I.length;0<=--B;)I[B]=0}var g=0,_=29,C=256,T=C+1+_,w=30,k=19,y=2*T+1,x=15,j=16,O=7,R=256,z=16,M=17,K=18,Z=[0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0],ne=[0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13],U=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,3,7],Q=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],ce=new Array(2*(T+2));h(ce);var N=new Array(2*w);h(N);var L=new Array(512);h(L);var b=new Array(256);h(b);var G=new Array(_);h(G);var ye,ee,te,H=new Array(w);function J(I,B,oe,ae,V){this.static_tree=I,this.extra_bits=B,this.extra_base=oe,this.elems=ae,this.max_length=V,this.has_stree=I&&I.length}function E(I,B){this.dyn_tree=I,this.max_code=0,this.stat_desc=B}function P(I){return I<256?L[I]:L[256+(I>>>7)]}function pe(I,B){I.pending_buf[I.pending++]=255&B,I.pending_buf[I.pending++]=B>>>8&255}function se(I,B,oe){I.bi_valid>j-oe?(I.bi_buf|=B<<I.bi_valid&65535,pe(I,I.bi_buf),I.bi_buf=B>>j-I.bi_valid,I.bi_valid+=oe-j):(I.bi_buf|=B<<I.bi_valid&65535,I.bi_valid+=oe)}function re(I,B,oe){se(I,oe[2*B],oe[2*B+1])}function Te(I,B){for(var oe=0;oe|=1&I,I>>>=1,oe<<=1,0<--B;);return oe>>>1}function Pe(I,B,oe){var ae,V,he=new Array(x+1),_e=0;for(ae=1;ae<=x;ae++)he[ae]=_e=_e+oe[ae-1]<<1;for(V=0;V<=B;V++){var ge=I[2*V+1];ge!==0&&(I[2*V]=Te(he[ge]++,ge))}}function be(I){var B;for(B=0;B<T;B++)I.dyn_ltree[2*B]=0;for(B=0;B<w;B++)I.dyn_dtree[2*B]=0;for(B=0;B<k;B++)I.bl_tree[2*B]=0;I.dyn_ltree[2*R]=1,I.opt_len=I.static_len=0,I.last_lit=I.matches=0}function Ce(I){8<I.bi_valid?pe(I,I.bi_buf):0<I.bi_valid&&(I.pending_buf[I.pending++]=I.bi_buf),I.bi_buf=0,I.bi_valid=0}function Ae(I,B,oe,ae){var V=2*B,he=2*oe;return I[V]<I[he]||I[V]===I[he]&&ae[B]<=ae[oe]}function Me(I,B,oe){for(var ae=I.heap[oe],V=oe<<1;V<=I.heap_len&&(V<I.heap_len&&Ae(B,I.heap[V+1],I.heap[V],I.depth)&&V++,!Ae(B,ae,I.heap[V],I.depth));)I.heap[oe]=I.heap[V],oe=V,V<<=1;I.heap[oe]=ae}function xt(I,B,oe){var ae,V,he,_e,ge=0;if(I.last_lit!==0)for(;ae=I.pending_buf[I.d_buf+2*ge]<<8|I.pending_buf[I.d_buf+2*ge+1],V=I.pending_buf[I.l_buf+ge],ge++,ae===0?re(I,V,B):(re(I,(he=b[V])+C+1,B),(_e=Z[he])!==0&&se(I,V-=G[he],_e),re(I,he=P(--ae),oe),(_e=ne[he])!==0&&se(I,ae-=H[he],_e)),ge<I.last_lit;);re(I,R,B)}function st(I,B){var oe,ae,V,he=B.dyn_tree,_e=B.stat_desc.static_tree,ge=B.stat_desc.has_stree,je=B.stat_desc.elems,ze=-1;for(I.heap_len=0,I.heap_max=y,oe=0;oe<je;oe++)he[2*oe]!==0?(I.heap[++I.heap_len]=ze=oe,I.depth[oe]=0):he[2*oe+1]=0;for(;I.heap_len<2;)he[2*(V=I.heap[++I.heap_len]=ze<2?++ze:0)]=1,I.depth[V]=0,I.opt_len--,ge&&(I.static_len-=_e[2*V+1]);for(B.max_code=ze,oe=I.heap_len>>1;1<=oe;oe--)Me(I,he,oe);for(V=je;oe=I.heap[1],I.heap[1]=I.heap[I.heap_len--],Me(I,he,1),ae=I.heap[1],I.heap[--I.heap_max]=oe,I.heap[--I.heap_max]=ae,he[2*V]=he[2*oe]+he[2*ae],I.depth[V]=(I.depth[oe]>=I.depth[ae]?I.depth[oe]:I.depth[ae])+1,he[2*oe+1]=he[2*ae+1]=V,I.heap[1]=V++,Me(I,he,1),2<=I.heap_len;);I.heap[--I.heap_max]=I.heap[1],function(Re,ft){var zt,at,Nn,We,En,yr,St=ft.dyn_tree,qn=ft.max_code,vr=ft.stat_desc.static_tree,_r=ft.stat_desc.has_stree,wr=ft.stat_desc.extra_bits,Xt=ft.stat_desc.extra_base,Nt=ft.stat_desc.max_length,On=0;for(We=0;We<=x;We++)Re.bl_count[We]=0;for(St[2*Re.heap[Re.heap_max]+1]=0,zt=Re.heap_max+1;zt<y;zt++)Nt<(We=St[2*St[2*(at=Re.heap[zt])+1]+1]+1)&&(We=Nt,On++),St[2*at+1]=We,qn<at||(Re.bl_count[We]++,En=0,Xt<=at&&(En=wr[at-Xt]),yr=St[2*at],Re.opt_len+=yr*(We+En),_r&&(Re.static_len+=yr*(vr[2*at+1]+En)));if(On!==0){do{for(We=Nt-1;Re.bl_count[We]===0;)We--;Re.bl_count[We]--,Re.bl_count[We+1]+=2,Re.bl_count[Nt]--,On-=2}while(0<On);for(We=Nt;We!==0;We--)for(at=Re.bl_count[We];at!==0;)qn<(Nn=Re.heap[--zt])||(St[2*Nn+1]!==We&&(Re.opt_len+=(We-St[2*Nn+1])*St[2*Nn],St[2*Nn+1]=We),at--)}}(I,B),Pe(he,ze,I.bl_count)}function v(I,B,oe){var ae,V,he=-1,_e=B[1],ge=0,je=7,ze=4;for(_e===0&&(je=138,ze=3),B[2*(oe+1)+1]=65535,ae=0;ae<=oe;ae++)V=_e,_e=B[2*(ae+1)+1],++ge<je&&V===_e||(ge<ze?I.bl_tree[2*V]+=ge:V!==0?(V!==he&&I.bl_tree[2*V]++,I.bl_tree[2*z]++):ge<=10?I.bl_tree[2*M]++:I.bl_tree[2*K]++,he=V,ze=(ge=0)===_e?(je=138,3):V===_e?(je=6,3):(je=7,4))}function ie(I,B,oe){var ae,V,he=-1,_e=B[1],ge=0,je=7,ze=4;for(_e===0&&(je=138,ze=3),ae=0;ae<=oe;ae++)if(V=_e,_e=B[2*(ae+1)+1],!(++ge<je&&V===_e)){if(ge<ze)for(;re(I,V,I.bl_tree),--ge!=0;);else V!==0?(V!==he&&(re(I,V,I.bl_tree),ge--),re(I,z,I.bl_tree),se(I,ge-3,2)):ge<=10?(re(I,M,I.bl_tree),se(I,ge-3,3)):(re(I,K,I.bl_tree),se(I,ge-11,7));he=V,ze=(ge=0)===_e?(je=138,3):V===_e?(je=6,3):(je=7,4)}}h(H);var X=!1;function $(I,B,oe,ae){se(I,(g<<1)+(ae?1:0),3),function(V,he,_e,ge){Ce(V),pe(V,_e),pe(V,~_e),c.arraySet(V.pending_buf,V.window,he,_e,V.pending),V.pending+=_e}(I,B,oe)}a._tr_init=function(I){X||(function(){var B,oe,ae,V,he,_e=new Array(x+1);for(V=ae=0;V<_-1;V++)for(G[V]=ae,B=0;B<1<<Z[V];B++)b[ae++]=V;for(b[ae-1]=V,V=he=0;V<16;V++)for(H[V]=he,B=0;B<1<<ne[V];B++)L[he++]=V;for(he>>=7;V<w;V++)for(H[V]=he<<7,B=0;B<1<<ne[V]-7;B++)L[256+he++]=V;for(oe=0;oe<=x;oe++)_e[oe]=0;for(B=0;B<=143;)ce[2*B+1]=8,B++,_e[8]++;for(;B<=255;)ce[2*B+1]=9,B++,_e[9]++;for(;B<=279;)ce[2*B+1]=7,B++,_e[7]++;for(;B<=287;)ce[2*B+1]=8,B++,_e[8]++;for(Pe(ce,T+1,_e),B=0;B<w;B++)N[2*B+1]=5,N[2*B]=Te(B,5);ye=new J(ce,Z,C+1,T,x),ee=new J(N,ne,0,w,x),te=new J(new Array(0),U,0,k,O)}(),X=!0),I.l_desc=new E(I.dyn_ltree,ye),I.d_desc=new E(I.dyn_dtree,ee),I.bl_desc=new E(I.bl_tree,te),I.bi_buf=0,I.bi_valid=0,be(I)},a._tr_stored_block=$,a._tr_flush_block=function(I,B,oe,ae){var V,he,_e=0;0<I.level?(I.strm.data_type===2&&(I.strm.data_type=function(ge){var je,ze=4093624447;for(je=0;je<=31;je++,ze>>>=1)if(1&ze&&ge.dyn_ltree[2*je]!==0)return f;if(ge.dyn_ltree[18]!==0||ge.dyn_ltree[20]!==0||ge.dyn_ltree[26]!==0)return p;for(je=32;je<C;je++)if(ge.dyn_ltree[2*je]!==0)return p;return f}(I)),st(I,I.l_desc),st(I,I.d_desc),_e=function(ge){var je;for(v(ge,ge.dyn_ltree,ge.l_desc.max_code),v(ge,ge.dyn_dtree,ge.d_desc.max_code),st(ge,ge.bl_desc),je=k-1;3<=je&&ge.bl_tree[2*Q[je]+1]===0;je--);return ge.opt_len+=3*(je+1)+5+5+4,je}(I),V=I.opt_len+3+7>>>3,(he=I.static_len+3+7>>>3)<=V&&(V=he)):V=he=oe+5,oe+4<=V&&B!==-1?$(I,B,oe,ae):I.strategy===4||he===V?(se(I,2+(ae?1:0),3),xt(I,ce,N)):(se(I,4+(ae?1:0),3),function(ge,je,ze,Re){var ft;for(se(ge,je-257,5),se(ge,ze-1,5),se(ge,Re-4,4),ft=0;ft<Re;ft++)se(ge,ge.bl_tree[2*Q[ft]+1],3);ie(ge,ge.dyn_ltree,je-1),ie(ge,ge.dyn_dtree,ze-1)}(I,I.l_desc.max_code+1,I.d_desc.max_code+1,_e+1),xt(I,I.dyn_ltree,I.dyn_dtree)),be(I),ae&&Ce(I)},a._tr_tally=function(I,B,oe){return I.pending_buf[I.d_buf+2*I.last_lit]=B>>>8&255,I.pending_buf[I.d_buf+2*I.last_lit+1]=255&B,I.pending_buf[I.l_buf+I.last_lit]=255&oe,I.last_lit++,B===0?I.dyn_ltree[2*oe]++:(I.matches++,B--,I.dyn_ltree[2*(b[oe]+C+1)]++,I.dyn_dtree[2*P(B)]++),I.last_lit===I.lit_bufsize-1},a._tr_align=function(I){se(I,2,3),re(I,R,ce),function(B){B.bi_valid===16?(pe(B,B.bi_buf),B.bi_buf=0,B.bi_valid=0):8<=B.bi_valid&&(B.pending_buf[B.pending++]=255&B.bi_buf,B.bi_buf>>=8,B.bi_valid-=8)}(I)}},{"../utils/common":41}],53:[function(o,u,a){u.exports=function(){this.input=null,this.next_in=0,this.avail_in=0,this.total_in=0,this.output=null,this.next_out=0,this.avail_out=0,this.total_out=0,this.msg="",this.state=null,this.data_type=2,this.adler=0}},{}],54:[function(o,u,a){(function(c){(function(f,p){if(!f.setImmediate){var h,g,_,C,T=1,w={},k=!1,y=f.document,x=Object.getPrototypeOf&&Object.getPrototypeOf(f);x=x&&x.setTimeout?x:f,h={}.toString.call(f.process)==="[object process]"?function(z){process.nextTick(function(){O(z)})}:function(){if(f.postMessage&&!f.importScripts){var z=!0,M=f.onmessage;return f.onmessage=function(){z=!1},f.postMessage("","*"),f.onmessage=M,z}}()?(C="setImmediate$"+Math.random()+"$",f.addEventListener?f.addEventListener("message",R,!1):f.attachEvent("onmessage",R),function(z){f.postMessage(C+z,"*")}):f.MessageChannel?((_=new MessageChannel).port1.onmessage=function(z){O(z.data)},function(z){_.port2.postMessage(z)}):y&&"onreadystatechange"in y.createElement("script")?(g=y.documentElement,function(z){var M=y.createElement("script");M.onreadystatechange=function(){O(z),M.onreadystatechange=null,g.removeChild(M),M=null},g.appendChild(M)}):function(z){setTimeout(O,0,z)},x.setImmediate=function(z){typeof z!="function"&&(z=new Function(""+z));for(var M=new Array(arguments.length-1),K=0;K<M.length;K++)M[K]=arguments[K+1];var Z={callback:z,args:M};return w[T]=Z,h(T),T++},x.clearImmediate=j}function j(z){delete w[z]}function O(z){if(k)setTimeout(O,0,z);else{var M=w[z];if(M){k=!0;try{(function(K){var Z=K.callback,ne=K.args;switch(ne.length){case 0:Z();break;case 1:Z(ne[0]);break;case 2:Z(ne[0],ne[1]);break;case 3:Z(ne[0],ne[1],ne[2]);break;default:Z.apply(p,ne)}})(M)}finally{j(z),k=!1}}}}function R(z){z.source===f&&typeof z.data=="string"&&z.data.indexOf(C)===0&&O(+z.data.slice(C.length))}})(typeof self>"u"?c===void 0?this:c:self)}).call(this,typeof Tn<"u"?Tn:typeof self<"u"?self:typeof window<"u"?window:{})},{}]},{},[10])(10)})}(ka)),ka.exports}var Gy=Vy();const Yy=Ia(Gy);var wo={exports:{}},Zy=wo.exports,id;function Qy(){return id||(id=1,function(n,i){(function(o,u){u()})(Zy,function(){function o(g,_){return typeof _>"u"?_={autoBom:!1}:typeof _!="object"&&(console.warn("Deprecated: Expected third argument to be a object"),_={autoBom:!_}),_.autoBom&&/^\s*(?:text\/\S*|application\/xml|\S*\/\S*\+xml)\s*;.*charset\s*=\s*utf-8/i.test(g.type)?new Blob(["\uFEFF",g],{type:g.type}):g}function u(g,_,C){var T=new XMLHttpRequest;T.open("GET",g),T.responseType="blob",T.onload=function(){h(T.response,_,C)},T.onerror=function(){console.error("could not download file")},T.send()}function a(g){var _=new XMLHttpRequest;_.open("HEAD",g,!1);try{_.send()}catch{}return 200<=_.status&&299>=_.status}function c(g){try{g.dispatchEvent(new MouseEvent("click"))}catch{var _=document.createEvent("MouseEvents");_.initMouseEvent("click",!0,!0,window,0,0,0,80,20,!1,!1,!1,!1,0,null),g.dispatchEvent(_)}}var f=typeof window=="object"&&window.window===window?window:typeof self=="object"&&self.self===self?self:typeof Tn=="object"&&Tn.global===Tn?Tn:void 0,p=f.navigator&&/Macintosh/.test(navigator.userAgent)&&/AppleWebKit/.test(navigator.userAgent)&&!/Safari/.test(navigator.userAgent),h=f.saveAs||(typeof window!="object"||window!==f?function(){}:"download"in HTMLAnchorElement.prototype&&!p?function(g,_,C){var T=f.URL||f.webkitURL,w=document.createElement("a");_=_||g.name||"download",w.download=_,w.rel="noopener",typeof g=="string"?(w.href=g,w.origin===location.origin?c(w):a(w.href)?u(g,_,C):c(w,w.target="_blank")):(w.href=T.createObjectURL(g),setTimeout(function(){T.revokeObjectURL(w.href)},4e4),setTimeout(function(){c(w)},0))}:"msSaveOrOpenBlob"in navigator?function(g,_,C){if(_=_||g.name||"download",typeof g!="string")navigator.msSaveOrOpenBlob(o(g,C),_);else if(a(g))u(g,_,C);else{var T=document.createElement("a");T.href=g,T.target="_blank",setTimeout(function(){c(T)})}}:function(g,_,C,T){if(T=T||open("","_blank"),T&&(T.document.title=T.document.body.innerText="downloading..."),typeof g=="string")return u(g,_,C);var w=g.type==="application/octet-stream",k=/constructor/i.test(f.HTMLElement)||f.safari,y=/CriOS\/[\d]+/.test(navigator.userAgent);if((y||w&&k||p)&&typeof FileReader<"u"){var x=new FileReader;x.onloadend=function(){var R=x.result;R=y?R:R.replace(/^data:[^;]*;/,"data:attachment/file;"),T?T.location.href=R:location=R,T=null},x.readAsDataURL(g)}else{var j=f.URL||f.webkitURL,O=j.createObjectURL(g);T?T.location=O:location.href=O,T=null,setTimeout(function(){j.revokeObjectURL(O)},4e4)}});f.saveAs=h.saveAs=h,n.exports=h})}(wo)),wo.exports}var Ky=Qy();const Xy=n=>{if(!n)return null;if(console.log("Processing condition:",n),n.rubyMethod&&n.rubyMethod.endsWith("?")){const u=od(n.entity);return n.comparison==="not-equals"||n.comparison==="!="||n.value==="false"||n.value===!1?`!${u}.${n.rubyMethod}`:n.rubyMethod==="is_non_partner?"?`${u}.${n.rubyMethod.replace("?","")}?(college)`:`${u}.${n.rubyMethod}`}if(n.name){const u=tv[n.name];if(u)return console.log(`Found direct mapping for condition name "${n.name}"`),u}if(n.entity==="HighSchool"&&n.property==="is_home_school")return"student.high_school.is_home_school?";const i=od(n.entity);if(!i)return console.warn(`Unknown entity: ${n.entity}`),null;const o=Jy(n.entity,n.property);return o?ev(i,o,n.comparison,n.value):(console.warn(`Unknown property ${n.property} for entity ${n.entity}`),null)};function od(n){return n?{Student:"student",student:"student",HighSchool:"student.high_school",high_school:"student.high_school",Course:"course",course:"course",CourseSection:"course_section",course_section:"course_section",Term:"term",term:"term",Instructor:"instructor",instructor:"instructor",College:"college",college:"college"}[n]||n.toLowerCase():null}function Jy(n,i){if(!n||!i)return null;const o=n.toLowerCase(),u=i.toLowerCase(),a={student:{isMinor:"is_minor?",is_minor:"is_minor?",hasParentConsent:"has_parent_consent?",has_parent_consent:"has_parent_consent?",isHomeSchool:"high_school.is_home_school?",is_home_school:"high_school.is_home_school?",name:"name",grade:"grade",email:"email",age:"age"},high_school:{isNonPartner:"is_non_partner?(college)",is_non_partner:"is_non_partner?(college)",isHomeSchool:"is_home_school?",is_home_school:"is_home_school?",name:"name",type:"type"},course:{hasPrerequisites:"has_requisites?",has_prerequisites:"has_requisites?",hasRequisites:"has_requisites?",has_requisites:"has_requisites?",hasCourseCategory:"has_course_category?",has_course_category:"has_course_category?",title:"title",number:"number",subject:"subject"},course_section:{isFull:"is_full?",is_full:"is_full?",isWishList:"is_wish_list?",is_wish_list:"is_wish_list?",number:"number",capacity:"capacity",enrollment_count:"enrollment_count",location:"location"},term:{name:"name",start_date:"start_date",end_date:"end_date"}};return a[o]&&a[o][i]?a[o][i]:o==="high_school"&&u==="is_home_school"?"is_home_school?":i}function ev(n,i,o,u){if(i.endsWith("?")){if(u===!0||u==="true"||o==="present")return`${n}.${i}`;if(u===!1||u==="false"||o==="blank")return`!${n}.${i}`}if(i.includes("?("))return`${n}.${i}`;switch(o){case"equals":case"==":return typeof u=="number"||!isNaN(Number(u))&&u.toString()===String(u)?`${n}.${i.replace("?","")} == ${u}`:`${n}.${i.replace("?","")} == '${u}'`;case"not-equals":case"!=":return typeof u=="number"||!isNaN(Number(u))&&u.toString()===String(u)?`${n}.${i.replace("?","")} != ${u}`:`${n}.${i.replace("?","")} != '${u}'`;case"greater-than":case">":return`${n}.${i.replace("?","")} > ${u}`;case"less-than":case"<":return`${n}.${i.replace("?","")} < ${u}`;case"greater-than-or-equal":case">=":return`${n}.${i.replace("?","")} >= ${u}`;case"less-than-or-equal":case"<=":return`${n}.${i.replace("?","")} <= ${u}`;case"includes":case"contains":return`${n}.${i.replace("?","")}.to_s.include?('${u}')`;case"not-includes":case"not-contains":return`!${n}.${i.replace("?","")}.to_s.include?('${u}')`;case"present":return i.endsWith("?")?`${n}.${i}`:`${n}.${i.replace("?","")}.present?`;case"blank":return i.endsWith("?")?`!${n}.${i}`:`${n}.${i.replace("?","")}.blank?`;default:return`${n}.${i.replace("?","")} == '${u}'`}}const tv={high_school:"!student.high_school.is_home_school? && !student.high_school.is_non_partner?(college)",regular_high_school:"!student.high_school.is_home_school? && !student.high_school.is_non_partner?(college)",hs_student:"!student.high_school.is_home_school? && !student.high_school.is_non_partner?(college)",home_school:"student.high_school.is_home_school?",homeschool:"student.high_school.is_home_school?",home_schooled:"student.high_school.is_home_school?",is_home_school:"student.high_school.is_home_school?",isHomeSchool:"student.high_school.is_home_school?",non_partner:"student.high_school.is_non_partner?(college)",nonpartner:"student.high_school.is_non_partner?(college)",is_non_partner:"student.high_school.is_non_partner?(college)",isNonPartner:"student.high_school.is_non_partner?(college)",has_prereqs:"course.has_requisites?",hasPrerequisites:"course.has_requisites?",has_prerequisites:"course.has_requisites?",hasRequisites:"course.has_requisites?",has_requisites:"course.has_requisites?",prerequisites:"course.has_requisites?",requisites:"course.has_requisites?",wish_list:"course_section.is_wish_list?",isWishList:"course_section.is_wish_list?",is_wish_list:"course_section.is_wish_list?",section_full:"course_section.is_full?",isSectionFull:"course_section.is_full?",is_section_full:"course_section.is_full?",course_full:"course_section.is_full?",minor:"student.is_minor?",is_minor:"student.is_minor?",isMinor:"student.is_minor?",has_parent_consent:"student.has_parent_consent?",hasParentConsent:"student.has_parent_consent?",parent_consent:"student.has_parent_consent?",on_campus:"course_section.location == 'College Campus'",college_campus:"course_section.location == 'College Campus'",at_high_school:"course_section.location == 'High School'"},nv=n=>{if(!n)return null;switch(n.stepType){case"Approval":return n.actionOptions&&n.actionOptions.length>0&&n.actionOptions.find(o=>o.value==="approve-yes"||o.value==="yes")?`${Lt(n.title)}_yes`:`${Lt(n.title)}_yes`;case"Upload":return`${Lt(n.title)}_complete`;case"ProvideConsent":return`${Lt(n.title)}_provided`;case"Information":return`${Lt(n.title)}_viewed`;default:return`${Lt(n.title)}_complete`}},rv=n=>{const i={},o=new Set;return n.forEach(f=>{f.conditional&&f.workflowCondition&&(Array.isArray(f.workflowCondition)?f.workflowCondition:[f.workflowCondition]).forEach(h=>o.add(h))}),n.some(f=>f.role==="High School"||f.role==="Counselor")&&(o.add("high_school"),console.log("Added implicit high_school condition based on High School role steps")),n.some(f=>f.title&&f.title.toLowerCase().includes("home school")||f.description&&f.description.toLowerCase().includes("home school"))&&(o.add("home_school"),console.log("Added implicit home_school condition based on steps with Home School in title/description")),n.some(f=>f.title&&f.title.toLowerCase().includes("non partner")||f.description&&f.description.toLowerCase().includes("non partner"))&&(o.add("non_partner"),console.log("Added implicit non_partner condition based on steps with Non Partner in title/description")),console.log("All conditions found in workflow:",Array.from(o)),o.forEach(f=>{i[f]||(i[f]={steps:[],completionStates:[]}),n.filter(h=>h.conditional&&h.workflowCondition&&(Array.isArray(h.workflowCondition)?h.workflowCondition:[h.workflowCondition]).includes(f)?!0:f==="high_school"&&(h.role==="High School"||h.role==="Counselor")?(console.log(`Treating step "${h.title}" as conditional on high_school due to High School role`),!0):f==="home_school"&&(h.title&&h.title.toLowerCase().includes("home school")||h.description&&h.description.toLowerCase().includes("home school"))?(console.log(`Treating step "${h.title}" as conditional on home_school due to content`),!0):f==="non_partner"&&(h.title&&h.title.toLowerCase().includes("non partner")||h.description&&h.description.toLowerCase().includes("non partner"))?(console.log(`Treating step "${h.title}" as conditional on non_partner due to content`),!0):!1).forEach(h=>{i[f].steps.some(_=>_.id===h.id)||i[f].steps.push(h);const g=nv(h);g&&!i[f].completionStates.includes(g)&&(i[f].completionStates.push(g),console.log(`Added completion state "${g}" for condition "${f}"`))})}),Object.keys(i).forEach(f=>{console.log(`Condition "${f}" leads to steps:`,i[f].steps.map(p=>p.title)),console.log(`Completion states for "${f}":`,i[f].completionStates)}),i},Ua=(n,i)=>{let o="";if(i.size>0){o+=`    # Set completion states for students who don't meet condition criteria
`,i.forEach((f,p)=>{const h=n.get(p);h&&f.length>0&&(o+=`    # Auto-complete steps for students who don't qualify for ${p}
`,o+=`    unless ${h.rubyCode}
`,f.forEach(g=>{o+=`      fields["${g}"] = true
`}),o+=`    end

`)});const u=n.has("high_school"),a=n.has("home_school"),c=n.has("non_partner");if(u&&a||u&&c||a&&c){if(o+=`    # Ensure merge of conditional paths for high school types
`,u){const f=n.get("high_school").rubyCode;o+=`    # High School students get completion states from other paths
`,o+=`    if ${f}
`,a&&i.has("home_school")&&(o+=`      # Set home_school completion states for high_school students
`,i.get("home_school").forEach(p=>{o+=`      fields["${p}"] = true
`})),c&&i.has("non_partner")&&(o+=`      # Set non_partner completion states for high_school students
`,i.get("non_partner").forEach(p=>{o+=`      fields["${p}"] = true
`})),o+=`    end

`}if(a){const f=n.get("home_school").rubyCode;o+=`    # Home School students get completion states from other paths
`,o+=`    if ${f}
`,u&&i.has("high_school")&&(o+=`      # Set high_school completion states for home_school students
`,i.get("high_school").forEach(p=>{o+=`      fields["${p}"] = true
`})),c&&i.has("non_partner")&&(o+=`      # Set non_partner completion states for home_school students
`,i.get("non_partner").forEach(p=>{o+=`      fields["${p}"] = true
`})),o+=`    end

`}if(c){const f=n.get("non_partner").rubyCode;o+=`    # Non-Partner students get completion states from other paths
`,o+=`    if ${f}
`,u&&i.has("high_school")&&(o+=`      # Set high_school completion states for non_partner students
`,i.get("high_school").forEach(p=>{o+=`      fields["${p}"] = true
`})),a&&i.has("home_school")&&(o+=`      # Set home_school completion states for non_partner students
`,i.get("home_school").forEach(p=>{o+=`      fields["${p}"] = true
`})),o+=`    end

`}}}return o},Ba=n=>`class ${n} < Step

  def self.required_fields
    return ["active_flow_step_id"]
  end

  def self.provided_fields(*args)
    return ["initialization_complete"]
  end

  def self.on_activate(*args)
    fields = args[0]
    active_flow_step = ActiveFlowStep.find(fields["active_flow_step_id"])
    target_object = active_flow_step.get_target_object
`,Ha=()=>`
    # Complete the initialization
    fields["initialization_complete"] = true
    fields = active_flow_step.complete_step(fields)
    return fields
  end

end`,Wa=(n,i,o)=>{const u=new Map,a=new Map;console.log(`Analyzing workflow for ${o}...`),console.log(`Total steps for analysis: ${i.length}`);const c=i.filter(h=>h.role==="High School"||h.role==="Counselor");c.length>0&&(console.log(`Found ${c.length} High School role steps`),c.forEach(h=>{console.log(`High School role step: "${h.title}"`)}));const f=rv(i);console.log("Identified conditional branches:",Object.keys(f));const p=new Set;return i.forEach(h=>{h.conditional&&h.workflowCondition&&(Array.isArray(h.workflowCondition)?h.workflowCondition.forEach(g=>p.add(g)):p.add(h.workflowCondition))}),c.length>0&&p.add("high_school"),console.log(`Relevant condition names for ${o}:`,Array.from(p)),n.conditions&&Object.keys(n.conditions).length>0&&(console.log("Processing conditions from workflowData:",Object.keys(n.conditions)),Object.entries(n.conditions).forEach(([h,g])=>{if(console.log(`Processing condition ${h}:`,g),!p.has(h)){console.log(`Skipping condition ${h} - not used by ${o} steps`);return}if(!iv(g,o)){console.log(`Skipping condition ${h} - refers to entities not available in ${o}`);return}let _=null;if(g.rubyMethod){console.log(`Condition has rubyMethod: ${g.rubyMethod}`);const C=ov(g.entity);g.rubyMethod==="is_non_partner?"?_=`${C}.is_non_partner?(college)`:_=`${C}.${g.rubyMethod}`}else _=Xy(g);console.log(`Transformed condition ${h} to:`,_),_?(u.set(h,{rubyCode:_,fields:g.fields||[h]}),f[h]?(a.set(h,f[h].completionStates),console.log(`Completion states for ${h}:`,f[h].completionStates)):console.log(`No completion states found for condition ${h}`)):console.warn(`Failed to transform condition ${h} to Ruby code`)})),p.has("high_school")&&!u.has("high_school")&&(console.log("Adding hardcoded high_school condition"),u.set("high_school",{rubyCode:"!student.high_school.is_home_school? && !student.high_school.is_non_partner?(college)",fields:["high_school"]}),f.high_school&&a.set("high_school",f.high_school.completionStates)),p.has("home_school")&&!u.has("home_school")&&(console.log("Adding hardcoded home_school condition"),u.set("home_school",{rubyCode:"student.high_school.is_home_school?",fields:["home_school"]}),f.home_school&&a.set("home_school",f.home_school.completionStates)),p.has("non_partner")&&!u.has("non_partner")&&(console.log("Adding hardcoded non_partner condition"),u.set("non_partner",{rubyCode:"student.high_school.is_non_partner?(college)",fields:["non_partner"]}),f.non_partner&&a.set("non_partner",f.non_partner.completionStates)),{conditionToRubyMap:u,conditionalCompletionStates:a}};function iv(n,i){if(!n)return!1;const o=n.entity?n.entity.toLowerCase():"",u=n.name||"";return!(n.rubyMethod&&(i!=="StudentDeCourse"&&(n.rubyMethod.includes("requisites")||n.rubyMethod.includes("course_section"))||i!=="StudentTerm"&&n.rubyMethod.includes("term"))||i!=="StudentDeCourse"&&(o==="course"||o==="course_section"||u.toLowerCase().includes("course")||u.toLowerCase().includes("prereq"))||i!=="StudentTerm"&&(o==="term"||u.toLowerCase().includes("term")))}function ov(n){return n?{Student:"student",student:"student",HighSchool:"student.high_school",high_school:"student.high_school",Course:"course",course:"course",CourseSection:"course_section",course_section:"course_section",Term:"term",term:"term",Instructor:"instructor",instructor:"instructor",College:"college",college:"college"}[n]||n.toLowerCase():"student"}const qa=n=>{let i="";return n.size>0&&(i+=`    # Conditional fields based on workflow conditions
`,n.forEach((o,u)=>{const a=o.fields&&o.fields.length>0?o.fields:[u];i+=`    # Condition: ${u}
`,i+=`    if ${o.rubyCode}
`,a.forEach(c=>{i+=`      fields["${c}"] = true
`}),i+=`    end

`})),i},sv=(n,i)=>{const o="CollegeStudentApplication",a=`Initialize${i.charAt(0).toUpperCase()+i.slice(1)}${o}Step`,f=(n.workflow||[]).filter(_=>_.workflow_category==="One Time"||!_.workflow_category),{conditionToRubyMap:p,conditionalCompletionStates:h}=Wa(n,f,o);let g=Ba(a);return g+=`    student = target_object.student
    college = target_object.college

    # Common initialization
    fields["parent_consent_email"] = true

    # One-time workflow initialization
    # Parent consent is handled in the one-time workflow
    # These fields are mutually exclusive for conditional path clarity
    is_home_school = student.high_school.is_home_school?
    is_non_partner = student.high_school.is_non_partner?(college)
    is_regular_high_school = !is_home_school && !is_non_partner
    
    if is_home_school
      # Home School students get special handling
      fields["parent_consent_provided"] = true  # Auto-set for home school
      fields["home_school"] = true
      fields["mou_required"] = true            # Home School Affidavit required
      # Home School students don't get high_school or non_partner flags
    elsif is_non_partner
      # Non-partner high school students
      fields["non_partner"] = true
      fields["parent_consent_required"] = true
      # Non-partner students don't get high_school or home_school flags
    else
      # Regular high school students
      fields["high_school"] = true
      fields["parent_consent_required"] = true
      fields["partner_high_school"] = true
      # Regular high school students don't get home_school or non_partner flags
    end

`,g+=qa(p),g+=Ua(p,h),g+=`    # Set up student signature for enrollment form
    fields["esign_enrollment_form_sign"] = target_object.student.display_name
    fields["esign_enrollment_form_date"] = Time.now.strftime('%-d %b %Y')

`,g+=Ha(),g},av=(n,i)=>{const o="StudentTerm",a=`Initialize${i.charAt(0).toUpperCase()+i.slice(1)}${o}Step`,f=(n.workflow||[]).slice();console.log(`Generating initializer for ${o}`),console.log(`Total steps: ${f.length}`);const{conditionToRubyMap:p,conditionalCompletionStates:h}=Wa(n,f,o);let g=Ba(a);return g+=`    student = target_object.student
    college = target_object.college
    term = target_object.term

    # Common initialization
    fields["parent_consent_email"] = true

    # Per-term workflow initialization
    # Parent consent based on student age
    if student.is_minor?
      fields["parent_consent_required"] = true
    else
      fields["parent_consent_provided"] = true
    end
    
    # Handle home school vs non-partner vs partner high school
    # These fields are mutually exclusive for conditional path clarity
    is_home_school = student.high_school.is_home_school?
    is_non_partner = student.high_school.is_non_partner?(college)
    is_regular_high_school = !is_home_school && !is_non_partner
    
    if is_home_school
      fields["home_school"] = true
      # Home School students don't get high_school or non_partner flags
    elsif is_non_partner
      fields["non_partner"] = true
      # Non-partner students don't get high_school or home_school flags
    else
      # Regular high school students
      fields["high_school"] = true
      fields["partner_high_school"] = true
      # Regular high school students don't get home_school or non_partner flags
    end
    
`,g+=qa(p),g+=Ua(p,h),g+=`    # Set up student signature for enrollment form
    fields["esign_enrollment_form_sign"] = target_object.student.display_name
    fields["esign_enrollment_form_date"] = Time.now.strftime('%-d %b %Y')

`,g+=Ha(),g},lv=(n,i)=>{const o="StudentDeCourse",a=`Initialize${i.charAt(0).toUpperCase()+i.slice(1)}CourseRegistrationStep`,f=(n.workflow||[]).slice();console.log(`Generating initializer for ${o}`),console.log(`Total steps: ${f.length}`);const{conditionToRubyMap:p,conditionalCompletionStates:h}=Wa(n,f,o);let g=Ba(a);return g+=`    student = target_object.student
    college = target_object.college
    course = target_object.course
    course_section = target_object.course_section

    # Common initialization
    fields["parent_consent_email"] = true

    # Per-course workflow initialization
    # Set high school type - important to clearly differentiate the three types
    # These fields are mutually exclusive
    is_home_school = student.high_school.is_home_school?
    is_non_partner = student.high_school.is_non_partner?(college)
    is_regular_high_school = !is_home_school && !is_non_partner
    
    if is_home_school
      fields["home_school"] = true
      # Home School students don't get high_school or non_partner flags
    elsif is_non_partner
      fields["non_partner"] = true
      # Non-partner students don't get high_school or home_school flags
    else
      # Regular high school students
      fields["high_school"] = true
      fields["hs_student"] = true
      # Regular high school students don't get home_school or non_partner flags
    end

    # Set course prerequisites flag if applicable
    if course.has_requisites?
      fields["has_prereqs"] = true
    end

    # Set wish list flag if applicable
    if course_section.is_wish_list?
      fields["wish_list"] = true
    end

`,g+=qa(p),g+=Ua(p,h),g+=`    # Set up student signature for enrollment form
    fields["esign_enrollment_form_sign"] = target_object.student.display_name
    fields["esign_enrollment_form_date"] = Time.now.strftime('%-d %b %Y')

`,g+=Ha(),g},uv=(n,i,o)=>{switch(console.log("Generating initializer for target object type:",o),o){case"CollegeStudentApplication":return sv(n,i);case"StudentTerm":return av(n,i);case"StudentDeCourse":return lv(n,i);default:return console.error(`Unsupported target object type: ${o}`),`# Error: Unsupported target object type: ${o}`}},cv=n=>{if(n.role==="System"||n.participant_role==="system"||n.role==="Processing"||n.stepType==="system")return!1;const i=["RegisterViaApi","PendingCompletionOfOneTimeSteps","PendingCompletionOfPerTermSteps","PendingCompletionOfPerYearSteps","InitializeStudentTerm","InitializeRegistration","CompleteRegistration","DeclineRegistration"];return n.stepType==="ReviewFailedRegistration"?!0:!i.includes(n.stepType)},dv=n=>{const i=(n.role||n.participant_role||"student").toLowerCase().replace(/\s+/g,"_");let o="";if(n.stepType==="ReviewFailedRegistration")o="review_declined_registration";else if(n.title)o=n.title.toLowerCase().replace(/[^a-z0-9]+/g,"_").replace(/(^_+|_+$)/g,"");else switch(n.stepType.toLowerCase()){case"approval":o="approve";break;case"upload":o="provide_additional_info";break;case"information":o="information";break;default:o=n.stepType.toLowerCase().replace(/\s+/g,"_")}return`active_flow_steps/course_registration/${i}/${o}`},fv=(n,i)=>{const o=[],a=Xm(n.workflow).filter(cv),c=new Set,f="active_flow_steps/course_registration/parent/_provide_consent",p=jd(),h=`app/views/themes/${i}/${f}.html.erb`;o.push({path:h,content:p,viewPath:f});const g="active_flow_steps/course_registration/parent",C=`app/views/themes/${i}/${g}/_parent_provide_consent_instructions.html.erb`,T=jg();console.log("Adding consent instructions template:",C),o.push({path:C,content:T,viewPath:`${g}/_parent_provide_consent_instructions`});for(const w of a){if(w.stepType==="ProvideConsent")continue;const k=dv(w);if(!k||c.has(k))continue;c.add(k);const y=Td(w),x=k.split("/"),O=`_${x.pop()}.html.erb`,R=[...x,O].join("/"),z=`app/views/themes/${i}/${R}`;o.push({path:z,content:y,viewPath:k}),w.viewNameOverride=k}return o},pv=(n,i,o)=>{const u=fv(i,o),a=n.folder("views");return u.forEach(c=>{const f=c.path.replace(/^app\/views\//,"");console.log("Adding to ZIP:",f),a.file(f,c.content)}),u.length},hv=async(n,i,o={})=>{console.log("Workflow conditions for initializer:",n.conditions);try{const u=i.name.toLowerCase().replace(/[^a-z0-9]/g,""),a=new Yy,c=Id(n,i,o);a.file(`${u}_fixture.rb`,c);const f=Pd(n.workflow||[]);if(o.includeInitializers!==!1){const g=a.folder("initializers");f.forEach(_=>{const C=_.targetObject,T={...n,conditions:n.conditions||{}};console.log(`Generating initializer for ${C} with ${Object.keys(T.conditions||{}).length} conditions`);const w=uv(T,u,C),k=_.targetObject==="StudentDeCourse"?"CourseRegistration":_.targetObject,y=`Initialize${u.charAt(0).toUpperCase()+u.slice(1)}${k}Step`;let x="";k==="CollegeStudentApplication"?x="college_student_application":k==="CourseRegistration"?x="course_registration":k==="StudentTerm"?x="student_term":x=Lt(k);const j=`initialize_${u}_${x}_step.rb`,O=w.replace(/class Initialize(.*?)Step/,`class ${y}`);g.file(j,O)})}if(o.includeViewTemplates!==!1){const g=pv(a,n,u);console.log(`Added ${g} view templates to the ZIP archive`)}const p=mv(i,f,o);a.file("README.md",p);const h=await a.generateAsync({type:"blob"});return Ky.saveAs(h,`${u}_workflow_export.zip`),!0}catch(u){throw console.error("Error generating zip archive:",u),u}},mv=(n,i,o={})=>{const u=n.name,a=n.name.toLowerCase().replace(/[^a-z0-9]/g,"");a.charAt(0).toUpperCase()+a.slice(1);const c=o.includeViewTemplates!==!1?`
### View Templates
This export includes view templates for each non-system step in the workflow. These templates:
- Follow the structure used in the DualEnroll application
- Incorporate step-specific configuration details (labels, options, etc.)
- Are pre-configured to use the proper completion state values 
- Need to be placed in the appropriate theme directory for your college

To install the view templates:
1. Copy the template files from the \`views\` directory to the corresponding paths in your DualEnroll instance
2. The templates are organized by role and step type
3. Customize the templates as needed to match your college's specific styling and functionality
`:"";return`# ${u} Workflow Export

This archive contains the workflow definition files needed to implement the ${u} workflow in DualEnroll.

## Files Included

### Main Fixture File
- \`${a}_fixture.rb\` - Contains the college setup, ActiveFlowDefinitions, and ActiveFlowStepTriggers

### Initializer Classes
${i.map(f=>{const p=f.targetObject==="StudentDeCourse"?"CourseRegistration":f.targetObject;let h="";return p==="CollegeStudentApplication"?h="college_student_application":p==="CourseRegistration"?h="course_registration":p==="StudentTerm"?h="student_term":h=Lt(p),`- \`initializers/${`initialize_${a}_${h}_step.rb`}\` - Initializer for ${f.displayName} workflow`}).join(`
`)}
${c}

## Installation Instructions

1. Copy the main fixture file to the \`db/fixtures\` directory in your DualEnroll instance
2. Copy the initializer classes to the \`app/models/steps/${a}\` directory
   - Create this directory if it doesn't exist
   - The file naming follows the standard Rails convention (e.g., initialize_college_course_registration_step.rb)
   - Each file defines a class that matches the camelized file path (e.g., InitializeCollegeCourseRegistrationStep)
   - This ensures compatibility with Rails' autoloading system (Zeitwerk)
3. Copy the view templates to \`app/views/themes/${a}/\` directory
   - Make sure to preserve the directory structure
   - Customize the templates as needed for your college's specific requirements
4. Run the seed data import:
   \`\`\`
   rails db:seed_fu
   \`\`\`

## Implementation Notes

- The initializer classes handle conditional logic to set appropriate fields in the workflow
- Each workflow branch sets completion states for steps that would be skipped in other scenarios
- Scenario conditions from the workflow builder have been translated to Ruby code in the initializers
- View templates are pre-configured to work with the completion states defined in the workflow steps

## Workflow Overview

This export implements the following workflow components:
${i.map(f=>`- ${f.displayName} (${f.targetObject})`).join(`
`)}

## Understanding Soft Required Fields

The DualEnroll workflow system uses a "fields hash" to control the flow of steps. The initializer classes
automatically set fields for students based on conditions like:

- Whether they are home schooled
- Whether a course has prerequisites
- Whether parent consent is required
- And other workflow-specific conditions

This approach allows all students to eventually reach common endpoint steps in the workflow, regardless
of which conditional branches they follow.

## Document Types

Upload steps in this workflow use standard DualEnroll document types. The following document types are available:

- \`transcript\` - Student transcripts
- \`test_scores\` - Standardized test scores
- \`additional_documentation\` - Additional supporting documents
- \`other\` - Miscellaneous documents
- \`consolidated_pdf\` - Combined PDF documents
- \`proof_of_identity\` - Identity verification documents
- \`orientation_certificate\` - Orientation completion certificates
- \`regional_center_form\` - Regional center forms
- \`immunization_form\` - Immunization records
- \`home_school_affidavit\` - Home school affidavits
- \`immigration_document\` - Immigration documentation
- \`green_card\` - Green card documentation

These document types match the core DualEnroll system. When implementing custom upload steps, ensure that the document types match the expected values in the system.
`},gv=({workflow:n,workflowName:i,collegeInfo:o,setCollegeInfo:u,onClose:a,workflowConditions:c})=>{const[f,p]=fe.useState(o.name||""),[h,g]=fe.useState(o.id||""),[_,C]=fe.useState(o.city||""),[T,w]=fe.useState(o.state||""),[k,y]=fe.useState(o.zip||""),[x,j]=fe.useState(o.phone||""),[O,R]=fe.useState(o.url||""),[z,M]=fe.useState(o.type||"Public: 2-year"),[K,Z]=fe.useState(!0),[ne,U]=fe.useState(!0),[Q,ce]=fe.useState(!0),[N,L]=fe.useState("zip"),[b,G]=fe.useState(""),[ye,ee]=fe.useState(!1),[te,H]=fe.useState(!1),J=async()=>{if(!f||!h){alert("College Name and ID are required");return}u({name:f,id:h,city:_,state:T,zip:k,phone:x.replace(/[^0-9]/g,""),url:O,type:z});try{H(!0);const P={name:f,id:h,city:_,state:T,zip:k,phone:x.replace(/[^0-9]/g,""),url:O,type:z},pe={workflow:n,workflowName:i,conditions:c||{}};if(N==="zip")await hv(pe,P,{includeApplicationFields:K,includeInitializers:ne,includeViewTemplates:Q}),H(!1);else{const se=Id(pe,P,{includeApplicationFields:K});G(se),ee(!0),H(!1)}}catch(P){console.error("Error generating fixture:",P),alert("Error generating fixture: "+P.message),H(!1)}},E=()=>{if(!b)return;const P=`${f.toLowerCase().replace(/[^a-z0-9]/g,"")}_fixture.rb`,pe=new Blob([b],{type:"text/plain"}),se=URL.createObjectURL(pe),re=document.createElement("a");re.href=se,re.download=P,document.body.appendChild(re),re.click(),setTimeout(()=>{URL.revokeObjectURL(se),document.body.removeChild(re)},100)};return l.jsx("div",{className:"fixed inset-0 bg-gray-600 bg-opacity-50 overflow-y-auto h-full w-full flex items-center justify-center z-50",children:l.jsxs("div",{className:"relative p-5 bg-white w-11/12 md:w-3/4 lg:w-2/3 xl:w-1/2 mx-auto rounded-md shadow-lg",children:[l.jsxs("div",{className:"flex justify-between items-center mb-4",children:[l.jsx("h2",{className:"text-xl font-bold text-gray-800",children:"Export for Dev Team"}),l.jsx("button",{onClick:a,className:"text-gray-500 hover:text-gray-700",children:l.jsx("svg",{className:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:l.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M6 18L18 6M6 6l12 12"})})})]}),ye?l.jsxs("div",{children:[l.jsxs("div",{className:"my-4",children:[l.jsx("p",{className:"text-sm text-gray-700 mb-2",children:"Preview of the generated Ruby fixture file. Use the buttons below to download or go back."}),l.jsx("div",{className:"border border-gray-300 rounded-md bg-gray-50 p-4 h-96 overflow-auto",children:l.jsx("pre",{className:"text-xs text-gray-800 whitespace-pre-wrap",children:b})})]}),l.jsxs("div",{className:"flex justify-end mt-6 space-x-3",children:[l.jsx("button",{onClick:()=>ee(!1),className:"bg-white py-2 px-4 border border-gray-300 rounded-md shadow-sm text-sm font-medium text-gray-700 hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500",children:"Back"}),l.jsx("button",{onClick:E,className:"bg-indigo-600 py-2 px-4 border border-transparent rounded-md shadow-sm text-sm font-medium text-white hover:bg-indigo-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500",children:"Download File"})]})]}):l.jsxs("div",{className:"space-y-4",children:[l.jsx("p",{className:"text-gray-600 mb-4",children:"This will generate Ruby files that can be used by the development team to implement your workflow. You can choose to export a single fixture file or a ZIP archive containing multiple files."}),l.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[l.jsxs("div",{children:[l.jsxs("label",{htmlFor:"collegeName",className:"block text-sm font-medium text-gray-700",children:["College Name ",l.jsx("span",{className:"text-red-500",children:"*"})]}),l.jsx("input",{type:"text",id:"collegeName",value:f,onChange:P=>p(P.target.value),className:"mt-1 block w-full border border-gray-300 rounded-md shadow-sm py-2 px-3 focus:outline-none focus:ring-indigo-500 focus:border-indigo-500 sm:text-sm",placeholder:"Example University",required:!0})]}),l.jsxs("div",{children:[l.jsxs("label",{htmlFor:"collegeId",className:"block text-sm font-medium text-gray-700",children:["College ID ",l.jsx("span",{className:"text-red-500",children:"*"})]}),l.jsx("input",{type:"text",id:"collegeId",value:h,onChange:P=>g(P.target.value),className:"mt-1 block w-full border border-gray-300 rounded-md shadow-sm py-2 px-3 focus:outline-none focus:ring-indigo-500 focus:border-indigo-500 sm:text-sm",placeholder:"12345",required:!0}),l.jsx("p",{className:"mt-1 text-xs text-gray-500",children:"This is the college's ID in the database"})]}),l.jsxs("div",{children:[l.jsx("label",{htmlFor:"collegeCity",className:"block text-sm font-medium text-gray-700",children:"City"}),l.jsx("input",{type:"text",id:"collegeCity",value:_,onChange:P=>C(P.target.value),className:"mt-1 block w-full border border-gray-300 rounded-md shadow-sm py-2 px-3 focus:outline-none focus:ring-indigo-500 focus:border-indigo-500 sm:text-sm",placeholder:"Anytown"})]}),l.jsxs("div",{children:[l.jsx("label",{htmlFor:"collegeState",className:"block text-sm font-medium text-gray-700",children:"State"}),l.jsx("input",{type:"text",id:"collegeState",value:T,onChange:P=>w(P.target.value),className:"mt-1 block w-full border border-gray-300 rounded-md shadow-sm py-2 px-3 focus:outline-none focus:ring-indigo-500 focus:border-indigo-500 sm:text-sm",placeholder:"CA",maxLength:2})]}),l.jsxs("div",{children:[l.jsx("label",{htmlFor:"collegeZip",className:"block text-sm font-medium text-gray-700",children:"ZIP Code"}),l.jsx("input",{type:"text",id:"collegeZip",value:k,onChange:P=>y(P.target.value),className:"mt-1 block w-full border border-gray-300 rounded-md shadow-sm py-2 px-3 focus:outline-none focus:ring-indigo-500 focus:border-indigo-500 sm:text-sm",placeholder:"12345",maxLength:10})]}),l.jsxs("div",{children:[l.jsx("label",{htmlFor:"collegePhone",className:"block text-sm font-medium text-gray-700",children:"Phone"}),l.jsx("input",{type:"tel",id:"collegePhone",value:x,onChange:P=>j(P.target.value),className:"mt-1 block w-full border border-gray-300 rounded-md shadow-sm py-2 px-3 focus:outline-none focus:ring-indigo-500 focus:border-indigo-500 sm:text-sm",placeholder:"555-123-4567"})]}),l.jsxs("div",{children:[l.jsx("label",{htmlFor:"collegeUrl",className:"block text-sm font-medium text-gray-700",children:"Website URL"}),l.jsx("input",{type:"text",id:"collegeUrl",value:O,onChange:P=>R(P.target.value),className:"mt-1 block w-full border border-gray-300 rounded-md shadow-sm py-2 px-3 focus:outline-none focus:ring-indigo-500 focus:border-indigo-500 sm:text-sm",placeholder:"www.example.edu"})]}),l.jsxs("div",{children:[l.jsx("label",{htmlFor:"collegeType",className:"block text-sm font-medium text-gray-700",children:"Institution Type"}),l.jsxs("select",{id:"collegeType",value:z,onChange:P=>M(P.target.value),className:"mt-1 block w-full border border-gray-300 rounded-md shadow-sm py-2 px-3 focus:outline-none focus:ring-indigo-500 focus:border-indigo-500 sm:text-sm",children:[l.jsx("option",{value:"Public: 2-year",children:"Public: 2-year"}),l.jsx("option",{value:"Public: 4-year or above",children:"Public: 4-year or above"}),l.jsx("option",{value:"Private: 2-year",children:"Private: 2-year"}),l.jsx("option",{value:"Private: 4-year or above",children:"Private: 4-year or above"})]})]})]}),l.jsxs("div",{className:"mt-4 space-y-4",children:[l.jsxs("div",{children:[l.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Export Type"}),l.jsxs("div",{className:"flex space-x-4",children:[l.jsxs("div",{className:"flex items-center",children:[l.jsx("input",{id:"exportTypeZip",name:"exportType",type:"radio",value:"zip",checked:N==="zip",onChange:()=>L("zip"),className:"h-4 w-4 text-indigo-600 focus:ring-indigo-500 border-gray-300"}),l.jsx("label",{htmlFor:"exportTypeZip",className:"ml-2 block text-sm text-gray-700",children:"ZIP Archive (Multiple Files)"})]}),l.jsxs("div",{className:"flex items-center",children:[l.jsx("input",{id:"exportTypeSingle",name:"exportType",type:"radio",value:"single",checked:N==="single",onChange:()=>L("single"),className:"h-4 w-4 text-indigo-600 focus:ring-indigo-500 border-gray-300"}),l.jsx("label",{htmlFor:"exportTypeSingle",className:"ml-2 block text-sm text-gray-700",children:"Single Fixture File"})]})]}),l.jsx("p",{className:"mt-1 text-xs text-gray-500",children:"The ZIP archive includes initializer classes that handle workflow conditions"})]}),l.jsxs("div",{className:"flex items-center",children:[l.jsx("input",{id:"includeApplicationFields",name:"includeApplicationFields",type:"checkbox",checked:K,onChange:P=>Z(P.target.checked),className:"h-4 w-4 text-indigo-600 focus:ring-indigo-500 border-gray-300 rounded"}),l.jsx("label",{htmlFor:"includeApplicationFields",className:"ml-2 block text-sm text-gray-700",children:"Include standard application fields and pages"})]}),l.jsx("p",{className:"mt-1 text-xs text-gray-500",children:"Adds common student application fields, pages and a basic enrollment form to the fixture"}),N==="zip"&&l.jsxs(l.Fragment,{children:[l.jsxs("div",{className:"flex items-center",children:[l.jsx("input",{id:"includeInitializers",name:"includeInitializers",type:"checkbox",checked:ne,onChange:P=>U(P.target.checked),className:"h-4 w-4 text-indigo-600 focus:ring-indigo-500 border-gray-300 rounded"}),l.jsx("label",{htmlFor:"includeInitializers",className:"ml-2 block text-sm text-gray-700",children:"Include initializer classes"})]}),l.jsxs("div",{className:"flex items-center",children:[l.jsx("input",{id:"includeViewTemplates",name:"includeViewTemplates",type:"checkbox",checked:Q,onChange:P=>ce(P.target.checked),className:"h-4 w-4 text-indigo-600 focus:ring-indigo-500 border-gray-300 rounded","data-testid":"include-view-templates-checkbox"}),l.jsx("label",{htmlFor:"includeViewTemplates",className:"ml-2 block text-sm text-gray-700",children:"Include view templates"})]}),l.jsx("p",{className:"mt-1 text-xs text-gray-500",children:"Generates view template files for each step in the workflow"})]})]}),l.jsxs("div",{className:"flex justify-end mt-6 space-x-3",children:[l.jsx("button",{onClick:a,className:"bg-white py-2 px-4 border border-gray-300 rounded-md shadow-sm text-sm font-medium text-gray-700 hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500",children:"Cancel"}),l.jsx("button",{onClick:J,disabled:te||!f||!h,className:`py-2 px-4 border border-transparent rounded-md shadow-sm text-sm font-medium text-white focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500 ${te||!f||!h?"bg-indigo-300":"bg-indigo-600 hover:bg-indigo-700"}`,children:te?"Generating...":N==="zip"?"Generate ZIP Archive":"Generate Fixture"})]})]})]})})},yv=()=>{const{workflow:n,setWorkflow:i,workflowName:o,setWorkflowName:u,collegeInfo:a,setCollegeInfo:c}=ly(),[f,p]=fe.useState({}),[h,g]=fe.useState(!1),[_,C]=fe.useState(!1),[T,w]=fe.useState(null),{isAddingStep:k,setIsAddingStep:y,editingStep:x,setEditingStep:j,showSaveModal:O,setShowSaveModal:R,showNewWorkflowModal:z,setShowNewWorkflowModal:M}=uy(),K=()=>{const H={};return Object.keys(f).forEach(J=>{H[J]=[]}),n.forEach(J=>{J.conditional&&J.workflowCondition&&(Array.isArray(J.workflowCondition)?J.workflowCondition:[J.workflowCondition]).forEach(P=>{f[P]&&(H[P]||(H[P]=[]),H[P].push(J.id))})}),H},Z=H=>{p(H)},ne=H=>{w(H),g(!0)},U=H=>{cy(H,i),y(!1)},Q=H=>{dy(H,x,i),j(null)},ce=H=>{fy(H,i)},N=(H,J)=>{hy(H,J,i)},L=()=>{vy(o,n,f,a),R(!1)},b=()=>{M(!0)},G=()=>{i([]),u("New Workflow"),p({}),M(!1),window.loadingTemplate&&te()},ye=H=>{const J=H.target.files[0];J&&_y(J,i,u,p,c).then(()=>{H.target.value=""}).catch(E=>{alert(E.message)})},ee=()=>{n.length>0?(M(!0),window.loadingTemplate=!0):te()},te=async()=>{try{await wy("standard-recommended-workflow",i,u,p,c),window.loadingTemplate=!1}catch(H){alert("Error loading template: "+H.message)}};return l.jsx(Jh,{backend:Vm,children:l.jsxs("div",{className:"bg-white rounded-lg shadow-md p-6 mb-8 h-auto",children:[l.jsx(Gm,{workflowName:o,onSave:()=>R(!0),onImport:ye,onNew:b,onStartFromTemplate:ee,onExportDevTeam:()=>C(!0)}),l.jsx(Ig,{workflowConditions:f,onManageConditions:()=>g(!0)}),l.jsx(Eg,{workflow:n,onEditStep:j,onDeleteStep:ce,moveStep:N,onAddStep:()=>y(!0)}),l.jsx(Jc,{isOpen:k,onClose:()=>y(!1),title:"Add New Step",onSubmit:U,onAddFeedbackStep:U,workflowConditions:f,onManageWorkflowConditions:ne}),x&&l.jsx(Jc,{isOpen:x!==null,onClose:()=>j(null),title:"Edit Step",initialData:n.find(H=>H.id===x),onSubmit:Q,onAddFeedbackStep:U,workflowConditions:f,onManageWorkflowConditions:ne}),l.jsx(ay,{isOpen:h,onClose:()=>{g(!1),w(null)},conditions:f,onUpdate:Z,usageStats:K(),initialCondition:T,title:"Manage Workflow Conditions"}),l.jsx(iy,{isOpen:O,onClose:()=>R(!1),workflowName:o,setWorkflowName:u,onSave:L}),l.jsx(oy,{isOpen:z,onClose:()=>M(!1),onConfirm:G,title:"Create New Workflow",message:"Are you sure you want to create a new workflow? Any unsaved changes will be lost.",confirmButtonText:"Create New",confirmButtonClass:"bg-blue-600 hover:bg-blue-700"}),_&&l.jsx(gv,{workflow:n,workflowName:o,collegeInfo:a,setCollegeInfo:c,onClose:()=>C(!1),workflowConditions:f})]})})};function vv(){return l.jsxs("div",{className:"flex flex-col h-screen",children:[l.jsx("header",{className:"bg-primary text-white p-6 shadow-md flex-shrink-0",children:l.jsxs("div",{className:"container mx-auto",children:[l.jsx("h1",{className:"text-2xl font-bold",children:"DualEnroll Workflow Builder"}),l.jsx("p",{className:"text-primary-50 mt-1",children:"Create and visualize workflow processes"})]})}),l.jsx("main",{className:"flex-grow container mx-auto p-6 overflow-auto",children:l.jsx(yv,{})}),l.jsx("footer",{className:"bg-gray-800 text-white py-4 text-center flex-shrink-0",children:l.jsxs("p",{className:"text-sm",children:[" ",new Date().getFullYear()," DualEnroll Workflow Builder"]})})]})}Ap.createRoot(document.getElementById("root")).render(l.jsx(fe.StrictMode,{children:l.jsx(vv,{})}));
